import{f as ee,a as Z,c as sc,t as ld}from"./Ce3tKq2q.js";import{i as Yr}from"./vP10umfK.js";import{w as Zo,d as pd,o as hd}from"./Dmk5vVOr.js";import{h as Ge,N as bd,b as yd,w as H,aw as md,O as gd,P as wd,Q as Ka,d as Bs,s as Cs,e as Ir,C as vd,ar as xd,ac as Za,f as tn,j as co,k as Ed,ap as Yo,aJ as Ad,a4 as Ya,V as ft,aK as Pd,aL as Td,aM as $d,c as ks,aN as lt,r as oc,p as ac,aO as Ns,a as Id,ao as Sd,i as Bd,g as Cd,T as ic,aP as cc,aQ as kd,aR as Nd,aS as Od,aT as _d,aU as Md,aV as Rd,aW as Fd,aH as zd,q as Ld,S as Ud,aX as Dd,A as Jr,B as et,D as Xr,F as U,I as G,G as L,X as ne,l as Cn,aY as Gd,ad as uo,R as jd,aZ as Hd}from"./BSaqiTP_.js";import{h as qd}from"./B1lbSjdu.js";import{s as X,e as re}from"./B6sbQzxP.js";import{_ as uc,i as tt,s as dc,a as Rr,b as Vd}from"./DSi-mmah.js";function Wd(e,t){return t}function Kd(e,t,n){for(var r=[],s=t.length,o,a=t.length,i=0;i<s;i++){let f=t[i];ac(f,()=>{if(o){if(o.pending.delete(f),o.done.add(f),o.pending.size===0){var l=e.outrogroups;fo(Yo(o.done)),l.delete(o),l.size===0&&(e.outrogroups=null)}}else a-=1},!1)}if(a===0){var c=r.length===0&&n!==null;if(c){var u=n,d=u.parentNode;Sd(d),d.append(u),e.items.clear()}fo(t,!c)}else o={pending:new Set(t),done:new Set},(e.outrogroups??=new Set).add(o)}function fo(e,t=!0){for(var n=0;n<e.length;n++)Bd(e[n],t)}var Ja;function fc(e,t,n,r,s,o=null){var a=e,i=new Map,c=(t&cc)!==0;if(c){var u=e;a=Ge?Bs(Cd(u)):u.appendChild(ks())}Ge&&bd();var d=null,f=md(()=>{var w=n();return Ad(w)?w:w==null?[]:Yo(w)}),l,p=!0;function h(){m.fallback=d,Zd(m,l,a,t,r),d!==null&&(l.length===0?(d.f&lt)===0?oc(d):(d.f^=lt,kn(d,null,a)):ac(d,()=>{d=null}))}var y=yd(()=>{l=H(f);var w=l.length;let A=!1;if(Ge){var v=gd(a)===wd;v!==(w===0)&&(a=Ka(),Bs(a),Cs(!1),A=!0)}for(var b=new Set,g=tn,E=Ed(),P=0;P<w;P+=1){Ge&&Ir.nodeType===vd&&Ir.data===xd&&(a=Ir,A=!0,Cs(!1));var T=l[P],k=r(T,P),x=p?null:i.get(k);x?(x.v&&Za(x.v,T),x.i&&Za(x.i,P),E&&g.skipped_effects.delete(x.e)):(x=Yd(i,p?a:Ja??=ks(),T,k,P,s,t,n),p||(x.e.f|=lt),i.set(k,x)),b.add(k)}if(w===0&&o&&!d&&(p?d=co(()=>o(a)):(d=co(()=>o(Ja??=ks())),d.f|=lt)),Ge&&w>0&&Bs(Ka()),!p)if(E){for(const[C,O]of i)b.has(C)||g.skipped_effects.add(O.e);g.oncommit(h),g.ondiscard(()=>{})}else h();A&&Cs(!0),H(f)}),m={effect:y,items:i,outrogroups:null,fallback:d};p=!1,Ge&&(a=Ir)}function Zd(e,t,n,r,s){var o=(r&kd)!==0,a=t.length,i=e.items,c=e.effect.first,u,d=null,f,l=[],p=[],h,y,m,w;if(o)for(w=0;w<a;w+=1)h=t[w],y=s(h,w),m=i.get(y).e,(m.f&lt)===0&&(m.nodes?.a?.measure(),(f??=new Set).add(m));for(w=0;w<a;w+=1){if(h=t[w],y=s(h,w),m=i.get(y).e,e.outrogroups!==null)for(const x of e.outrogroups)x.pending.delete(m),x.done.delete(m);if((m.f&lt)!==0)if(m.f^=lt,m===c)kn(m,null,n);else{var A=d?d.next:c;m===e.effect.last&&(e.effect.last=m.prev),m.prev&&(m.prev.next=m.next),m.next&&(m.next.prev=m.prev),xt(e,d,m),xt(e,m,A),kn(m,A,n),d=m,l=[],p=[],c=d.next;continue}if((m.f&Ns)!==0&&(oc(m),o&&(m.nodes?.a?.unfix(),(f??=new Set).delete(m))),m!==c){if(u!==void 0&&u.has(m)){if(l.length<p.length){var v=p[0],b;d=v.prev;var g=l[0],E=l[l.length-1];for(b=0;b<l.length;b+=1)kn(l[b],v,n);for(b=0;b<p.length;b+=1)u.delete(p[b]);xt(e,g.prev,E.next),xt(e,d,g),xt(e,E,v),c=v,d=E,w-=1,l=[],p=[]}else u.delete(m),kn(m,c,n),xt(e,m.prev,m.next),xt(e,m,d===null?e.effect.first:d.next),xt(e,d,m),d=m;continue}for(l=[],p=[];c!==null&&c!==m;)(u??=new Set).add(c),p.push(c),c=c.next;if(c===null)continue}(m.f&lt)===0&&l.push(m),d=m,c=m.next}if(e.outrogroups!==null){for(const x of e.outrogroups)x.pending.size===0&&(fo(Yo(x.done)),e.outrogroups?.delete(x));e.outrogroups.size===0&&(e.outrogroups=null)}if(c!==null||u!==void 0){var P=[];if(u!==void 0)for(m of u)(m.f&Ns)===0&&P.push(m);for(;c!==null;)(c.f&Ns)===0&&c!==e.fallback&&P.push(c),c=c.next;var T=P.length;if(T>0){var k=(r&cc)!==0&&a===0?n:null;if(o){for(w=0;w<T;w+=1)P[w].nodes?.a?.measure();for(w=0;w<T;w+=1)P[w].nodes?.a?.fix()}Kd(e,P,k)}}o&&ic(()=>{if(f!==void 0)for(m of f)m.nodes?.a?.apply()})}function Yd(e,t,n,r,s,o,a,i){var c=(a&Td)!==0?(a&$d)===0?ft(n,!1,!1):Ya(n):null,u=(a&Pd)!==0?Ya(s):null;return{v:c,i:u,e:co(()=>(o(t,c??n,u??s,i),()=>{e.delete(r)}))}}function kn(e,t,n){if(e.nodes)for(var r=e.nodes.start,s=e.nodes.end,o=t&&(t.f&lt)===0?t.nodes.start:n;r!==null;){var a=Id(r);if(o.before(r),r===s)return;r=a}}function xt(e,t,n){t===null?e.effect.first=n:t.next=n,n===null?e.effect.last=t:n.prev=t}const Xa=[...` 	
\r\fÂ \v\uFEFF`];function Jd(e,t,n){var r=e==null?"":""+e;if(t&&(r=r?r+" "+t:t),n){for(var s in n)if(n[s])r=r?r+" "+s:s;else if(r.length)for(var o=s.length,a=0;(a=r.indexOf(s,a))>=0;){var i=a+o;(a===0||Xa.includes(r[a-1]))&&(i===r.length||Xa.includes(r[i]))?r=(a===0?"":r.substring(0,a))+r.substring(i+1):a=i}}return r===""?null:r}function Fr(e,t,n,r,s,o){var a=e.__className;if(Ge||a!==n||a===void 0){var i=Jd(n,r,o);(!Ge||i!==e.getAttribute("class"))&&(i==null?e.removeAttribute("class"):e.className=i),e.__className=n}else if(o&&s!==o)for(var c in o){var u=!!o[c];(s==null||u!==!!s[c])&&e.classList.toggle(c,u)}return o}const Xd=Symbol("is custom element"),Qd=Symbol("is html");function ef(e){if(Ge){var t=!1,n=()=>{if(!t){if(t=!0,e.hasAttribute("value")){var r=e.value;lo(e,"value",null),e.value=r}if(e.hasAttribute("checked")){var s=e.checked;lo(e,"checked",null),e.checked=s}}};e.__on_r=n,ic(n),Nd()}}function lo(e,t,n,r){var s=tf(e);Ge&&(s[t]=e.getAttribute(t),t==="src"||t==="srcset"||t==="href"&&e.nodeName==="LINK")||s[t]!==(s[t]=n)&&(t==="loading"&&(e[Od]=n),n==null?e.removeAttribute(t):typeof n!="string"&&nf(e).includes(t)?e[t]=n:e.setAttribute(t,n))}function tf(e){return e.__attributes??={[Xd]:e.nodeName.includes("-"),[Qd]:e.namespaceURI===_d}}var Qa=new Map;function nf(e){var t=e.getAttribute("is")||e.nodeName,n=Qa.get(t);if(n)return n;Qa.set(t,n=[]);for(var r,s=e,o=Element.prototype;o!==s;){r=Rd(s);for(var a in r)r[a].set&&n.push(a);s=Md(s)}return n}function rf(e,t,n=t){var r=new WeakSet;Fd(e,"input",async s=>{var o=s?e.defaultValue:e.value;if(o=Os(e)?_s(o):o,n(o),tn!==null&&r.add(tn),await zd(),o!==(o=t())){var a=e.selectionStart,i=e.selectionEnd,c=e.value.length;if(e.value=o??"",i!==null){var u=e.value.length;a===i&&i===c&&u>c?(e.selectionStart=u,e.selectionEnd=u):(e.selectionStart=a,e.selectionEnd=Math.min(i,u))}}}),(Ge&&e.defaultValue!==e.value||Ld(t)==null&&e.value)&&(n(Os(e)?_s(e.value):e.value),tn!==null&&r.add(tn)),Ud(()=>{var s=t();if(e===document.activeElement){var o=Dd??tn;if(r.has(o))return}Os(e)&&s===_s(e.value)||e.type==="date"&&!s&&!e.value||s!==e.value&&(e.value=s??"")})}function Os(e){var t=e.type;return t==="number"||t==="range"}function _s(e){return e===""?null:+e}const sf="1.2.3";let Pe=class po extends Error{constructor(t,n={}){const r=n.cause instanceof po?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof po&&n.cause.docsPath||n.docsPath,o=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${sf}`].join(`
`);super(o),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}};function gt(e,t){return e.exec(t)?.groups}const lc=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,pc=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,hc=/^\(.+?\).*?$/,ei=/^tuple(?<array>(\[(\d*)\])*)$/;function ho(e){let t=e.type;if(ei.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const o=e.components[s];t+=ho(o),s<n-1&&(t+=", ")}const r=gt(ei,e.type);return t+=`)${r?.array||""}`,ho({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function nn(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=ho(s),r!==n-1&&(t+=", ")}return t}function zr(e){return e.type==="function"?`function ${e.name}(${nn(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs?.length?` returns (${nn(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${nn(e.inputs)})`:e.type==="error"?`error ${e.name}(${nn(e.inputs)})`:e.type==="constructor"?`constructor(${nn(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?`fallback() external${e.stateMutability==="payable"?" payable":""}`:"receive() external payable"}const bc=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function of(e){return bc.test(e)}function af(e){return gt(bc,e)}const yc=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function cf(e){return yc.test(e)}function uf(e){return gt(yc,e)}const mc=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function df(e){return mc.test(e)}function ff(e){return gt(mc,e)}const gc=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function Qr(e){return gc.test(e)}function lf(e){return gt(gc,e)}const wc=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function pf(e){return wc.test(e)}function hf(e){return gt(wc,e)}const vc=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function bf(e){return vc.test(e)}function yf(e){return gt(vc,e)}const mf=/^receive\(\) external payable$/;function gf(e){return mf.test(e)}const ti=new Set(["memory","indexed","storage","calldata"]),wf=new Set(["indexed"]),bo=new Set(["calldata","memory","storage"]);class vf extends Pe{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class xf extends Pe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Ef extends Pe{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Af extends Pe{constructor({params:t}){super("Failed to parse ABI parameters.",{details:`parseAbiParameters(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiparameters-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiParametersError"})}}class Pf extends Pe{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Tf extends Pe{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class $f extends Pe{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class If extends Pe{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class Sf extends Pe{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class yn extends Pe{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Bf extends Pe{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class Cf extends Pe{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class kf extends Pe{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Nf extends Pe{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Of(e,t,n){let r="";if(n)for(const s of Object.entries(n)){if(!s)continue;let o="";for(const a of s[1])o+=`[${a.type}${a.name?`:${a.name}`:""}]`;r+=`(${s[0]}{${o}})`}return t?`${t}:${e}${r}`:`${e}${r}`}const Ms=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function yo(e,t={}){if(df(e))return _f(e,t);if(cf(e))return Mf(e,t);if(of(e))return Rf(e,t);if(pf(e))return Ff(e,t);if(bf(e))return zf(e);if(gf(e))return{type:"receive",stateMutability:"payable"};throw new Bf({signature:e})}function _f(e,t={}){const n=ff(e);if(!n)throw new yn({signature:e,type:"function"});const r=Ce(n.parameters),s=[],o=r.length;for(let i=0;i<o;i++)s.push(bt(r[i],{modifiers:bo,structs:t,type:"function"}));const a=[];if(n.returns){const i=Ce(n.returns),c=i.length;for(let u=0;u<c;u++)a.push(bt(i[u],{modifiers:bo,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:a}}function Mf(e,t={}){const n=uf(e);if(!n)throw new yn({signature:e,type:"event"});const r=Ce(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(bt(r[a],{modifiers:wf,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}function Rf(e,t={}){const n=af(e);if(!n)throw new yn({signature:e,type:"error"});const r=Ce(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(bt(r[a],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}function Ff(e,t={}){const n=hf(e);if(!n)throw new yn({signature:e,type:"constructor"});const r=Ce(n.parameters),s=[],o=r.length;for(let a=0;a<o;a++)s.push(bt(r[a],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}function zf(e){const t=yf(e);if(!t)throw new yn({signature:e,type:"fallback"});return{type:"fallback",stateMutability:t.stateMutability??"nonpayable"}}const Lf=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*(?:\spayable)?)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Uf=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Df=/^u?int$/;function bt(e,t){const n=Of(e,t?.type,t?.structs);if(Ms.has(n))return Ms.get(n);const r=hc.test(e),s=gt(r?Uf:Lf,e);if(!s)throw new Pf({param:e});if(s.name&&jf(s.name))throw new Tf({param:e,name:s.name});const o=s.name?{name:s.name}:{},a=s.modifier==="indexed"?{indexed:!0}:{},i=t?.structs??{};let c,u={};if(r){c="tuple";const f=Ce(s.type),l=[],p=f.length;for(let h=0;h<p;h++)l.push(bt(f[h],{structs:i}));u={components:l}}else if(s.type in i)c="tuple",u={components:i[s.type]};else if(Df.test(s.type))c=`${s.type}256`;else if(s.type==="address payable")c="address";else if(c=s.type,t?.type!=="struct"&&!xc(c))throw new Ef({type:c});if(s.modifier){if(!t?.modifiers?.has?.(s.modifier))throw new $f({param:e,type:t?.type,modifier:s.modifier});if(bo.has(s.modifier)&&!Hf(c,!!s.array))throw new If({param:e,type:t?.type,modifier:s.modifier})}const d={type:`${c}${s.array??""}`,...o,...a,...u};return Ms.set(n,d),d}function Ce(e,t=[],n="",r=0){const s=e.trim().length;for(let o=0;o<s;o++){const a=e[o],i=e.slice(o+1);switch(a){case",":return r===0?Ce(i,[...t,n.trim()]):Ce(i,t,`${n}${a}`,r);case"(":return Ce(i,t,`${n}${a}`,r+1);case")":return Ce(i,t,`${n}${a}`,r-1);default:return Ce(i,t,`${n}${a}`,r)}}if(n==="")return t;if(r!==0)throw new Nf({current:n,depth:r});return t.push(n.trim()),t}function xc(e){return e==="address"||e==="bool"||e==="function"||e==="string"||lc.test(e)||pc.test(e)}const Gf=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function jf(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||lc.test(e)||pc.test(e)||Gf.test(e)}function Hf(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function Jo(e){const t={},n=e.length;for(let a=0;a<n;a++){const i=e[a];if(!Qr(i))continue;const c=lf(i);if(!c)throw new yn({signature:i,type:"struct"});const u=c.properties.split(";"),d=[],f=u.length;for(let l=0;l<f;l++){const h=u[l].trim();if(!h)continue;const y=bt(h,{type:"struct"});d.push(y)}if(!d.length)throw new Cf({signature:i});t[c.name]=d}const r={},s=Object.entries(t),o=s.length;for(let a=0;a<o;a++){const[i,c]=s[a];r[i]=Ec(c,t)}return r}const qf=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function Ec(e=[],t={},n=new Set){const r=[],s=e.length;for(let o=0;o<s;o++){const a=e[o];if(hc.test(a.type))r.push(a);else{const c=gt(qf,a.type);if(!c?.type)throw new Sf({abiParameter:a});const{array:u,type:d}=c;if(d in t){if(n.has(d))throw new kf({type:d});r.push({...a,type:`tuple${u??""}`,components:Ec(t[d],t,new Set([...n,d]))})}else if(xc(d))r.push(a);else throw new xf({type:d})}}return r}function Ac(e){const t=Jo(e),n=[],r=e.length;for(let s=0;s<r;s++){const o=e[s];Qr(o)||n.push(yo(o,t))}return n}function ni(e){let t;if(typeof e=="string")t=yo(e);else{const n=Jo(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(!Qr(o)){t=yo(o,n);break}}}if(!t)throw new vf({signature:e});return t}function It(e){const t=[];if(typeof e=="string"){const n=Ce(e),r=n.length;for(let s=0;s<r;s++)t.push(bt(n[s],{modifiers:ti}))}else{const n=Jo(e),r=e.length;for(let s=0;s<r;s++){const o=e[s];if(Qr(o))continue;const a=Ce(o),i=a.length;for(let c=0;c<i;c++)t.push(bt(a[c],{modifiers:ti,structs:n}))}}if(t.length===0)throw new Af({params:e});return t}function z(e,t,n){const r=e[t.name];if(typeof r=="function")return r;const s=e[n];return typeof s=="function"?s:o=>t(e,o)}function He(e,{includeName:t=!1}={}){if(e.type!=="function"&&e.type!=="event"&&e.type!=="error")throw new ol(e.type);return`${e.name}(${es(e.inputs,{includeName:t})})`}function es(e,{includeName:t=!1}={}){return e?e.map(n=>Vf(n,{includeName:t})).join(t?", ":","):""}function Vf(e,{includeName:t}){return e.type.startsWith("tuple")?`(${es(e.components,{includeName:t})})${e.type.slice(5)}`:e.type+(t&&e.name?` ${e.name}`:"")}function qe(e,{strict:t=!0}={}){return!e||typeof e!="string"?!1:t?/^0x[0-9a-fA-F]*$/.test(e):e.startsWith("0x")}function J(e){return qe(e,{strict:!1})?Math.ceil((e.length-2)/2):e.length}const Pc="2.43.4";let Rs={getDocsUrl:({docsBaseUrl:e,docsPath:t="",docsSlug:n})=>t?`${e??"https://viem.sh"}${t}${n?`#${n}`:""}`:void 0,version:`viem@${Pc}`},$=class mo extends Error{constructor(t,n={}){const r=n.cause instanceof mo?n.cause.details:n.cause?.message?n.cause.message:n.details,s=n.cause instanceof mo&&n.cause.docsPath||n.docsPath,o=Rs.getDocsUrl?.({...n,docsPath:s}),a=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...o?[`Docs: ${o}`]:[],...r?[`Details: ${r}`]:[],...Rs.version?[`Version: ${Rs.version}`]:[]].join(`
`);super(a,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.name=n.name??this.name,this.shortMessage=t,this.version=Pc}walk(t){return Tc(this,t)}};function Tc(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause!==void 0?Tc(e.cause,t):t?null:e}class Wf extends ${constructor({docsPath:t}){super(["A constructor was not found on the ABI.","Make sure you are using the correct ABI and that the constructor exists on it."].join(`
`),{docsPath:t,name:"AbiConstructorNotFoundError"})}}class ri extends ${constructor({docsPath:t}){super(["Constructor arguments were provided (`args`), but a constructor parameters (`inputs`) were not found on the ABI.","Make sure you are using the correct ABI, and that the `inputs` attribute on the constructor exists."].join(`
`),{docsPath:t,name:"AbiConstructorParamsNotFoundError"})}}class $c extends ${constructor({data:t,params:n,size:r}){super([`Data size of ${r} bytes is too small for given parameters.`].join(`
`),{metaMessages:[`Params: (${es(n,{includeName:!0})})`,`Data:   ${t} (${r} bytes)`],name:"AbiDecodingDataSizeTooSmallError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t,this.params=n,this.size=r}}class cr extends ${constructor(){super('Cannot decode zero data ("0x") with ABI parameters.',{name:"AbiDecodingZeroDataError"})}}class Kf extends ${constructor({expectedLength:t,givenLength:n,type:r}){super([`ABI encoding array length mismatch for type ${r}.`,`Expected length: ${t}`,`Given length: ${n}`].join(`
`),{name:"AbiEncodingArrayLengthMismatchError"})}}class Zf extends ${constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${J(n)}) does not match expected size (bytes${t}).`,{name:"AbiEncodingBytesSizeMismatchError"})}}class Yf extends ${constructor({expectedLength:t,givenLength:n}){super(["ABI encoding params/values length mismatch.",`Expected length (params): ${t}`,`Given length (values): ${n}`].join(`
`),{name:"AbiEncodingLengthMismatchError"})}}class Jf extends ${constructor(t,{docsPath:n}){super([`Arguments (\`args\`) were provided to "${t}", but "${t}" on the ABI does not contain any parameters (\`inputs\`).`,"Cannot encode error result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the inputs exist on it."].join(`
`),{docsPath:n,name:"AbiErrorInputsNotFoundError"})}}class si extends ${constructor(t,{docsPath:n}={}){super([`Error ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it."].join(`
`),{docsPath:n,name:"AbiErrorNotFoundError"})}}class Ic extends ${constructor(t,{docsPath:n}){super([`Encoded error signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiErrorSignatureNotFoundError"}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.signature=t}}class Xf extends ${constructor({docsPath:t}){super("Cannot extract event signature from empty topics.",{docsPath:t,name:"AbiEventSignatureEmptyTopicsError"})}}class Qf extends ${constructor(t,{docsPath:n}){super([`Encoded event signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiEventSignatureNotFoundError"})}}class oi extends ${constructor(t,{docsPath:n}={}){super([`Event ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the event exists on it."].join(`
`),{docsPath:n,name:"AbiEventNotFoundError"})}}class fn extends ${constructor(t,{docsPath:n}={}){super([`Function ${t?`"${t}" `:""}not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionNotFoundError"})}}class Sc extends ${constructor(t,{docsPath:n}){super([`Function "${t}" does not contain any \`outputs\` on ABI.`,"Cannot decode function result without knowing what the parameter types are.","Make sure you are using the correct ABI and that the function exists on it."].join(`
`),{docsPath:n,name:"AbiFunctionOutputsNotFoundError"})}}class el extends ${constructor(t,{docsPath:n}){super([`Encoded function signature "${t}" not found on ABI.`,"Make sure you are using the correct ABI and that the function exists on it.",`You can look up the signature here: https://openchain.xyz/signatures?query=${t}.`].join(`
`),{docsPath:n,name:"AbiFunctionSignatureNotFoundError"})}}class tl extends ${constructor(t,n){super("Found ambiguous types in overloaded ABI items.",{metaMessages:[`\`${t.type}\` in \`${He(t.abiItem)}\`, and`,`\`${n.type}\` in \`${He(n.abiItem)}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."],name:"AbiItemAmbiguityError"})}}let nl=class extends ${constructor({expectedSize:t,givenSize:n}){super(`Expected bytes${t}, got bytes${n}.`,{name:"BytesSizeMismatchError"})}};class Lr extends ${constructor({abiItem:t,data:n,params:r,size:s}){super([`Data size of ${s} bytes is too small for non-indexed event parameters.`].join(`
`),{metaMessages:[`Params: (${es(r,{includeName:!0})})`,`Data:   ${n} (${s} bytes)`],name:"DecodeLogDataMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"params",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"size",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t,this.data=n,this.params=r,this.size=s}}class Xo extends ${constructor({abiItem:t,param:n}){super([`Expected a topic for indexed event parameter${n.name?` "${n.name}"`:""} on event "${He(t,{includeName:!0})}".`].join(`
`),{name:"DecodeLogTopicsMismatch"}),Object.defineProperty(this,"abiItem",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abiItem=t}}class rl extends ${constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid encoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiEncodingType"})}}class sl extends ${constructor(t,{docsPath:n}){super([`Type "${t}" is not a valid decoding type.`,"Please provide a valid ABI type."].join(`
`),{docsPath:n,name:"InvalidAbiDecodingType"})}}let Bc=class extends ${constructor(t){super([`Value "${t}" is not a valid array.`].join(`
`),{name:"InvalidArrayError"})}};class ol extends ${constructor(t){super([`"${t}" is not a valid definition type.`,'Valid types: "function", "event", "error"'].join(`
`),{name:"InvalidDefinitionTypeError"})}}class al extends ${constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}let Cc=class extends ${constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset "${t}" is out-of-bounds (size: ${r}).`,{name:"SliceOffsetOutOfBoundsError"})}},kc=class extends ${constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (${t}) exceeds padding size (${n}).`,{name:"SizeExceedsPaddingSizeError"})}};class ai extends ${constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} is expected to be ${n} ${r} long, but is ${t} ${r} long.`,{name:"InvalidBytesLengthError"})}}function mn(e,{dir:t,size:n=32}={}){return typeof e=="string"?$t(e,{dir:t,size:n}):il(e,{dir:t,size:n})}function $t(e,{dir:t,size:n=32}={}){if(n===null)return e;const r=e.replace("0x","");if(r.length>n*2)throw new kc({size:Math.ceil(r.length/2),targetSize:n,type:"hex"});return`0x${r[t==="right"?"padEnd":"padStart"](n*2,"0")}`}function il(e,{dir:t,size:n=32}={}){if(n===null)return e;if(e.length>n)throw new kc({size:e.length,targetSize:n,type:"bytes"});const r=new Uint8Array(n);for(let s=0;s<n;s++){const o=t==="right";r[o?s:n-s-1]=e[o?s:e.length-s-1]}return r}let Nc=class extends ${constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number "${o}" is not in safe ${s?`${s*8}-bit ${r?"signed":"unsigned"} `:""}integer range ${t?`(${n} to ${t})`:`(above ${n})`}`,{name:"IntegerOutOfRangeError"})}},cl=class extends ${constructor(t){super(`Bytes value "${t}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}};class ul extends ${constructor(t){super(`Hex value "${t}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}let dl=class extends ${constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed ${n} bytes. Given size: ${t} bytes.`,{name:"SizeOverflowError"})}};function ze(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}function Ye(e,{size:t}){if(J(e)>t)throw new dl({givenSize:J(e),maxSize:t})}function ke(e,t={}){const{signed:n}=t;t.size&&Ye(e,{size:t.size});const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n-1n)-1n;return r<=o?r:r-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function fl(e,t={}){let n=e;if(t.size&&(Ye(n,{size:t.size}),n=ze(n)),ze(n)==="0x00")return!1;if(ze(n)==="0x01")return!0;throw new ul(n)}function Le(e,t={}){return Number(ke(e,t))}const ll=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Q(e,t={}){return typeof e=="number"||typeof e=="bigint"?N(e,t):typeof e=="string"?ln(e,t):typeof e=="boolean"?Oc(e,t):se(e,t)}function Oc(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(Ye(n,{size:t.size}),mn(n,{size:t.size})):n}function se(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=ll[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(Ye(r,{size:t.size}),mn(r,{dir:"right",size:t.size})):r}function N(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<a){const c=typeof e=="bigint"?"n":"";throw new Nc({max:o?`${o}${c}`:void 0,min:`${a}${c}`,signed:n,size:r,value:`${e}${c}`})}const i=`0x${(n&&s<0?(1n<<BigInt(r*8))+BigInt(s):s).toString(16)}`;return r?mn(i,{size:r}):i}const pl=new TextEncoder;function ln(e,t={}){const n=pl.encode(e);return se(n,t)}const hl=new TextEncoder;function gn(e,t={}){return typeof e=="number"||typeof e=="bigint"?yl(e,t):typeof e=="boolean"?bl(e,t):qe(e)?Ve(e,t):Ft(e,t)}function bl(e,t={}){const n=new Uint8Array(1);return n[0]=Number(e),typeof t.size=="number"?(Ye(n,{size:t.size}),mn(n,{size:t.size})):n}const at={zero:48,nine:57,A:65,F:70,a:97,f:102};function ii(e){if(e>=at.zero&&e<=at.nine)return e-at.zero;if(e>=at.A&&e<=at.F)return e-(at.A-10);if(e>=at.a&&e<=at.f)return e-(at.a-10)}function Ve(e,t={}){let n=e;t.size&&(Ye(n,{size:t.size}),n=mn(n,{dir:"right",size:t.size}));let r=n.slice(2);r.length%2&&(r=`0${r}`);const s=r.length/2,o=new Uint8Array(s);for(let a=0,i=0;a<s;a++){const c=ii(r.charCodeAt(i++)),u=ii(r.charCodeAt(i++));if(c===void 0||u===void 0)throw new $(`Invalid byte sequence ("${r[i-2]}${r[i-1]}" in "${r}").`);o[a]=c*16+u}return o}function yl(e,t){const n=N(e,t);return Ve(n)}function Ft(e,t={}){const n=hl.encode(e);return typeof t.size=="number"?(Ye(n,{size:t.size}),mn(n,{dir:"right",size:t.size})):n}const Sr=BigInt(2**32-1),ci=BigInt(32);function ml(e,t=!1){return t?{h:Number(e&Sr),l:Number(e>>ci&Sr)}:{h:Number(e>>ci&Sr)|0,l:Number(e&Sr)|0}}function gl(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:a,l:i}=ml(e[o],t);[r[o],s[o]]=[a,i]}return[r,s]}const wl=(e,t,n)=>e<<n|t>>>32-n,vl=(e,t,n)=>t<<n|e>>>32-n,xl=(e,t,n)=>t<<n-32|e>>>64-n,El=(e,t,n)=>e<<n-32|t>>>64-n;function Al(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function ui(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Mn(e,...t){if(!Al(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ur(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function _c(e,t){Mn(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Pl(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function Rn(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Fs(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Je(e,t){return e<<32-t|e>>>t}const Tl=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function $l(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function Il(e){for(let t=0;t<e.length;t++)e[t]=$l(e[t]);return e}const di=Tl?e=>e:Il;function Sl(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Qo(e){return typeof e=="string"&&(e=Sl(e)),Mn(e),e}let Mc=class{};function Rc(e){const t=r=>e().update(Qo(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const Bl=BigInt(0),In=BigInt(1),Cl=BigInt(2),kl=BigInt(7),Nl=BigInt(256),Ol=BigInt(113),Fc=[],zc=[],Lc=[];for(let e=0,t=In,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Fc.push(2*(5*r+n)),zc.push((e+1)*(e+2)/2%64);let s=Bl;for(let o=0;o<7;o++)t=(t<<In^(t>>kl)*Ol)%Nl,t&Cl&&(s^=In<<(In<<BigInt(o))-In);Lc.push(s)}const Uc=gl(Lc,!0),_l=Uc[0],Ml=Uc[1],fi=(e,t,n)=>n>32?xl(e,t,n):wl(e,t,n),li=(e,t,n)=>n>32?El(e,t,n):vl(e,t,n);function Rl(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(let a=0;a<10;a+=2){const i=(a+8)%10,c=(a+2)%10,u=n[c],d=n[c+1],f=fi(u,d,1)^n[i],l=li(u,d,1)^n[i+1];for(let p=0;p<50;p+=10)e[a+p]^=f,e[a+p+1]^=l}let s=e[2],o=e[3];for(let a=0;a<24;a++){const i=zc[a],c=fi(s,o,i),u=li(s,o,i),d=Fc[a];s=e[d],o=e[d+1],e[d]=c,e[d+1]=u}for(let a=0;a<50;a+=10){for(let i=0;i<10;i++)n[i]=e[a+i];for(let i=0;i<10;i++)e[a+i]^=~n[(i+2)%10]&n[(i+4)%10]}e[0]^=_l[r],e[1]^=Ml[r]}Rn(n)}let Fl=class Dc extends Mc{constructor(t,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,ui(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Pl(this.state)}clone(){return this._cloneInto()}keccak(){di(this.state32),Rl(this.state32,this.rounds),di(this.state32),this.posOut=0,this.pos=0}update(t){Ur(this),t=Qo(t),Mn(t);const{blockLen:n,state:r}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);for(let i=0;i<a;i++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Ur(this,!1),Mn(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return ui(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(_c(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Rn(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:a}=this;return t||(t=new Dc(n,r,s,a,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}};const zl=(e,t,n)=>Rc(()=>new Fl(t,e,n)),Ll=zl(1,136,256/8);function le(e,t){const n=t||"hex",r=Ll(qe(e,{strict:!1})?gn(e):e);return n==="bytes"?r:Q(r)}const Ul=e=>le(gn(e));function Dl(e){return Ul(e)}function Gl(e){let t=!0,n="",r=0,s="",o=!1;for(let a=0;a<e.length;a++){const i=e[a];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function",""].includes(s))s="";else if(s+=i,i===")"){o=!0;break}continue}if(i===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=i,n+=i}}if(!o)throw new $("Unable to normalize signature.");return s}const jl=e=>{const t=typeof e=="string"?e:zr(e);return Gl(t)};function Gc(e){return Dl(jl(e))}const ts=Gc;let we=class extends ${constructor({address:t}){super(`Address "${t}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}},wn=class extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}};const zs=new wn(8192);function ur(e,t){if(zs.has(`${e}.${t}`))return zs.get(`${e}.${t}`);const n=e.substring(2).toLowerCase(),r=le(Ft(n),"bytes"),s=n.split("");for(let a=0;a<40;a+=2)r[a>>1]>>4>=8&&s[a]&&(s[a]=s[a].toUpperCase()),(r[a>>1]&15)>=8&&s[a+1]&&(s[a+1]=s[a+1].toUpperCase());const o=`0x${s.join("")}`;return zs.set(`${e}.${t}`,o),o}function ea(e,t){if(!ue(e,{strict:!1}))throw new we({address:e});return ur(e,t)}const Hl=/^0x[a-fA-F0-9]{40}$/,Ls=new wn(8192);function ue(e,t){const{strict:n=!0}=t??{},r=`${e}.${n}`;if(Ls.has(r))return Ls.get(r);const s=Hl.test(e)?e.toLowerCase()===e?!0:n?ur(e)===e:!0:!1;return Ls.set(r,s),s}function Ue(e){return typeof e[0]=="string"?rt(e):ql(e)}function ql(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function rt(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function Dt(e,t,n,{strict:r}={}){return qe(e,{strict:!1})?go(e,t,n,{strict:r}):qc(e,t,n,{strict:r})}function jc(e,t){if(typeof t=="number"&&t>0&&t>J(e)-1)throw new Cc({offset:t,position:"start",size:J(e)})}function Hc(e,t,n){if(typeof t=="number"&&typeof n=="number"&&J(e)!==n-t)throw new Cc({offset:n,position:"end",size:J(e)})}function qc(e,t,n,{strict:r}={}){jc(e,t);const s=e.slice(t,n);return r&&Hc(s,t,n),s}function go(e,t,n,{strict:r}={}){jc(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&Hc(s,t,n),s}const Vl=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,Vc=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/;function Ne(e,t){if(e.length!==t.length)throw new Yf({expectedLength:e.length,givenLength:t.length});const n=Wl({params:e,values:t}),r=na(n);return r.length===0?"0x":r}function Wl({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(ta({param:e[r],value:t[r]}));return n}function ta({param:e,value:t}){const n=ra(e.type);if(n){const[r,s]=n;return Zl(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return ep(t,{param:e});if(e.type==="address")return Kl(t);if(e.type==="bool")return Jl(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int"),[,,s="256"]=Vc.exec(e.type)??[];return Xl(t,{signed:r,size:Number(s)})}if(e.type.startsWith("bytes"))return Yl(t,{param:e});if(e.type==="string")return Ql(t);throw new rl(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function na(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:i}=e[o];a?t+=32:t+=J(i)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:i}=e[o];a?(n.push(N(t+s,{size:32})),r.push(i),s+=J(i)):n.push(i)}return Ue([...n,...r])}function Kl(e){if(!ue(e))throw new we({address:e});return{dynamic:!1,encoded:$t(e.toLowerCase())}}function Zl(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Bc(e);if(!r&&e.length!==t)throw new Kf({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const o=[];for(let a=0;a<e.length;a++){const i=ta({param:n,value:e[a]});i.dynamic&&(s=!0),o.push(i)}if(r||s){const a=na(o);if(r){const i=N(o.length,{size:32});return{dynamic:!0,encoded:o.length>0?Ue([i,a]):i}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:Ue(o.map(({encoded:a})=>a))}}function Yl(e,{param:t}){const[,n]=t.type.split("bytes"),r=J(e);if(!n){let s=e;return r%32!==0&&(s=$t(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:Ue([$t(N(r,{size:32})),s])}}if(r!==Number.parseInt(n,10))throw new Zf({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:$t(e,{dir:"right"})}}function Jl(e){if(typeof e!="boolean")throw new $(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:$t(Oc(e))}}function Xl(e,{signed:t,size:n=256}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Nc({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:N(e,{size:32,signed:t})}}function Ql(e){const t=ln(e),n=Math.ceil(J(t)/32),r=[];for(let s=0;s<n;s++)r.push($t(Dt(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:Ue([$t(N(J(t),{size:32})),...r])}}function ep(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const o=t.components[s],a=Array.isArray(e)?s:o.name,i=ta({param:o,value:e[a]});r.push(i),i.dynamic&&(n=!0)}return{dynamic:n,encoded:n?na(r):Ue(r.map(({encoded:s})=>s))}}function ra(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const dr=e=>Dt(Gc(e),0,4);function Zt(e){const{abi:t,args:n=[],name:r}=e,s=qe(r,{strict:!1}),o=t.filter(i=>s?i.type==="function"?dr(i)===r:i.type==="event"?ts(i)===r:!1:"name"in i&&i.name===r);if(o.length===0)return;if(o.length===1)return o[0];let a;for(const i of o){if(!("inputs"in i))continue;if(!n||n.length===0){if(!i.inputs||i.inputs.length===0)return i;continue}if(!i.inputs||i.inputs.length===0||i.inputs.length!==n.length)continue;if(n.every((u,d)=>{const f="inputs"in i&&i.inputs[d];return f?wo(u,f):!1})){if(a&&"inputs"in a&&a.inputs){const u=Wc(i.inputs,a.inputs,n);if(u)throw new tl({abiItem:i,type:u[0]},{abiItem:a,type:u[1]})}a=i}}return a||o[0]}function wo(e,t){const n=typeof e,r=t.type;switch(r){case"address":return ue(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>n==="object"&&wo(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>wo(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Wc(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return Wc(s.components,o.components,n[r]);const a=[s.type,o.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?ue(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?ue(n[r],{strict:!1}):!1)return a}}const pi="/docs/contract/encodeEventTopics";function fr(e){const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const c=Zt({abi:t,name:n});if(!c)throw new oi(n,{docsPath:pi});s=c}if(s.type!=="event")throw new oi(void 0,{docsPath:pi});const o=He(s),a=ts(o);let i=[];if(r&&"inputs"in s){const c=s.inputs?.filter(d=>"indexed"in d&&d.indexed),u=Array.isArray(r)?r:Object.values(r).length>0?c?.map(d=>r[d.name])??[]:[];u.length>0&&(i=c?.map((d,f)=>Array.isArray(u[f])?u[f].map((l,p)=>hi({param:d,value:u[f][p]})):typeof u[f]<"u"&&u[f]!==null?hi({param:d,value:u[f]}):null)??[])}return[a,...i]}function hi({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return le(gn(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new al(e.type);return Ne([e],[t])}function ns(e,{method:t}){const n={};return e.transport.type==="fallback"&&e.transport.onResponse?.(({method:r,response:s,status:o,transport:a})=>{o==="success"&&t===r&&(n[s]=a.request)}),(r=>n[r]||e.request)}async function Kc(e,t){const{address:n,abi:r,args:s,eventName:o,fromBlock:a,strict:i,toBlock:c}=t,u=ns(e,{method:"eth_newFilter"}),d=o?fr({abi:r,args:s,eventName:o}):void 0,f=await e.request({method:"eth_newFilter",params:[{address:n,fromBlock:typeof a=="bigint"?N(a):a,toBlock:typeof c=="bigint"?N(c):c,topics:d}]});return{abi:r,args:s,eventName:o,id:f,request:u(f),strict:!!i,type:"event"}}function Y(e){return typeof e=="string"?{address:e,type:"json-rpc"}:e}const bi="/docs/contract/encodeFunctionData";function tp(e){const{abi:t,args:n,functionName:r}=e;let s=t[0];if(r){const o=Zt({abi:t,args:n,name:r});if(!o)throw new fn(r,{docsPath:bi});s=o}if(s.type!=="function")throw new fn(void 0,{docsPath:bi});return{abi:[s],functionName:dr(He(s))}}function pe(e){const{args:t}=e,{abi:n,functionName:r}=e.abi.length===1&&e.functionName?.startsWith("0x")?e:tp(e),s=n[0],o=r,a="inputs"in s&&s.inputs?Ne(s.inputs,t??[]):void 0;return rt([o,a??"0x"])}const np={1:"An `assert` condition failed.",17:"Arithmetic operation resulted in underflow or overflow.",18:"Division or modulo by zero (e.g. `5 / 0` or `23 % 0`).",33:"Attempted to convert to an invalid type.",34:"Attempted to access a storage byte array that is incorrectly encoded.",49:"Performed `.pop()` on an empty array",50:"Array index is out of bounds.",65:"Allocated too much memory or created an array which is too large.",81:"Attempted to call a zero-initialized variable of internal function type."},Zc={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},rp={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};let yi=class extends ${constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}},Yc=class extends ${constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}},sp=class extends ${constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}};const op={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new sp({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new Yc({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new yi({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new yi({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function sa(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(op);return n.bytes=e,n.dataView=new DataView(e.buffer??e,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function ap(e,t={}){typeof t.size<"u"&&Ye(e,{size:t.size});const n=se(e,t);return ke(n,t)}function ip(e,t={}){let n=e;if(typeof t.size<"u"&&(Ye(n,{size:t.size}),n=ze(n)),n.length>1||n[0]>1)throw new cl(n);return!!n[0]}function pt(e,t={}){typeof t.size<"u"&&Ye(e,{size:t.size});const n=se(e,t);return Le(n,t)}function cp(e,t={}){let n=e;return typeof t.size<"u"&&(Ye(n,{size:t.size}),n=ze(n,{dir:"right"})),new TextDecoder().decode(n)}function lr(e,t){const n=typeof t=="string"?Ve(t):t,r=sa(n);if(J(n)===0&&e.length>0)throw new cr;if(J(t)&&J(t)<32)throw new $c({data:typeof t=="string"?t:se(t),params:e,size:J(t)});let s=0;const o=[];for(let a=0;a<e.length;++a){const i=e[a];r.setPosition(s);const[c,u]=an(r,i,{staticPosition:0});s+=u,o.push(c)}return o}function an(e,t,{staticPosition:n}){const r=ra(t.type);if(r){const[s,o]=r;return dp(e,{...t,type:o},{length:s,staticPosition:n})}if(t.type==="tuple")return hp(e,t,{staticPosition:n});if(t.type==="address")return up(e);if(t.type==="bool")return fp(e);if(t.type.startsWith("bytes"))return lp(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return pp(e,t);if(t.type==="string")return bp(e,{staticPosition:n});throw new sl(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const mi=32,vo=32;function up(e){const t=e.readBytes(32);return[ur(se(qc(t,-20))),32]}function dp(e,t,{length:n,staticPosition:r}){if(!n){const a=pt(e.readBytes(vo)),i=r+a,c=i+mi;e.setPosition(i);const u=pt(e.readBytes(mi)),d=Fn(t);let f=0;const l=[];for(let p=0;p<u;++p){e.setPosition(c+(d?p*32:f));const[h,y]=an(e,t,{staticPosition:c});f+=y,l.push(h)}return e.setPosition(r+32),[l,32]}if(Fn(t)){const a=pt(e.readBytes(vo)),i=r+a,c=[];for(let u=0;u<n;++u){e.setPosition(i+u*32);const[d]=an(e,t,{staticPosition:i});c.push(d)}return e.setPosition(r+32),[c,32]}let s=0;const o=[];for(let a=0;a<n;++a){const[i,c]=an(e,t,{staticPosition:r+s});s+=c,o.push(i)}return[o,s]}function fp(e){return[ip(e.readBytes(32),{size:32}),32]}function lp(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const a=pt(e.readBytes(32));e.setPosition(n+a);const i=pt(e.readBytes(32));if(i===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(i);return e.setPosition(n+32),[se(c),32]}return[se(e.readBytes(Number.parseInt(s,10),32)),32]}function pp(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?ap(s,{signed:n}):pt(s,{signed:n}),32]}function hp(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:a})=>!a),s=r?[]:{};let o=0;if(Fn(t)){const a=pt(e.readBytes(vo)),i=n+a;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(i+o);const[d,f]=an(e,u,{staticPosition:i});o+=f,s[r?c:u?.name]=d}return e.setPosition(n+32),[s,32]}for(let a=0;a<t.components.length;++a){const i=t.components[a],[c,u]=an(e,i,{staticPosition:n});s[r?a:i?.name]=c,o+=u}return[s,o]}function bp(e,{staticPosition:t}){const n=pt(e.readBytes(32)),r=t+n;e.setPosition(r);const s=pt(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),a=cp(ze(o));return e.setPosition(t+32),[a,32]}function Fn(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(Fn);const n=ra(e.type);return!!(n&&Fn({...e,type:n[1]}))}function yp(e){const{abi:t,data:n}=e,r=Dt(n,0,4);if(r==="0x")throw new cr;const o=[...t||[],Zc,rp].find(a=>a.type==="error"&&r===dr(He(a)));if(!o)throw new Ic(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:o,args:"inputs"in o&&o.inputs&&o.inputs.length>0?lr(o.inputs,Dt(n,4)):void 0,errorName:o.name}}const ce=(e,t,n)=>JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString():s,n);function Jc({abiItem:e,args:t,includeFunctionName:n=!0,includeName:r=!1}){if("name"in e&&"inputs"in e&&e.inputs)return`${n?e.name:""}(${e.inputs.map((s,o)=>`${r&&s.name?`${s.name}: `:""}${typeof t[o]=="object"?ce(t[o]):t[o]}`).join(", ")})`}const Xc={gwei:9,wei:18},mp={ether:-9,wei:9};function Qc(e,t){let n=e.toString();const r=n.startsWith("-");r&&(n=n.slice(1)),n=n.padStart(t,"0");let[s,o]=[n.slice(0,n.length-t),n.slice(n.length-t)];return o=o.replace(/(0+)$/,""),`${r?"-":""}${s||"0"}${o?`.${o}`:""}`}function zt(e,t="wei"){return Qc(e,Xc[t])}function Ae(e,t="wei"){return Qc(e,mp[t])}class gp extends ${constructor({address:t}){super(`State for account "${t}" is set multiple times.`,{name:"AccountStateConflictError"})}}class wp extends ${constructor(){super("state and stateDiff are set on the same account.",{name:"StateAssignmentConflictError"})}}function gi(e){return e.reduce((t,{slot:n,value:r})=>`${t}        ${n}: ${r}
`,"")}function vp(e){return e.reduce((t,{address:n,...r})=>{let s=`${t}    ${n}:
`;return r.nonce&&(s+=`      nonce: ${r.nonce}
`),r.balance&&(s+=`      balance: ${r.balance}
`),r.code&&(s+=`      code: ${r.code}
`),r.state&&(s+=`      state:
`,s+=gi(r.state)),r.stateDiff&&(s+=`      stateDiff:
`,s+=gi(r.stateDiff)),s},`  State Override:
`).slice(0,-1)}function pr(e){const t=Object.entries(e).map(([r,s])=>s===void 0||s===!1?null:[r,s]).filter(Boolean),n=t.reduce((r,[s])=>Math.max(r,s.length),0);return t.map(([r,s])=>`  ${`${r}:`.padEnd(n+1)}  ${s}`).join(`
`)}class xp extends ${constructor({v:t}){super(`Invalid \`v\` value "${t}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class Ep extends ${constructor({transaction:t}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",pr(t),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class Ap extends ${constructor({storageKey:t}){super(`Size for storage key "${t}" is invalid. Expected 32 bytes. Got ${Math.floor((t.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class Pp extends ${constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:a,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,to:f,value:l}){const p=pr({chain:s&&`${s?.name} (id: ${s?.id})`,from:n?.address,to:f,value:typeof l<"u"&&`${zt(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:a,gasPrice:typeof i<"u"&&`${Ae(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ae(u)} gwei`,nonce:d});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class eu extends ${constructor({blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o}){let a="Transaction";r&&o!==void 0&&(a=`Transaction at block time "${r}" at index "${o}"`),t&&o!==void 0&&(a=`Transaction at block hash "${t}" at index "${o}"`),n&&o!==void 0&&(a=`Transaction at block number "${n}" at index "${o}"`),s&&(a=`Transaction with hash "${s}"`),super(`${a} could not be found.`,{name:"TransactionNotFoundError"})}}class tu extends ${constructor({hash:t}){super(`Transaction receipt with hash "${t}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class nu extends ${constructor({receipt:t}){super(`Transaction with hash "${t.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=t}}class Tp extends ${constructor({hash:t}){super(`Timed out while waiting for transaction with hash "${t}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const $p=e=>e,oa=e=>e;class ru extends ${constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:a,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,to:f,value:l,stateOverride:p}){const h=n?Y(n):void 0;let y=pr({from:h?.address,to:f,value:typeof l<"u"&&`${zt(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:a,gasPrice:typeof i<"u"&&`${Ae(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ae(u)} gwei`,nonce:d});p&&(y+=`
${vp(p)}`),super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Raw Call Arguments:",y].filter(Boolean),name:"CallExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class su extends ${constructor(t,{abi:n,args:r,contractAddress:s,docsPath:o,functionName:a,sender:i}){const c=Zt({abi:n,args:r,name:a}),u=c?Jc({abiItem:c,args:r,includeFunctionName:!1,includeName:!1}):void 0,d=c?He(c,{includeName:!0}):void 0,f=pr({address:s&&$p(s),function:d,args:u&&u!=="()"&&`${[...Array(a?.length??0).keys()].map(()=>" ").join("")}${u}`,sender:i});super(t.shortMessage||`An unknown error occurred while executing the contract function "${a}".`,{cause:t,docsPath:o,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],f&&"Contract Call:",f].filter(Boolean),name:"ContractFunctionExecutionError"}),Object.defineProperty(this,"abi",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"args",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"formattedArgs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"functionName",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sender",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.abi=n,this.args=r,this.cause=t,this.contractAddress=s,this.functionName=a,this.sender=i}}class xo extends ${constructor({abi:t,data:n,functionName:r,message:s}){let o,a,i,c;if(n&&n!=="0x")try{a=yp({abi:t,data:n});const{abiItem:d,errorName:f,args:l}=a;if(f==="Error")c=l[0];else if(f==="Panic"){const[p]=l;c=np[p]}else{const p=d?He(d,{includeName:!0}):void 0,h=d&&l?Jc({abiItem:d,args:l,includeFunctionName:!1,includeName:!1}):void 0;i=[p?`Error: ${p}`:"",h&&h!=="()"?`       ${[...Array(f?.length??0).keys()].map(()=>" ").join("")}${h}`:""]}}catch(d){o=d}else s&&(c=s);let u;o instanceof Ic&&(u=o.signature,i=[`Unable to decode signature "${u}" as it was not found on the provided ABI.`,"Make sure you are using the correct ABI and that the error exists on it.",`You can look up the decoded signature here: https://openchain.xyz/signatures?query=${u}.`]),super(c&&c!=="execution reverted"||u?[`The contract function "${r}" reverted with the following ${u?"signature":"reason"}:`,c||u].join(`
`):`The contract function "${r}" reverted.`,{cause:o,metaMessages:i,name:"ContractFunctionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"raw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"reason",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"signature",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=a,this.raw=n,this.reason=c,this.signature=u}}class Ip extends ${constructor({functionName:t}){super(`The contract function "${t}" returned no data ("0x").`,{metaMessages:["This could be due to any of the following:",`  - The contract does not have the function "${t}",`,"  - The parameters passed to the contract function may be invalid, or","  - The address is not a contract."],name:"ContractFunctionZeroDataError"})}}class Sp extends ${constructor({factory:t}){super(`Deployment for counterfactual contract call failed${t?` for factory "${t}".`:""}`,{metaMessages:["Please ensure:","- The `factory` is a valid contract deployment factory (ie. Create2 Factory, ERC-4337 Factory, etc).","- The `factoryData` is a valid encoded function call for contract deployment function on the factory."],name:"CounterfactualDeploymentFailedError"})}}class rs extends ${constructor({data:t,message:n}){super(n||"",{name:"RawContractError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:3}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t}}class On extends ${constructor({body:t,cause:n,details:r,headers:s,status:o,url:a}){super("HTTP request failed.",{cause:n,details:r,metaMessages:[o&&`Status: ${o}`,`URL: ${oa(a)}`,t&&`Request body: ${ce(t)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=t,this.headers=s,this.status=o,this.url=a}}class aa extends ${constructor({body:t,error:n,url:r}){super("RPC Request failed.",{cause:n,details:n.message,metaMessages:[`URL: ${oa(r)}`,`Request body: ${ce(t)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=n.code,this.data=n.data,this.url=r}}class wi extends ${constructor({body:t,url:n}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${oa(n)}`,`Request body: ${ce(t)}`],name:"TimeoutError"}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.url=n}}const Bp=-1;class Te extends ${constructor(t,{code:n,docsPath:r,metaMessages:s,name:o,shortMessage:a}){super(a,{cause:t,docsPath:r,metaMessages:s||t?.metaMessages,name:o||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=o||t.name,this.code=t instanceof aa?t.code:n??Bp}}class _e extends Te{constructor(t,n){super(t,n),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n.data}}class zn extends Te{constructor(t){super(t,{code:zn.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class Ln extends Te{constructor(t){super(t,{code:Ln.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(Ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class Un extends Te{constructor(t,{method:n}={}){super(t,{code:Un.code,name:"MethodNotFoundRpcError",shortMessage:`The method${n?` "${n}"`:""} does not exist / is not available.`})}}Object.defineProperty(Un,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class Dn extends Te{constructor(t){super(t,{code:Dn.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(Dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Gt extends Te{constructor(t){super(t,{code:Gt.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(Gt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class St extends Te{constructor(t){super(t,{code:St.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(St,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class Gn extends Te{constructor(t){super(t,{code:Gn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(Gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class jn extends Te{constructor(t){super(t,{code:jn.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class Hn extends Te{constructor(t){super(t,{code:Hn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(Hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Mt extends Te{constructor(t,{method:n}={}){super(t,{code:Mt.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${n?` "${n}"`:""} is not supported.`})}}Object.defineProperty(Mt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class pn extends Te{constructor(t){super(t,{code:pn.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class qn extends Te{constructor(t){super(t,{code:qn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class cn extends _e{constructor(t){super(t,{code:cn.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class Vn extends _e{constructor(t){super(t,{code:Vn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(Vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class Wn extends _e{constructor(t,{method:n}={}){super(t,{code:Wn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${n?` " ${n}"`:""}.`})}}Object.defineProperty(Wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class Kn extends _e{constructor(t){super(t,{code:Kn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(Kn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class Zn extends _e{constructor(t){super(t,{code:Zn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(Zn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Yn extends _e{constructor(t){super(t,{code:Yn.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class hn extends _e{constructor(t){super(t,{code:hn.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class Jn extends _e{constructor(t){super(t,{code:Jn.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(Jn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class Xn extends _e{constructor(t){super(t,{code:Xn.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(Xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class Qn extends _e{constructor(t){super(t,{code:Qn.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(Qn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class er extends _e{constructor(t){super(t,{code:er.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(er,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class tr extends _e{constructor(t){super(t,{code:tr.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(tr,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class bn extends _e{constructor(t){super(t,{code:bn.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class Cp extends Te{constructor(t){super(t,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}const kp=3;function jt(e,{abi:t,address:n,args:r,docsPath:s,functionName:o,sender:a}){const i=e instanceof rs?e:e instanceof $?e.walk(h=>"data"in h)||e.walk():{},{code:c,data:u,details:d,message:f,shortMessage:l}=i,p=e instanceof cr?new Ip({functionName:o}):[kp,Gt.code].includes(c)&&(u||d||f||l)||c===St.code&&d==="execution reverted"&&u?new xo({abi:t,data:typeof u=="object"?u.data:u,functionName:o,message:i instanceof aa?d:l??f}):e;return new su(p,{abi:t,args:r,contractAddress:n,docsPath:s,functionName:o,sender:a})}function ou(e){const t=le(`0x${e.substring(4)}`).substring(26);return ur(`0x${t}`)}async function Np({hash:e,signature:t}){const n=qe(e)?e:Q(e),{secp256k1:r}=await uc(async()=>{const{secp256k1:a}=await Promise.resolve().then(()=>Yy);return{secp256k1:a}},void 0,import.meta.url);return`0x${(()=>{if(typeof t=="object"&&"r"in t&&"s"in t){const{r:u,s:d,v:f,yParity:l}=t,p=Number(l??f),h=vi(p);return new r.Signature(ke(u),ke(d)).addRecoveryBit(h)}const a=qe(t)?t:Q(t);if(J(a)!==65)throw new Error("invalid signature length");const i=Le(`0x${a.slice(130)}`),c=vi(i);return r.Signature.fromCompact(a.substring(2,130)).addRecoveryBit(c)})().recoverPublicKey(n.substring(2)).toHex(!1)}`}function vi(e){if(e===0||e===1)return e;if(e===27)return 0;if(e===28)return 1;throw new Error("Invalid yParityOrV value")}async function au({hash:e,signature:t}){return ou(await Np({hash:e,signature:t}))}function Ht(e,t="hex"){const n=iu(e),r=sa(new Uint8Array(n.length));return n.encode(r),t==="hex"?se(r.bytes):r.bytes}function iu(e){return Array.isArray(e)?Op(e.map(t=>iu(t))):_p(e)}function Op(e){const t=e.reduce((s,o)=>s+o.length,0),n=cu(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:o}of e)o(s)}}}function _p(e){const t=typeof e=="string"?Ve(e):e,n=cu(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function cu(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new $("Length is too large.")}function uu(e){const{chainId:t,nonce:n,to:r}=e,s=e.contractAddress??e.address,o=le(rt(["0x05",Ht([t?N(t):"0x",s,n?N(n):"0x"])]));return r==="bytes"?Ve(o):o}async function ss(e){const{authorization:t,signature:n}=e;return au({hash:uu(t),signature:n??t})}class Mp extends ${constructor(t,{account:n,docsPath:r,chain:s,data:o,gas:a,gasPrice:i,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,to:f,value:l}){const p=pr({from:n?.address,to:f,value:typeof l<"u"&&`${zt(l)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:o,gas:a,gasPrice:typeof i<"u"&&`${Ae(i)} gwei`,maxFeePerGas:typeof c<"u"&&`${Ae(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Ae(u)} gwei`,nonce:d});super(t.shortMessage,{cause:t,docsPath:r,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Estimate Gas Arguments:",p].filter(Boolean),name:"EstimateGasExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class rn extends ${constructor({cause:t,message:n}={}){const r=n?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${r?`with reason: ${r}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"})}}Object.defineProperty(rn,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(rn,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted|gas required exceeds allowance/});class qt extends ${constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Ae(n)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:t,name:"FeeCapTooHighError"})}}Object.defineProperty(qt,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class Eo extends ${constructor({cause:t,maxFeePerGas:n}={}){super(`The fee cap (\`maxFeePerGas\`${n?` = ${Ae(n)}`:""} gwei) cannot be lower than the block base fee.`,{cause:t,name:"FeeCapTooLowError"})}}Object.defineProperty(Eo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class Ao extends ${constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}is higher than the next one expected.`,{cause:t,name:"NonceTooHighError"})}}Object.defineProperty(Ao,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class Po extends ${constructor({cause:t,nonce:n}={}){super([`Nonce provided for the transaction ${n?`(${n}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:t,name:"NonceTooLowError"})}}Object.defineProperty(Po,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class To extends ${constructor({cause:t,nonce:n}={}){super(`Nonce provided for the transaction ${n?`(${n}) `:""}exceeds the maximum allowed nonce.`,{cause:t,name:"NonceMaxValueError"})}}Object.defineProperty(To,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class $o extends ${constructor({cause:t}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:t,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty($o,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class Io extends ${constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:t,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(Io,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class So extends ${constructor({cause:t,gas:n}={}){super(`The amount of gas ${n?`(${n}) `:""}provided for the transaction is too low.`,{cause:t,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(So,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class Bo extends ${constructor({cause:t}){super("The transaction type is not supported for this chain.",{cause:t,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(Bo,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class nr extends ${constructor({cause:t,maxPriorityFeePerGas:n,maxFeePerGas:r}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${n?` = ${Ae(n)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${r?` = ${Ae(r)} gwei`:""}).`].join(`
`),{cause:t,name:"TipAboveFeeCapError"})}}Object.defineProperty(nr,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class hr extends ${constructor({cause:t}){super(`An error occurred while executing: ${t?.shortMessage}`,{cause:t,name:"UnknownNodeError"})}}function os(e,t){const n=(e.details||"").toLowerCase(),r=e instanceof $?e.walk(s=>s?.code===rn.code):e;return r instanceof $?new rn({cause:e,message:r.details}):rn.nodeMessage.test(n)?new rn({cause:e,message:e.details}):qt.nodeMessage.test(n)?new qt({cause:e,maxFeePerGas:t?.maxFeePerGas}):Eo.nodeMessage.test(n)?new Eo({cause:e,maxFeePerGas:t?.maxFeePerGas}):Ao.nodeMessage.test(n)?new Ao({cause:e,nonce:t?.nonce}):Po.nodeMessage.test(n)?new Po({cause:e,nonce:t?.nonce}):To.nodeMessage.test(n)?new To({cause:e,nonce:t?.nonce}):$o.nodeMessage.test(n)?new $o({cause:e}):Io.nodeMessage.test(n)?new Io({cause:e,gas:t?.gas}):So.nodeMessage.test(n)?new So({cause:e,gas:t?.gas}):Bo.nodeMessage.test(n)?new Bo({cause:e}):nr.nodeMessage.test(n)?new nr({cause:e,maxFeePerGas:t?.maxFeePerGas,maxPriorityFeePerGas:t?.maxPriorityFeePerGas}):new hr({cause:e})}function Rp(e,{docsPath:t,...n}){const r=(()=>{const s=os(e,n);return s instanceof hr?e:s})();return new Mp(r,{docsPath:t,...n})}function vn(e,{format:t}){if(!t)return{};const n={};function r(o){const a=Object.keys(o);for(const i of a)i in e&&(n[i]=e[i]),o[i]&&typeof o[i]=="object"&&!Array.isArray(o[i])&&r(o[i])}const s=t(e||{});return r(s),n}const Fp={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Bt(e,t){const n={};return typeof e.authorizationList<"u"&&(n.authorizationList=zp(e.authorizationList)),typeof e.accessList<"u"&&(n.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(n.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?n.blobs=e.blobs.map(r=>se(r)):n.blobs=e.blobs),typeof e.data<"u"&&(n.data=e.data),e.account&&(n.from=e.account.address),typeof e.from<"u"&&(n.from=e.from),typeof e.gas<"u"&&(n.gas=N(e.gas)),typeof e.gasPrice<"u"&&(n.gasPrice=N(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(n.maxFeePerBlobGas=N(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(n.maxFeePerGas=N(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(n.maxPriorityFeePerGas=N(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(n.nonce=N(e.nonce)),typeof e.to<"u"&&(n.to=e.to),typeof e.type<"u"&&(n.type=Fp[e.type]),typeof e.value<"u"&&(n.value=N(e.value)),n}function zp(e){return e.map(t=>({address:t.address,r:t.r?N(BigInt(t.r)):t.r,s:t.s?N(BigInt(t.s)):t.s,chainId:N(t.chainId),nonce:N(t.nonce),...typeof t.yParity<"u"?{yParity:N(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:N(t.v)}:{}}))}function xi(e){if(!(!e||e.length===0))return e.reduce((t,{slot:n,value:r})=>{if(n.length!==66)throw new ai({size:n.length,targetSize:66,type:"hex"});if(r.length!==66)throw new ai({size:r.length,targetSize:66,type:"hex"});return t[n]=r,t},{})}function Lp(e){const{balance:t,nonce:n,state:r,stateDiff:s,code:o}=e,a={};if(o!==void 0&&(a.code=o),t!==void 0&&(a.balance=N(t)),n!==void 0&&(a.nonce=N(n)),r!==void 0&&(a.state=xi(r)),s!==void 0){if(a.state)throw new wp;a.stateDiff=xi(s)}return a}function ia(e){if(!e)return;const t={};for(const{address:n,...r}of e){if(!ue(n,{strict:!1}))throw new we({address:n});if(t[n])throw new gp({address:n});t[n]=Lp(r)}return t}const as=2n**256n-1n;function wt(e){const{account:t,maxFeePerGas:n,maxPriorityFeePerGas:r,to:s}=e,o=t?Y(t):void 0;if(o&&!ue(o.address))throw new we({address:o.address});if(s&&!ue(s))throw new we({address:s});if(n&&n>as)throw new qt({maxFeePerGas:n});if(r&&n&&r>n)throw new nr({maxFeePerGas:n,maxPriorityFeePerGas:r})}class du extends ${constructor(){super("`baseFeeMultiplier` must be greater than 1.",{name:"BaseFeeScalarError"})}}class ca extends ${constructor(){super("Chain does not support EIP-1559 fees.",{name:"Eip1559FeesNotSupportedError"})}}class Up extends ${constructor({maxPriorityFeePerGas:t}){super(`\`maxFeePerGas\` cannot be less than the \`maxPriorityFeePerGas\` (${Ae(t)} gwei).`,{name:"MaxFeePerGasTooLowError"})}}class fu extends ${constructor({blockHash:t,blockNumber:n}){let r="Block";t&&(r=`Block at hash "${t}"`),n&&(r=`Block at number "${n}"`),super(`${r} could not be found.`,{name:"BlockNotFoundError"})}}const lu={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function ua(e,t){const n={...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,chainId:e.chainId?Le(e.chainId):void 0,gas:e.gas?BigInt(e.gas):void 0,gasPrice:e.gasPrice?BigInt(e.gasPrice):void 0,maxFeePerBlobGas:e.maxFeePerBlobGas?BigInt(e.maxFeePerBlobGas):void 0,maxFeePerGas:e.maxFeePerGas?BigInt(e.maxFeePerGas):void 0,maxPriorityFeePerGas:e.maxPriorityFeePerGas?BigInt(e.maxPriorityFeePerGas):void 0,nonce:e.nonce?Le(e.nonce):void 0,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,type:e.type?lu[e.type]:void 0,typeHex:e.type?e.type:void 0,value:e.value?BigInt(e.value):void 0,v:e.v?BigInt(e.v):void 0};return e.authorizationList&&(n.authorizationList=Dp(e.authorizationList)),n.yParity=(()=>{if(e.yParity)return Number(e.yParity);if(typeof n.v=="bigint"){if(n.v===0n||n.v===27n)return 0;if(n.v===1n||n.v===28n)return 1;if(n.v>=35n)return n.v%2n===0n?1:0}})(),n.type==="legacy"&&(delete n.accessList,delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.yParity),n.type==="eip2930"&&(delete n.maxFeePerBlobGas,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas),n.type==="eip1559"&&delete n.maxFeePerBlobGas,n}function Dp(e){return e.map(t=>({address:t.address,chainId:Number(t.chainId),nonce:Number(t.nonce),r:t.r,s:t.s,yParity:Number(t.yParity)}))}function pu(e,t){const n=(e.transactions??[]).map(r=>typeof r=="string"?r:ua(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:n,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}async function je(e,{blockHash:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",includeTransactions:s}={}){const o=s??!1,a=n!==void 0?N(n):void 0;let i=null;if(t?i=await e.request({method:"eth_getBlockByHash",params:[t,o]},{dedupe:!0}):i=await e.request({method:"eth_getBlockByNumber",params:[a||r,o]},{dedupe:!!a}),!i)throw new fu({blockHash:t,blockNumber:n});return(e.chain?.formatters?.block?.format||pu)(i,"getBlock")}async function da(e){const t=await e.request({method:"eth_gasPrice"});return BigInt(t)}async function Gp(e,t){return hu(e,t)}async function hu(e,t){const{block:n,chain:r=e.chain,request:s}=t||{};try{const o=r?.fees?.maxPriorityFeePerGas??r?.fees?.defaultPriorityFee;if(typeof o=="function"){const i=n||await z(e,je,"getBlock")({}),c=await o({block:i,client:e,request:s});if(c===null)throw new Error;return c}if(typeof o<"u")return o;const a=await e.request({method:"eth_maxPriorityFeePerGas"});return ke(a)}catch{const[o,a]=await Promise.all([n?Promise.resolve(n):z(e,je,"getBlock")({}),z(e,da,"getGasPrice")({})]);if(typeof o.baseFeePerGas!="bigint")throw new ca;const i=a-o.baseFeePerGas;return i<0n?0n:i}}async function jp(e,t){return Co(e,t)}async function Co(e,t){const{block:n,chain:r=e.chain,request:s,type:o="eip1559"}=t||{},a=await(async()=>typeof r?.fees?.baseFeeMultiplier=="function"?r.fees.baseFeeMultiplier({block:n,client:e,request:s}):r?.fees?.baseFeeMultiplier??1.2)();if(a<1)throw new du;const c=10**(a.toString().split(".")[1]?.length??0),u=l=>l*BigInt(Math.ceil(a*c))/BigInt(c),d=n||await z(e,je,"getBlock")({});if(typeof r?.fees?.estimateFeesPerGas=="function"){const l=await r.fees.estimateFeesPerGas({block:n,client:e,multiply:u,request:s,type:o});if(l!==null)return l}if(o==="eip1559"){if(typeof d.baseFeePerGas!="bigint")throw new ca;const l=typeof s?.maxPriorityFeePerGas=="bigint"?s.maxPriorityFeePerGas:await hu(e,{block:d,chain:r,request:s}),p=u(d.baseFeePerGas);return{maxFeePerGas:s?.maxFeePerGas??p+l,maxPriorityFeePerGas:l}}return{gasPrice:s?.gasPrice??u(await z(e,da,"getGasPrice")({}))}}async function fa(e,{address:t,blockTag:n="latest",blockNumber:r}){const s=await e.request({method:"eth_getTransactionCount",params:[t,typeof r=="bigint"?N(r):n]},{dedupe:!!r});return Le(s)}function la(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(o=>Ve(o)):e.blobs,s=[];for(const o of r)s.push(Uint8Array.from(t.blobToKzgCommitment(o)));return n==="bytes"?s:s.map(o=>se(o))}function pa(e){const{kzg:t}=e,n=e.to??(typeof e.blobs[0]=="string"?"hex":"bytes"),r=typeof e.blobs[0]=="string"?e.blobs.map(a=>Ve(a)):e.blobs,s=typeof e.commitments[0]=="string"?e.commitments.map(a=>Ve(a)):e.commitments,o=[];for(let a=0;a<r.length;a++){const i=r[a],c=s[a];o.push(Uint8Array.from(t.computeBlobKzgProof(i,c)))}return n==="bytes"?o:o.map(a=>se(a))}function Hp(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),a=Number(n>>s&o),i=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,i,r)}function qp(e,t,n){return e&t^~e&n}function Vp(e,t,n){return e&t^e&n^t&n}let Wp=class extends Mc{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Fs(this.buffer)}update(t){Ur(this),t=Qo(t),Mn(t);const{view:n,buffer:r,blockLen:s}=this,o=t.length;for(let a=0;a<o;){const i=Math.min(s-this.pos,o-a);if(i===s){const c=Fs(t);for(;s<=o-a;a+=s)this.process(c,a);continue}r.set(t.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ur(this),_c(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;n[a++]=128,Rn(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let f=a;f<s;f++)n[f]=0;Hp(r,s-8,BigInt(this.length*8),o),this.process(r,0);const i=Fs(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)i.setUint32(4*f,d[f],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:a,pos:i}=this;return t.destroyed=a,t.finished=o,t.length=s,t.pos=i,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}};const Et=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Kp=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),At=new Uint32Array(64);let Zp=class extends Wp{constructor(t=32){super(64,t,8,!1),this.A=Et[0]|0,this.B=Et[1]|0,this.C=Et[2]|0,this.D=Et[3]|0,this.E=Et[4]|0,this.F=Et[5]|0,this.G=Et[6]|0,this.H=Et[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:a,G:i,H:c}=this;return[t,n,r,s,o,a,i,c]}set(t,n,r,s,o,a,i,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=a|0,this.G=i|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)At[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const l=At[f-15],p=At[f-2],h=Je(l,7)^Je(l,18)^l>>>3,y=Je(p,17)^Je(p,19)^p>>>10;At[f]=y+At[f-7]+h+At[f-16]|0}let{A:r,B:s,C:o,D:a,E:i,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){const l=Je(i,6)^Je(i,11)^Je(i,25),p=d+l+qp(i,c,u)+Kp[f]+At[f]|0,y=(Je(r,2)^Je(r,13)^Je(r,22))+Vp(r,s,o)|0;d=u,u=c,c=i,i=a+p|0,a=o,o=s,s=r,r=p+y|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,a=a+this.D|0,i=i+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,o,a,i,c,u,d)}roundClean(){Rn(At)}destroy(){this.set(0,0,0,0,0,0,0,0),Rn(this.buffer)}};const Yp=Rc(()=>new Zp),Jp=Yp;function Xp(e,t){return Jp(qe(e,{strict:!1})?gn(e):e)}function Qp(e){const{commitment:t,version:n=1}=e,r=e.to??(typeof t=="string"?"hex":"bytes"),s=Xp(t);return s.set([n],0),r==="bytes"?s:se(s)}function bu(e){const{commitments:t,version:n}=e,r=e.to??(typeof t[0]=="string"?"hex":"bytes"),s=[];for(const o of t)s.push(Qp({commitment:o,to:r,version:n}));return s}const Ei=6,yu=32,ha=4096,mu=yu*ha,Ai=mu*Ei-1-1*ha*Ei,gu=1;class eh extends ${constructor({maxSize:t,size:n}){super("Blob size is too large.",{metaMessages:[`Max: ${t} bytes`,`Given: ${n} bytes`],name:"BlobSizeTooLargeError"})}}class wu extends ${constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class th extends ${constructor({hash:t,size:n}){super(`Versioned hash "${t}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${n}`],name:"InvalidVersionedHashSizeError"})}}class nh extends ${constructor({hash:t,version:n}){super(`Versioned hash "${t}" version is invalid.`,{metaMessages:[`Expected: ${gu}`,`Received: ${n}`],name:"InvalidVersionedHashVersionError"})}}function rh(e){const t=e.to??(typeof e.data=="string"?"hex":"bytes"),n=typeof e.data=="string"?Ve(e.data):e.data,r=J(n);if(!r)throw new wu;if(r>Ai)throw new eh({maxSize:Ai,size:r});const s=[];let o=!0,a=0;for(;o;){const i=sa(new Uint8Array(mu));let c=0;for(;c<ha;){const u=n.slice(a,a+(yu-1));if(i.pushByte(0),i.pushBytes(u),u.length<31){i.pushByte(128),o=!1;break}c++,a+=31}s.push(i)}return t==="bytes"?s.map(i=>i.bytes):s.map(i=>se(i.bytes))}function vu(e){const{data:t,kzg:n,to:r}=e,s=e.blobs??rh({data:t,to:r}),o=e.commitments??la({blobs:s,kzg:n,to:r}),a=e.proofs??pa({blobs:s,commitments:o,kzg:n,to:r}),i=[];for(let c=0;c<s.length;c++)i.push({blob:s[c],commitment:o[c],proof:a[c]});return i}function xu(e){if(e.type)return e.type;if(typeof e.authorizationList<"u")return"eip7702";if(typeof e.blobs<"u"||typeof e.blobVersionedHashes<"u"||typeof e.maxFeePerBlobGas<"u"||typeof e.sidecars<"u")return"eip4844";if(typeof e.maxFeePerGas<"u"||typeof e.maxPriorityFeePerGas<"u")return"eip1559";if(typeof e.gasPrice<"u")return typeof e.accessList<"u"?"eip2930":"legacy";throw new Ep({transaction:e})}function is(e,{docsPath:t,...n}){const r=(()=>{const s=os(e,n);return s instanceof hr?e:s})();return new Pp(r,{docsPath:t,...n})}async function Ct(e){const t=await e.request({method:"eth_chainId"},{dedupe:!0});return Le(t)}async function ba(e,t){const{account:n=e.account,accessList:r,authorizationList:s,chain:o=e.chain,blobVersionedHashes:a,blobs:i,data:c,gas:u,gasPrice:d,maxFeePerBlobGas:f,maxFeePerGas:l,maxPriorityFeePerGas:p,nonce:h,nonceManager:y,to:m,type:w,value:A,...v}=t,b=await(async()=>{if(!n||!y||typeof h<"u")return h;const T=Y(n),k=o?o.id:await z(e,Ct,"getChainId")({});return await y.consume({address:T.address,chainId:k,client:e})})();wt(t);const g=o?.formatters?.transactionRequest?.format,P=(g||Bt)({...vn(v,{format:g}),account:n?Y(n):void 0,accessList:r,authorizationList:s,blobs:i,blobVersionedHashes:a,data:c,gas:u,gasPrice:d,maxFeePerBlobGas:f,maxFeePerGas:l,maxPriorityFeePerGas:p,nonce:b,to:m,type:w,value:A},"fillTransaction");try{const T=await e.request({method:"eth_fillTransaction",params:[P]}),x=(o?.formatters?.transaction?.format||ua)(T.tx);delete x.blockHash,delete x.blockNumber,delete x.r,delete x.s,delete x.transactionIndex,delete x.v,delete x.yParity,x.data=x.input,x.gas&&(x.gas=t.gas??x.gas),x.gasPrice&&(x.gasPrice=t.gasPrice??x.gasPrice),x.maxFeePerBlobGas&&(x.maxFeePerBlobGas=t.maxFeePerBlobGas??x.maxFeePerBlobGas),x.maxFeePerGas&&(x.maxFeePerGas=t.maxFeePerGas??x.maxFeePerGas),x.maxPriorityFeePerGas&&(x.maxPriorityFeePerGas=t.maxPriorityFeePerGas??x.maxPriorityFeePerGas),x.nonce&&(x.nonce=t.nonce??x.nonce);const C=await(async()=>{if(typeof o?.fees?.baseFeeMultiplier=="function"){const I=await z(e,je,"getBlock")({});return o.fees.baseFeeMultiplier({block:I,client:e,request:t})}return o?.fees?.baseFeeMultiplier??1.2})();if(C<1)throw new du;const _=10**(C.toString().split(".")[1]?.length??0),j=I=>I*BigInt(Math.ceil(C*_))/BigInt(_);return x.maxFeePerGas&&!t.maxFeePerGas&&(x.maxFeePerGas=j(x.maxFeePerGas)),x.gasPrice&&!t.gasPrice&&(x.gasPrice=j(x.gasPrice)),{raw:T.raw,transaction:{from:P.from,...x}}}catch(T){throw is(T,{...t,chain:e.chain})}}const ya=["blobVersionedHashes","chainId","fees","gas","nonce","type"],Pi=new Map,Us=new wn(128);async function br(e,t){let n=t;n.account??=e.account,n.parameters??=ya;const{account:r,chain:s=e.chain,nonceManager:o,parameters:a}=n,i=(()=>{if(typeof s?.prepareTransactionRequest=="function")return{fn:s.prepareTransactionRequest,runAt:["beforeFillTransaction"]};if(Array.isArray(s?.prepareTransactionRequest))return{fn:s.prepareTransactionRequest[0],runAt:s.prepareTransactionRequest[1].runAt}})();let c;async function u(){return c||(typeof n.chainId<"u"?n.chainId:s?s.id:(c=await z(e,Ct,"getChainId")({}),c))}const d=r&&Y(r);let f=n.nonce;if(a.includes("nonce")&&typeof f>"u"&&d&&o){const b=await u();f=await o.consume({address:d.address,chainId:b,client:e})}i?.fn&&i.runAt?.includes("beforeFillTransaction")&&(n=await i.fn({...n,chain:s},{phase:"beforeFillTransaction"}),f??=n.nonce);const p=((a.includes("blobVersionedHashes")||a.includes("sidecars"))&&n.kzg&&n.blobs||Us.get(e.uid)===!1||!["fees","gas"].some(g=>a.includes(g))?!1:!!(a.includes("chainId")&&typeof n.chainId!="number"||a.includes("nonce")&&typeof f!="number"||a.includes("fees")&&typeof n.gasPrice!="bigint"&&(typeof n.maxFeePerGas!="bigint"||typeof n.maxPriorityFeePerGas!="bigint")||a.includes("gas")&&typeof n.gas!="bigint"))?await z(e,ba,"fillTransaction")({...n,nonce:f}).then(b=>{const{chainId:g,from:E,gas:P,gasPrice:T,nonce:k,maxFeePerBlobGas:x,maxFeePerGas:C,maxPriorityFeePerGas:O,type:_,...j}=b.transaction;return Us.set(e.uid,!0),{...n,...E?{from:E}:{},..._?{type:_}:{},...typeof g<"u"?{chainId:g}:{},...typeof P<"u"?{gas:P}:{},...typeof T<"u"?{gasPrice:T}:{},...typeof k<"u"?{nonce:k}:{},...typeof x<"u"?{maxFeePerBlobGas:x}:{},...typeof C<"u"?{maxFeePerGas:C}:{},...typeof O<"u"?{maxPriorityFeePerGas:O}:{},..."nonceKey"in j&&typeof j.nonceKey<"u"?{nonceKey:j.nonceKey}:{}}}).catch(b=>{const g=b;return g.name!=="TransactionExecutionError"||g.walk?.(P=>{const T=P;return T.name==="MethodNotFoundRpcError"||T.name==="MethodNotSupportedRpcError"})&&Us.set(e.uid,!1),n}):n;f??=p.nonce,n={...p,...d?{from:d?.address}:{},...f?{nonce:f}:{}};const{blobs:h,gas:y,kzg:m,type:w}=n;i?.fn&&i.runAt?.includes("beforeFillParameters")&&(n=await i.fn({...n,chain:s},{phase:"beforeFillParameters"}));let A;async function v(){return A||(A=await z(e,je,"getBlock")({blockTag:"latest"}),A)}if(a.includes("nonce")&&typeof f>"u"&&d&&!o&&(n.nonce=await z(e,fa,"getTransactionCount")({address:d.address,blockTag:"pending"})),(a.includes("blobVersionedHashes")||a.includes("sidecars"))&&h&&m){const b=la({blobs:h,kzg:m});if(a.includes("blobVersionedHashes")){const g=bu({commitments:b,to:"hex"});n.blobVersionedHashes=g}if(a.includes("sidecars")){const g=pa({blobs:h,commitments:b,kzg:m}),E=vu({blobs:h,commitments:b,proofs:g,to:"hex"});n.sidecars=E}}if(a.includes("chainId")&&(n.chainId=await u()),(a.includes("fees")||a.includes("type"))&&typeof w>"u")try{n.type=xu(n)}catch{let b=Pi.get(e.uid);typeof b>"u"&&(b=typeof(await v())?.baseFeePerGas=="bigint",Pi.set(e.uid,b)),n.type=b?"eip1559":"legacy"}if(a.includes("fees"))if(n.type!=="legacy"&&n.type!=="eip2930"){if(typeof n.maxFeePerGas>"u"||typeof n.maxPriorityFeePerGas>"u"){const b=await v(),{maxFeePerGas:g,maxPriorityFeePerGas:E}=await Co(e,{block:b,chain:s,request:n});if(typeof n.maxPriorityFeePerGas>"u"&&n.maxFeePerGas&&n.maxFeePerGas<E)throw new Up({maxPriorityFeePerGas:E});n.maxPriorityFeePerGas=E,n.maxFeePerGas=g}}else{if(typeof n.maxFeePerGas<"u"||typeof n.maxPriorityFeePerGas<"u")throw new ca;if(typeof n.gasPrice>"u"){const b=await v(),{gasPrice:g}=await Co(e,{block:b,chain:s,request:n,type:"legacy"});n.gasPrice=g}}return a.includes("gas")&&typeof y>"u"&&(n.gas=await z(e,ma,"estimateGas")({...n,account:d,prepare:d?.type==="local"?[]:["blobVersionedHashes"]})),i?.fn&&i.runAt?.includes("afterFillParameters")&&(n=await i.fn({...n,chain:s},{phase:"afterFillParameters"})),wt(n),delete n.parameters,n}async function ma(e,t){const{account:n=e.account,prepare:r=!0}=t,s=n?Y(n):void 0,o=(()=>{if(Array.isArray(r))return r;if(s?.type!=="local")return["blobVersionedHashes"]})();try{const a=await(async()=>{if(t.to)return t.to;if(t.authorizationList&&t.authorizationList.length>0)return await ss({authorization:t.authorizationList[0]}).catch(()=>{throw new $("`to` is required. Could not infer from `authorizationList`")})})(),{accessList:i,authorizationList:c,blobs:u,blobVersionedHashes:d,blockNumber:f,blockTag:l,data:p,gas:h,gasPrice:y,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:A,nonce:v,value:b,stateOverride:g,...E}=r?await br(e,{...t,parameters:o,to:a}):t;if(h&&t.gas!==h)return h;const T=(typeof f=="bigint"?N(f):void 0)||l,k=ia(g);wt(t);const x=e.chain?.formatters?.transactionRequest?.format,O=(x||Bt)({...vn(E,{format:x}),account:s,accessList:i,authorizationList:c,blobs:u,blobVersionedHashes:d,data:p,gasPrice:y,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:A,nonce:v,to:a,value:b},"estimateGas");return BigInt(await e.request({method:"eth_estimateGas",params:k?[O,T??e.experimental_blockTag??"latest",k]:T?[O,T]:[O]}))}catch(a){throw Rp(a,{...t,account:s,chain:e.chain})}}async function sh(e,t){const{abi:n,address:r,args:s,functionName:o,dataSuffix:a,...i}=t,c=pe({abi:n,args:s,functionName:o});try{return await z(e,ma,"estimateGas")({data:`${c}${a?a.replace("0x",""):""}`,to:r,...i})}catch(u){const d=i.account?Y(i.account):void 0;throw jt(u,{abi:n,address:r,args:s,docsPath:"/docs/contract/estimateContractGas",functionName:o,sender:d?.address})}}function yr(e,t){if(!ue(e,{strict:!1}))throw new we({address:e});if(!ue(t,{strict:!1}))throw new we({address:t});return e.toLowerCase()===t.toLowerCase()}const Ti="/docs/contract/decodeEventLog";function Dr(e){const{abi:t,data:n,strict:r,topics:s}=e,o=r??!0,[a,...i]=s;if(!a)throw new Xf({docsPath:Ti});const c=t.find(y=>y.type==="event"&&a===ts(He(y)));if(!(c&&"name"in c)||c.type!=="event")throw new Qf(a,{docsPath:Ti});const{name:u,inputs:d}=c,f=d?.some(y=>!("name"in y&&y.name)),l=f?[]:{},p=d.map((y,m)=>[y,m]).filter(([y])=>"indexed"in y&&y.indexed);for(let y=0;y<p.length;y++){const[m,w]=p[y],A=i[y];if(!A)throw new Xo({abiItem:c,param:m});l[f?w:m.name||w]=oh({param:m,value:A})}const h=d.filter(y=>!("indexed"in y&&y.indexed));if(h.length>0){if(n&&n!=="0x")try{const y=lr(h,n);if(y)if(f)for(let m=0;m<d.length;m++)l[m]=l[m]??y.shift();else for(let m=0;m<h.length;m++)l[h[m].name]=y[m]}catch(y){if(o)throw y instanceof $c||y instanceof Yc?new Lr({abiItem:c,data:n,params:h,size:J(n)}):y}else if(o)throw new Lr({abiItem:c,data:"0x",params:h,size:0})}return{eventName:u,args:Object.values(l).length>0?l:void 0}}function oh({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(lr([e],t)||[])[0]}function ga(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,o=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(a=>{const i=t.filter(d=>d.type==="event"&&a.topics[0]===ts(d));if(i.length===0)return null;let c,u;for(const d of i)try{c=Dr({...a,abi:[d],strict:!0}),u=d;break}catch{}if(!c&&!s){u=i[0];try{c=Dr({...a,abi:[u],strict:!1})}catch{const d=u.inputs?.some(f=>!("name"in f&&f.name));return{...a,args:d?[]:{},eventName:u.name}}}return!c||!u||o&&!o.includes(c.eventName)||!ah({args:c.args,inputs:u.inputs,matchArgs:n})?null:{...c,...a}}).filter(Boolean)}function ah(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(o,a,i){try{return o.type==="address"?yr(a,i):o.type==="string"||o.type==="bytes"?le(gn(a))===i:a===i}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((o,a)=>{if(o==null)return!0;const i=n[a];return i?(Array.isArray(o)?o:[o]).some(u=>s(i,u,t[a])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([o,a])=>{if(a==null)return!0;const i=n.find(u=>u.name===o);return i?(Array.isArray(a)?a:[a]).some(u=>s(i,u,t[o])):!1}):!1}function yt(e,{args:t,eventName:n}={}){return{...e,blockHash:e.blockHash?e.blockHash:null,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,blockTimestamp:e.blockTimestamp?BigInt(e.blockTimestamp):e.blockTimestamp===null?null:void 0,logIndex:e.logIndex?Number(e.logIndex):null,transactionHash:e.transactionHash?e.transactionHash:null,transactionIndex:e.transactionIndex?Number(e.transactionIndex):null,...n?{args:t,eventName:n}:{}}}async function wa(e,{address:t,blockHash:n,fromBlock:r,toBlock:s,event:o,events:a,args:i,strict:c}={}){const u=c??!1,d=a??(o?[o]:void 0);let f=[];d&&(f=[d.flatMap(y=>fr({abi:[y],eventName:y.name,args:a?void 0:i}))],o&&(f=f[0]));let l;n?l=await e.request({method:"eth_getLogs",params:[{address:t,topics:f,blockHash:n}]}):l=await e.request({method:"eth_getLogs",params:[{address:t,topics:f,fromBlock:typeof r=="bigint"?N(r):r,toBlock:typeof s=="bigint"?N(s):s}]});const p=l.map(h=>yt(h));return d?ga({abi:d,args:i,logs:p,strict:u}):p}async function Eu(e,t){const{abi:n,address:r,args:s,blockHash:o,eventName:a,fromBlock:i,toBlock:c,strict:u}=t,d=a?Zt({abi:n,name:a}):void 0,f=d?void 0:n.filter(l=>l.type==="event");return z(e,wa,"getLogs")({address:r,args:s,blockHash:o,event:d,events:f,fromBlock:i,toBlock:c,strict:u})}const Ds="/docs/contract/decodeFunctionResult";function Yt(e){const{abi:t,args:n,functionName:r,data:s}=e;let o=t[0];if(r){const i=Zt({abi:t,args:n,name:r});if(!i)throw new fn(r,{docsPath:Ds});o=i}if(o.type!=="function")throw new fn(void 0,{docsPath:Ds});if(!o.outputs)throw new Sc(o.name,{docsPath:Ds});const a=lr(o.outputs,s);if(a&&a.length>1)return a;if(a&&a.length===1)return a[0]}const va=BigInt(0),ko=BigInt(1);function mr(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function xa(e){if(!mr(e))throw new Error("Uint8Array expected")}function rr(e,t){if(typeof t!="boolean")throw new Error(e+" boolean expected, got "+t)}function Br(e){const t=e.toString(16);return t.length&1?"0"+t:t}function Au(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?va:BigInt("0x"+e)}const Pu=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",ih=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function sr(e){if(xa(e),Pu)return e.toHex();let t="";for(let n=0;n<e.length;n++)t+=ih[e[n]];return t}const it={_0:48,_9:57,A:65,F:70,a:97,f:102};function $i(e){if(e>=it._0&&e<=it._9)return e-it._0;if(e>=it.A&&e<=it.F)return e-(it.A-10);if(e>=it.a&&e<=it.f)return e-(it.a-10)}function Gr(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);if(Pu)return Uint8Array.fromHex(e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let s=0,o=0;s<n;s++,o+=2){const a=$i(e.charCodeAt(o)),i=$i(e.charCodeAt(o+1));if(a===void 0||i===void 0){const c=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+o)}r[s]=a*16+i}return r}function Lt(e){return Au(sr(e))}function Tu(e){return xa(e),Au(sr(Uint8Array.from(e).reverse()))}function gr(e,t){return Gr(e.toString(16).padStart(t*2,"0"))}function $u(e,t){return gr(e,t).reverse()}function Fe(e,t,n){let r;if(typeof t=="string")try{r=Gr(t)}catch(o){throw new Error(e+" must be hex string or Uint8Array, cause: "+o)}else if(mr(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const s=r.length;if(typeof n=="number"&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r}function jr(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];xa(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}const Gs=e=>typeof e=="bigint"&&va<=e;function Ea(e,t,n){return Gs(e)&&Gs(t)&&Gs(n)&&t<=e&&e<n}function un(e,t,n,r){if(!Ea(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function ch(e){let t;for(t=0;e>va;e>>=ko,t+=1);return t}const cs=e=>(ko<<BigInt(e))-ko,js=e=>new Uint8Array(e),Ii=e=>Uint8Array.from(e);function uh(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");let r=js(e),s=js(e),o=0;const a=()=>{r.fill(1),s.fill(0),o=0},i=(...f)=>n(s,r,...f),c=(f=js(0))=>{s=i(Ii([0]),f),r=i(),f.length!==0&&(s=i(Ii([1]),f),r=i())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let f=0;const l=[];for(;f<t;){r=i();const p=r.slice();l.push(p),f+=r.length}return jr(...l)};return(f,l)=>{a(),c(f);let p;for(;!(p=l(u()));)c();return a(),p}}const dh={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||mr(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function us(e,t,n={}){const r=(s,o,a)=>{const i=dh[o];if(typeof i!="function")throw new Error("invalid validator function");const c=e[s];if(!(a&&c===void 0)&&!i(c,e))throw new Error("param "+String(s)+" is invalid. Expected "+o+", got "+c)};for(const[s,o]of Object.entries(t))r(s,o,!1);for(const[s,o]of Object.entries(n))r(s,o,!0);return e}function Si(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==void 0)return s;const o=e(n,...r);return t.set(n,o),o}}const fh="0.1.1";function lh(){return fh}class q extends Error{static setStaticOptions(t){q.prototype.docsOrigin=t.docsOrigin,q.prototype.showVersion=t.showVersion,q.prototype.version=t.version}constructor(t,n={}){const r=(()=>{if(n.cause instanceof q){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause&&"details"in n.cause&&typeof n.cause.details=="string"?n.cause.details:n.cause?.message?n.cause.message:n.details})(),s=n.cause instanceof q&&n.cause.docsPath||n.docsPath,o=n.docsOrigin??q.prototype.docsOrigin,a=`${o}${s??""}`,i=!!(n.version??q.prototype.showVersion),c=n.version??q.prototype.version,u=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||s||i?["",r?`Details: ${r}`:void 0,s?`See: ${a}`:void 0,i?`Version: ${c}`:void 0]:[]].filter(d=>typeof d=="string").join(`
`);super(u,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsOrigin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"showVersion",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.cause=n.cause,this.details=r,this.docs=a,this.docsOrigin=o,this.docsPath=s,this.shortMessage=t,this.showVersion=i,this.version=c}walk(t){return Iu(this,t)}}Object.defineProperty(q,"defaultStaticOptions",{enumerable:!0,configurable:!0,writable:!0,value:{docsOrigin:"https://oxlib.sh",showVersion:!1,version:`ox@${lh()}`}});q.setStaticOptions(q.defaultStaticOptions);function Iu(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?Iu(e.cause,t):t?null:e}function wr(e,t){if(sn(e)>t)throw new Bh({givenSize:sn(e),maxSize:t})}const ct={zero:48,nine:57,A:65,F:70,a:97,f:102};function Bi(e){if(e>=ct.zero&&e<=ct.nine)return e-ct.zero;if(e>=ct.A&&e<=ct.F)return e-(ct.A-10);if(e>=ct.a&&e<=ct.f)return e-(ct.a-10)}function ph(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;if(e.length>r)throw new Ch({size:e.length,targetSize:r,type:"Bytes"});const s=new Uint8Array(r);for(let o=0;o<r;o++){const a=n==="right";s[a?o:r-o-1]=e[a?o:e.length-o-1]}return s}function Su(e,t={}){const{dir:n="left"}=t;let r=e,s=0;for(let o=0;o<r.length-1&&r[n==="left"?o:r.length-o-1].toString()==="0";o++)s++;return r=n==="left"?r.slice(s):r.slice(0,r.length-s),r}function ds(e,t){if(Oe(e)>t)throw new Rh({givenSize:Oe(e),maxSize:t})}function hh(e,t){if(typeof t=="number"&&t>0&&t>Oe(e)-1)throw new Fu({offset:t,position:"start",size:Oe(e)})}function bh(e,t,n){if(typeof t=="number"&&typeof n=="number"&&Oe(e)!==n-t)throw new Fu({offset:n,position:"end",size:Oe(e)})}function Bu(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const s=e.replace("0x","");if(s.length>r*2)throw new Fh({size:Math.ceil(s.length/2),targetSize:r,type:"Hex"});return`0x${s[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const yh="#__bigint";function Cu(e,t,n){return JSON.stringify(e,(r,s)=>typeof s=="bigint"?s.toString()+yh:s,n)}const mh=new TextDecoder,gh=new TextEncoder;function wh(e){return e instanceof Uint8Array?e:typeof e=="string"?ku(e):vh(e)}function vh(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function ku(e,t={}){const{size:n}=t;let r=e;n&&(ds(e,n),r=Wt(e,n));let s=r.slice(2);s.length%2&&(s=`0${s}`);const o=s.length/2,a=new Uint8Array(o);for(let i=0,c=0;i<o;i++){const u=Bi(s.charCodeAt(c++)),d=Bi(s.charCodeAt(c++));if(u===void 0||d===void 0)throw new q(`Invalid byte sequence ("${s[c-2]}${s[c-1]}" in "${s}").`);a[i]=u<<4|d}return a}function xh(e,t={}){const{size:n}=t,r=gh.encode(e);return typeof n=="number"?(wr(r,n),Eh(r,n)):r}function Eh(e,t){return ph(e,{dir:"right",size:t})}function sn(e){return e.length}function Ah(e,t,n,r={}){const{strict:s}=r;return e.slice(t,n)}function Ph(e,t={}){const{size:n}=t;typeof n<"u"&&wr(e,n);const r=Ke(e,t);return _u(r,t)}function Th(e,t={}){const{size:n}=t;let r=e;if(typeof n<"u"&&(wr(r,n),r=Nu(r)),r.length>1||r[0]>1)throw new Sh(r);return!!r[0]}function ht(e,t={}){const{size:n}=t;typeof n<"u"&&wr(e,n);const r=Ke(e,t);return Mu(r,t)}function $h(e,t={}){const{size:n}=t;let r=e;return typeof n<"u"&&(wr(r,n),r=Ih(r)),mh.decode(r)}function Nu(e){return Su(e,{dir:"left"})}function Ih(e){return Su(e,{dir:"right"})}class Sh extends q{constructor(t){super(`Bytes value \`${t}\` is not a valid boolean.`,{metaMessages:["The bytes array must contain a single byte of either a `0` or `1` value."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesBooleanError"})}}let Bh=class extends q{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}},Ch=class extends q{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeExceedsPaddingSizeError"})}};const kh=new TextEncoder,Nh=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Oh(e,t={}){const{strict:n=!1}=t;if(!e)throw new Ci(e);if(typeof e!="string")throw new Ci(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new ki(e);if(!e.startsWith("0x"))throw new ki(e)}function We(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function _h(e){return e instanceof Uint8Array?Ke(e):Array.isArray(e)?Ke(new Uint8Array(e)):e}function Ou(e,t={}){const n=`0x${Number(e)}`;return typeof t.size=="number"?(ds(n,t.size),Vt(n,t.size)):n}function Ke(e,t={}){let n="";for(let s=0;s<e.length;s++)n+=Nh[e[s]];const r=`0x${n}`;return typeof t.size=="number"?(ds(r,t.size),Wt(r,t.size)):r}function me(e,t={}){const{signed:n,size:r}=t,s=BigInt(e);let o;r?n?o=(1n<<BigInt(r)*8n-1n)-1n:o=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(o=BigInt(Number.MAX_SAFE_INTEGER));const a=typeof o=="bigint"&&n?-o-1n:0;if(o&&s>o||s<a){const u=typeof e=="bigint"?"n":"";throw new Ru({max:o?`${o}${u}`:void 0,min:`${a}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&s<0?BigInt.asUintN(r*8,BigInt(s)):s).toString(16)}`;return r?Vt(c,r):c}function Aa(e,t={}){return Ke(kh.encode(e),t)}function Vt(e,t){return Bu(e,{dir:"left",size:t})}function Wt(e,t){return Bu(e,{dir:"right",size:t})}function nt(e,t,n,r={}){const{strict:s}=r;hh(e,t);const o=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return s&&bh(o,t,n),o}function Oe(e){return Math.ceil((e.length-2)/2)}function _u(e,t={}){const{signed:n}=t;t.size&&ds(e,t.size);const r=BigInt(e);if(!n)return r;const s=(e.length-2)/2,o=(1n<<BigInt(s)*8n)-1n,a=o>>1n;return r<=a?r:r-o-1n}function Mu(e,t={}){const{signed:n,size:r}=t;return Number(!n&&!r?e:_u(e,t))}function Mh(e,t={}){const{strict:n=!1}=t;try{return Oh(e,{strict:n}),!0}catch{return!1}}class Ru extends q{constructor({max:t,min:n,signed:r,size:s,value:o}){super(`Number \`${o}\` is not in safe${s?` ${s*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Ci extends q{constructor(t){super(`Value \`${typeof t=="object"?Cu(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class ki extends q{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}class Rh extends q{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}}class Fu extends q{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}}class Fh extends q{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function zh(e){return{address:e.address,amount:me(e.amount),index:me(e.index),validatorIndex:me(e.validatorIndex)}}function zu(e){return{...typeof e.baseFeePerGas=="bigint"&&{baseFeePerGas:me(e.baseFeePerGas)},...typeof e.blobBaseFee=="bigint"&&{blobBaseFee:me(e.blobBaseFee)},...typeof e.feeRecipient=="string"&&{feeRecipient:e.feeRecipient},...typeof e.gasLimit=="bigint"&&{gasLimit:me(e.gasLimit)},...typeof e.number=="bigint"&&{number:me(e.number)},...typeof e.prevRandao=="bigint"&&{prevRandao:me(e.prevRandao)},...typeof e.time=="bigint"&&{time:me(e.time)},...e.withdrawals&&{withdrawals:e.withdrawals.map(zh)}}}const Hr=[{inputs:[{components:[{name:"target",type:"address"},{name:"allowFailure",type:"bool"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"aggregate3",outputs:[{components:[{name:"success",type:"bool"},{name:"returnData",type:"bytes"}],name:"returnData",type:"tuple[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getCurrentBlockTimestamp",outputs:[{internalType:"uint256",name:"timestamp",type:"uint256"}],stateMutability:"view",type:"function"}],No=[{name:"query",type:"function",stateMutability:"view",inputs:[{type:"tuple[]",name:"queries",components:[{type:"address",name:"sender"},{type:"string[]",name:"urls"},{type:"bytes",name:"data"}]}],outputs:[{type:"bool[]",name:"failures"},{type:"bytes[]",name:"responses"}]},{name:"HttpError",type:"error",inputs:[{type:"uint16",name:"status"},{type:"string",name:"message"}]}],Lu=[{inputs:[{name:"dns",type:"bytes"}],name:"DNSDecodingFailed",type:"error"},{inputs:[{name:"ens",type:"string"}],name:"DNSEncodingFailed",type:"error"},{inputs:[],name:"EmptyAddress",type:"error"},{inputs:[{name:"status",type:"uint16"},{name:"message",type:"string"}],name:"HttpError",type:"error"},{inputs:[],name:"InvalidBatchGatewayResponse",type:"error"},{inputs:[{name:"errorData",type:"bytes"}],name:"ResolverError",type:"error"},{inputs:[{name:"name",type:"bytes"},{name:"resolver",type:"address"}],name:"ResolverNotContract",type:"error"},{inputs:[{name:"name",type:"bytes"}],name:"ResolverNotFound",type:"error"},{inputs:[{name:"primary",type:"string"},{name:"primaryAddress",type:"bytes"}],name:"ReverseAddressMismatch",type:"error"},{inputs:[{internalType:"bytes4",name:"selector",type:"bytes4"}],name:"UnsupportedResolverProfile",type:"error"}],Uu=[...Lu,{name:"resolveWithGateways",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes"},{name:"data",type:"bytes"},{name:"gateways",type:"string[]"}],outputs:[{name:"",type:"bytes"},{name:"address",type:"address"}]}],Lh=[...Lu,{name:"reverseWithGateways",type:"function",stateMutability:"view",inputs:[{type:"bytes",name:"reverseName"},{type:"uint256",name:"coinType"},{type:"string[]",name:"gateways"}],outputs:[{type:"string",name:"resolvedName"},{type:"address",name:"resolver"},{type:"address",name:"reverseResolver"}]}],Ni=[{name:"text",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"key",type:"string"}],outputs:[{name:"",type:"string"}]}],Oi=[{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"}],outputs:[{name:"",type:"address"}]},{name:"addr",type:"function",stateMutability:"view",inputs:[{name:"name",type:"bytes32"},{name:"coinType",type:"uint256"}],outputs:[{name:"",type:"bytes"}]}],Du=[{name:"isValidSignature",type:"function",stateMutability:"view",inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],outputs:[{name:"",type:"bytes4"}]}],_i=[{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"_signer",type:"address"},{name:"_hash",type:"bytes32"},{name:"_signature",type:"bytes"}],outputs:[{type:"bool"}],stateMutability:"nonpayable",type:"function",name:"isValidSig"}],Uh="0x82ad56cb",Gu="0x608060405234801561001057600080fd5b5060405161018e38038061018e83398101604081905261002f91610124565b6000808351602085016000f59050803b61004857600080fd5b6000808351602085016000855af16040513d6000823e81610067573d81fd5b3d81f35b634e487b7160e01b600052604160045260246000fd5b600082601f83011261009257600080fd5b81516001600160401b038111156100ab576100ab61006b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156100d9576100d961006b565b6040528181528382016020018510156100f157600080fd5b60005b82811015610110576020818601810151838301820152016100f4565b506000918101602001919091529392505050565b6000806040838503121561013757600080fd5b82516001600160401b0381111561014d57600080fd5b61015985828601610081565b602085015190935090506001600160401b0381111561017757600080fd5b61018385828601610081565b915050925092905056fe",Dh="0x608060405234801561001057600080fd5b506040516102c03803806102c083398101604081905261002f916101e6565b836001600160a01b03163b6000036100e457600080836001600160a01b03168360405161005c9190610270565b6000604051808303816000865af19150503d8060008114610099576040519150601f19603f3d011682016040523d82523d6000602084013e61009e565b606091505b50915091508115806100b857506001600160a01b0386163b155b156100e1578060405163101bb98d60e01b81526004016100d8919061028c565b60405180910390fd5b50505b6000808451602086016000885af16040513d6000823e81610103573d81fd5b3d81f35b80516001600160a01b038116811461011e57600080fd5b919050565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561015457818101518382015260200161013c565b50506000910152565b600082601f83011261016e57600080fd5b81516001600160401b0381111561018757610187610123565b604051601f8201601f19908116603f011681016001600160401b03811182821017156101b5576101b5610123565b6040528181528382016020018510156101cd57600080fd5b6101de826020830160208701610139565b949350505050565b600080600080608085870312156101fc57600080fd5b61020585610107565b60208601519094506001600160401b0381111561022157600080fd5b61022d8782880161015d565b93505061023c60408601610107565b60608601519092506001600160401b0381111561025857600080fd5b6102648782880161015d565b91505092959194509250565b60008251610282818460208701610139565b9190910192915050565b60208152600082518060208401526102ab816040850160208701610139565b601f01601f1916919091016040019291505056fe",Gh="0x608060405234801561001057600080fd5b5060405161069438038061069483398101604081905261002f9161051e565b600061003c848484610048565b9050806000526001601ff35b60007f64926492649264926492649264926492649264926492649264926492649264926100748361040c565b036101e7576000606080848060200190518101906100929190610577565b60405192955090935091506000906001600160a01b038516906100b69085906105dd565b6000604051808303816000865af19150503d80600081146100f3576040519150601f19603f3d011682016040523d82523d6000602084013e6100f8565b606091505b50509050876001600160a01b03163b60000361016057806101605760405162461bcd60e51b815260206004820152601e60248201527f5369676e617475726556616c696461746f723a206465706c6f796d656e74000060448201526064015b60405180910390fd5b604051630b135d3f60e11b808252906001600160a01b038a1690631626ba7e90610190908b9087906004016105f9565b602060405180830381865afa1580156101ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101d19190610633565b6001600160e01b03191614945050505050610405565b6001600160a01b0384163b1561027a57604051630b135d3f60e11b808252906001600160a01b03861690631626ba7e9061022790879087906004016105f9565b602060405180830381865afa158015610244573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102689190610633565b6001600160e01b031916149050610405565b81516041146102df5760405162461bcd60e51b815260206004820152603a602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610157565b6102e7610425565b5060208201516040808401518451859392600091859190811061030c5761030c61065d565b016020015160f81c9050601b811480159061032b57508060ff16601c14155b1561038c5760405162461bcd60e51b815260206004820152603b602482015260008051602061067483398151915260448201527f3a20696e76616c6964207369676e617475726520762076616c756500000000006064820152608401610157565b60408051600081526020810180835289905260ff83169181019190915260608101849052608081018390526001600160a01b0389169060019060a0016020604051602081039080840390855afa1580156103ea573d6000803e3d6000fd5b505050602060405103516001600160a01b0316149450505050505b9392505050565b600060208251101561041d57600080fd5b508051015190565b60405180606001604052806003906020820280368337509192915050565b6001600160a01b038116811461045857600080fd5b50565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561048c578181015183820152602001610474565b50506000910152565b600082601f8301126104a657600080fd5b81516001600160401b038111156104bf576104bf61045b565b604051601f8201601f19908116603f011681016001600160401b03811182821017156104ed576104ed61045b565b60405281815283820160200185101561050557600080fd5b610516826020830160208701610471565b949350505050565b60008060006060848603121561053357600080fd5b835161053e81610443565b6020850151604086015191945092506001600160401b0381111561056157600080fd5b61056d86828701610495565b9150509250925092565b60008060006060848603121561058c57600080fd5b835161059781610443565b60208501519093506001600160401b038111156105b357600080fd5b6105bf86828701610495565b604086015190935090506001600160401b0381111561056157600080fd5b600082516105ef818460208701610471565b9190910192915050565b828152604060208201526000825180604084015261061e816060850160208701610471565b601f01601f1916919091016060019392505050565b60006020828403121561064557600080fd5b81516001600160e01b03198116811461040557600080fd5b634e487b7160e01b600052603260045260246000fdfe5369676e617475726556616c696461746f72237265636f7665725369676e6572",Pa="0x608060405234801561001057600080fd5b506115b9806100206000396000f3fe6080604052600436106100f35760003560e01c80634d2301cc1161008a578063a8b0574e11610059578063a8b0574e14610325578063bce38bd714610350578063c3077fa914610380578063ee82ac5e146103b2576100f3565b80634d2301cc1461026257806372425d9d1461029f57806382ad56cb146102ca57806386d516e8146102fa576100f3565b80633408e470116100c65780633408e470146101af578063399542e9146101da5780633e64a6961461020c57806342cbb15c14610237576100f3565b80630f28c97d146100f8578063174dea7114610123578063252dba421461015357806327e86d6e14610184575b600080fd5b34801561010457600080fd5b5061010d6103ef565b60405161011a9190610c0a565b60405180910390f35b61013d60048036038101906101389190610c94565b6103f7565b60405161014a9190610e94565b60405180910390f35b61016d60048036038101906101689190610f0c565b610615565b60405161017b92919061101b565b60405180910390f35b34801561019057600080fd5b506101996107ab565b6040516101a69190611064565b60405180910390f35b3480156101bb57600080fd5b506101c46107b7565b6040516101d19190610c0a565b60405180910390f35b6101f460048036038101906101ef91906110ab565b6107bf565b6040516102039392919061110b565b60405180910390f35b34801561021857600080fd5b506102216107e1565b60405161022e9190610c0a565b60405180910390f35b34801561024357600080fd5b5061024c6107e9565b6040516102599190610c0a565b60405180910390f35b34801561026e57600080fd5b50610289600480360381019061028491906111a7565b6107f1565b6040516102969190610c0a565b60405180910390f35b3480156102ab57600080fd5b506102b4610812565b6040516102c19190610c0a565b60405180910390f35b6102e460048036038101906102df919061122a565b61081a565b6040516102f19190610e94565b60405180910390f35b34801561030657600080fd5b5061030f6109e4565b60405161031c9190610c0a565b60405180910390f35b34801561033157600080fd5b5061033a6109ec565b6040516103479190611286565b60405180910390f35b61036a600480360381019061036591906110ab565b6109f4565b6040516103779190610e94565b60405180910390f35b61039a60048036038101906103959190610f0c565b610ba6565b6040516103a99392919061110b565b60405180910390f35b3480156103be57600080fd5b506103d960048036038101906103d491906112cd565b610bca565b6040516103e69190611064565b60405180910390f35b600042905090565b60606000808484905090508067ffffffffffffffff81111561041c5761041b6112fa565b5b60405190808252806020026020018201604052801561045557816020015b610442610bd5565b81526020019060019003908161043a5790505b5092503660005b828110156105c957600085828151811061047957610478611329565b5b6020026020010151905087878381811061049657610495611329565b5b90506020028101906104a89190611367565b925060008360400135905080860195508360000160208101906104cb91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16818580606001906104f2919061138f565b604051610500929190611431565b60006040518083038185875af1925050503d806000811461053d576040519150601f19603f3d011682016040523d82523d6000602084013e610542565b606091505b5083600001846020018290528215151515815250505081516020850135176105bc577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260846000fd5b826001019250505061045c565b5082341461060c576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610603906114a7565b60405180910390fd5b50505092915050565b6000606043915060008484905090508067ffffffffffffffff81111561063e5761063d6112fa565b5b60405190808252806020026020018201604052801561067157816020015b606081526020019060019003908161065c5790505b5091503660005b828110156107a157600087878381811061069557610694611329565b5b90506020028101906106a791906114c7565b92508260000160208101906106bc91906111a7565b73ffffffffffffffffffffffffffffffffffffffff168380602001906106e2919061138f565b6040516106f0929190611431565b6000604051808303816000865af19150503d806000811461072d576040519150601f19603f3d011682016040523d82523d6000602084013e610732565b606091505b5086848151811061074657610745611329565b5b60200260200101819052819250505080610795576040517f08c379a000000000000000000000000000000000000000000000000000000000815260040161078c9061153b565b60405180910390fd5b81600101915050610678565b5050509250929050565b60006001430340905090565b600046905090565b6000806060439250434091506107d68686866109f4565b905093509350939050565b600048905090565b600043905090565b60008173ffffffffffffffffffffffffffffffffffffffff16319050919050565b600044905090565b606060008383905090508067ffffffffffffffff81111561083e5761083d6112fa565b5b60405190808252806020026020018201604052801561087757816020015b610864610bd5565b81526020019060019003908161085c5790505b5091503660005b828110156109db57600084828151811061089b5761089a611329565b5b602002602001015190508686838181106108b8576108b7611329565b5b90506020028101906108ca919061155b565b92508260000160208101906108df91906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060400190610905919061138f565b604051610913929190611431565b6000604051808303816000865af19150503d8060008114610950576040519150601f19603f3d011682016040523d82523d6000602084013e610955565b606091505b5082600001836020018290528215151515815250505080516020840135176109cf577f08c379a000000000000000000000000000000000000000000000000000000000600052602060045260176024527f4d756c746963616c6c333a2063616c6c206661696c656400000000000000000060445260646000fd5b8160010191505061087e565b50505092915050565b600045905090565b600041905090565b606060008383905090508067ffffffffffffffff811115610a1857610a176112fa565b5b604051908082528060200260200182016040528015610a5157816020015b610a3e610bd5565b815260200190600190039081610a365790505b5091503660005b82811015610b9c576000848281518110610a7557610a74611329565b5b60200260200101519050868683818110610a9257610a91611329565b5b9050602002810190610aa491906114c7565b9250826000016020810190610ab991906111a7565b73ffffffffffffffffffffffffffffffffffffffff16838060200190610adf919061138f565b604051610aed929190611431565b6000604051808303816000865af19150503d8060008114610b2a576040519150601f19603f3d011682016040523d82523d6000602084013e610b2f565b606091505b508260000183602001829052821515151581525050508715610b90578060000151610b8f576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401610b869061153b565b60405180910390fd5b5b81600101915050610a58565b5050509392505050565b6000806060610bb7600186866107bf565b8093508194508295505050509250925092565b600081409050919050565b6040518060400160405280600015158152602001606081525090565b6000819050919050565b610c0481610bf1565b82525050565b6000602082019050610c1f6000830184610bfb565b92915050565b600080fd5b600080fd5b600080fd5b600080fd5b600080fd5b60008083601f840112610c5457610c53610c2f565b5b8235905067ffffffffffffffff811115610c7157610c70610c34565b5b602083019150836020820283011115610c8d57610c8c610c39565b5b9250929050565b60008060208385031215610cab57610caa610c25565b5b600083013567ffffffffffffffff811115610cc957610cc8610c2a565b5b610cd585828601610c3e565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b60008115159050919050565b610d2281610d0d565b82525050565b600081519050919050565b600082825260208201905092915050565b60005b83811015610d62578082015181840152602081019050610d47565b83811115610d71576000848401525b50505050565b6000601f19601f8301169050919050565b6000610d9382610d28565b610d9d8185610d33565b9350610dad818560208601610d44565b610db681610d77565b840191505092915050565b6000604083016000830151610dd96000860182610d19565b5060208301518482036020860152610df18282610d88565b9150508091505092915050565b6000610e0a8383610dc1565b905092915050565b6000602082019050919050565b6000610e2a82610ce1565b610e348185610cec565b935083602082028501610e4685610cfd565b8060005b85811015610e825784840389528151610e638582610dfe565b9450610e6e83610e12565b925060208a01995050600181019050610e4a565b50829750879550505050505092915050565b60006020820190508181036000830152610eae8184610e1f565b905092915050565b60008083601f840112610ecc57610ecb610c2f565b5b8235905067ffffffffffffffff811115610ee957610ee8610c34565b5b602083019150836020820283011115610f0557610f04610c39565b5b9250929050565b60008060208385031215610f2357610f22610c25565b5b600083013567ffffffffffffffff811115610f4157610f40610c2a565b5b610f4d85828601610eb6565b92509250509250929050565b600081519050919050565b600082825260208201905092915050565b6000819050602082019050919050565b6000610f918383610d88565b905092915050565b6000602082019050919050565b6000610fb182610f59565b610fbb8185610f64565b935083602082028501610fcd85610f75565b8060005b858110156110095784840389528151610fea8582610f85565b9450610ff583610f99565b925060208a01995050600181019050610fd1565b50829750879550505050505092915050565b60006040820190506110306000830185610bfb565b81810360208301526110428184610fa6565b90509392505050565b6000819050919050565b61105e8161104b565b82525050565b60006020820190506110796000830184611055565b92915050565b61108881610d0d565b811461109357600080fd5b50565b6000813590506110a58161107f565b92915050565b6000806000604084860312156110c4576110c3610c25565b5b60006110d286828701611096565b935050602084013567ffffffffffffffff8111156110f3576110f2610c2a565b5b6110ff86828701610eb6565b92509250509250925092565b60006060820190506111206000830186610bfb565b61112d6020830185611055565b818103604083015261113f8184610e1f565b9050949350505050565b600073ffffffffffffffffffffffffffffffffffffffff82169050919050565b600061117482611149565b9050919050565b61118481611169565b811461118f57600080fd5b50565b6000813590506111a18161117b565b92915050565b6000602082840312156111bd576111bc610c25565b5b60006111cb84828501611192565b91505092915050565b60008083601f8401126111ea576111e9610c2f565b5b8235905067ffffffffffffffff81111561120757611206610c34565b5b60208301915083602082028301111561122357611222610c39565b5b9250929050565b6000806020838503121561124157611240610c25565b5b600083013567ffffffffffffffff81111561125f5761125e610c2a565b5b61126b858286016111d4565b92509250509250929050565b61128081611169565b82525050565b600060208201905061129b6000830184611277565b92915050565b6112aa81610bf1565b81146112b557600080fd5b50565b6000813590506112c7816112a1565b92915050565b6000602082840312156112e3576112e2610c25565b5b60006112f1848285016112b8565b91505092915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b600080fd5b600080fd5b600080fd5b60008235600160800383360303811261138357611382611358565b5b80830191505092915050565b600080833560016020038436030381126113ac576113ab611358565b5b80840192508235915067ffffffffffffffff8211156113ce576113cd61135d565b5b6020830192506001820236038313156113ea576113e9611362565b5b509250929050565b600081905092915050565b82818337600083830152505050565b600061141883856113f2565b93506114258385846113fd565b82840190509392505050565b600061143e82848661140c565b91508190509392505050565b600082825260208201905092915050565b7f4d756c746963616c6c333a2076616c7565206d69736d61746368000000000000600082015250565b6000611491601a8361144a565b915061149c8261145b565b602082019050919050565b600060208201905081810360008301526114c081611484565b9050919050565b6000823560016040038336030381126114e3576114e2611358565b5b80830191505092915050565b7f4d756c746963616c6c333a2063616c6c206661696c6564000000000000000000600082015250565b600061152560178361144a565b9150611530826114ef565b602082019050919050565b6000602082019050818103600083015261155481611518565b9050919050565b60008235600160600383360303811261157757611576611358565b5b8083019150509291505056fea264697066735822122020c1bc9aacf8e4a6507193432a895a8e77094f45a1395583f07b24e860ef06cd64736f6c634300080c0033";class Oo extends ${constructor({blockNumber:t,chain:n,contract:r}){super(`Chain "${n.name}" does not support contract "${r.name}".`,{metaMessages:["This could be due to any of the following:",...t&&r.blockCreated&&r.blockCreated>t?[`- The contract "${r.name}" was not deployed until block ${r.blockCreated} (current block ${t}).`]:[`- The chain does not have the contract "${r.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class jh extends ${constructor({chain:t,currentChainId:n}){super(`The current chain of the wallet (id: ${n}) does not match the target chain for the transaction (id: ${t.id} â ${t.name}).`,{metaMessages:[`Current Chain ID:  ${n}`,`Expected Chain ID: ${t.id} â ${t.name}`],name:"ChainMismatchError"})}}class Hh extends ${constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class ju extends ${constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class fs extends ${constructor({chainId:t}){super(typeof t=="number"?`Chain ID "${t}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}const Hs="/docs/contract/encodeDeployData";function ls(e){const{abi:t,args:n,bytecode:r}=e;if(!n||n.length===0)return r;const s=t.find(a=>"type"in a&&a.type==="constructor");if(!s)throw new Wf({docsPath:Hs});if(!("inputs"in s))throw new ri({docsPath:Hs});if(!s.inputs||s.inputs.length===0)throw new ri({docsPath:Hs});const o=Ne(s.inputs,n);return rt([r,o])}function xn({blockNumber:e,chain:t,contract:n}){const r=t?.contracts?.[n];if(!r)throw new Oo({chain:t,contract:{name:n}});if(e&&r.blockCreated&&r.blockCreated>e)throw new Oo({blockNumber:e,chain:t,contract:{name:n,blockCreated:r.blockCreated}});return r.address}function Hu(e,{docsPath:t,...n}){const r=(()=>{const s=os(e,n);return s instanceof hr?e:s})();return new ru(r,{docsPath:t,...n})}function Ta(){let e=()=>{},t=()=>{};return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}const qs=new Map;function qu({fn:e,id:t,shouldSplitBatch:n,wait:r=0,sort:s}){const o=async()=>{const d=c();a();const f=d.map(({args:l})=>l);f.length!==0&&e(f).then(l=>{s&&Array.isArray(l)&&l.sort(s);for(let p=0;p<d.length;p++){const{resolve:h}=d[p];h?.([l[p],l])}}).catch(l=>{for(let p=0;p<d.length;p++){const{reject:h}=d[p];h?.(l)}})},a=()=>qs.delete(t),i=()=>c().map(({args:d})=>d),c=()=>qs.get(t)||[],u=d=>qs.set(t,[...c(),d]);return{flush:a,async schedule(d){const{promise:f,resolve:l,reject:p}=Ta();return n?.([...i(),d])&&o(),c().length>0?(u({args:d,resolve:l,reject:p}),f):(u({args:d,resolve:l,reject:p}),setTimeout(o,r),f)}}}async function ps(e,t){const{account:n=e.account,authorizationList:r,batch:s=!!e.batch?.multicall,blockNumber:o,blockTag:a=e.experimental_blockTag??"latest",accessList:i,blobs:c,blockOverrides:u,code:d,data:f,factory:l,factoryData:p,gas:h,gasPrice:y,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:A,nonce:v,to:b,value:g,stateOverride:E,...P}=t,T=n?Y(n):void 0;if(d&&(l||p))throw new $("Cannot provide both `code` & `factory`/`factoryData` as parameters.");if(d&&b)throw new $("Cannot provide both `code` & `to` as parameters.");const k=d&&f,x=l&&p&&b&&f,C=k||x,O=k?Vu({code:d,data:f}):x?Wh({data:f,factory:l,factoryData:p,to:b}):f;try{wt(t);const j=(typeof o=="bigint"?N(o):void 0)||a,I=u?zu(u):void 0,S=ia(E),M=e.chain?.formatters?.transactionRequest?.format,R=(M||Bt)({...vn(P,{format:M}),accessList:i,account:T,authorizationList:r,blobs:c,data:O,gas:h,gasPrice:y,maxFeePerBlobGas:m,maxFeePerGas:w,maxPriorityFeePerGas:A,nonce:v,to:C?void 0:b,value:g},"call");if(s&&qh({request:R})&&!S&&!I)try{return await Vh(e,{...R,blockNumber:o,blockTag:a})}catch(W){if(!(W instanceof ju)&&!(W instanceof Oo))throw W}const D=(()=>{const W=[R,j];return S&&I?[...W,S,I]:S?[...W,S]:I?[...W,{},I]:W})(),V=await e.request({method:"eth_call",params:D});return V==="0x"?{data:void 0}:{data:V}}catch(_){const j=Kh(_),{offchainLookup:I,offchainLookupSignature:S}=await uc(async()=>{const{offchainLookup:M,offchainLookupSignature:B}=await import("./BVo-BvKI.js");return{offchainLookup:M,offchainLookupSignature:B}},[],import.meta.url);if(e.ccipRead!==!1&&j?.slice(0,10)===S&&b)return{data:await I(e,{data:j,to:b})};throw C&&j?.slice(0,10)==="0x101bb98d"?new Sp({factory:l}):Hu(_,{...t,account:T,chain:e.chain})}}function qh({request:e}){const{data:t,to:n,...r}=e;return!(!t||t.startsWith(Uh)||!n||Object.values(r).filter(s=>typeof s<"u").length>0)}async function Vh(e,t){const{batchSize:n=1024,deployless:r=!1,wait:s=0}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},{blockNumber:o,blockTag:a=e.experimental_blockTag??"latest",data:i,to:c}=t,u=(()=>{if(r)return null;if(t.multicallAddress)return t.multicallAddress;if(e.chain)return xn({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new ju})(),f=(typeof o=="bigint"?N(o):void 0)||a,{schedule:l}=qu({id:`${e.uid}.${f}`,wait:s,shouldSplitBatch(y){return y.reduce((w,{data:A})=>w+(A.length-2),0)>n*2},fn:async y=>{const m=y.map(v=>({allowFailure:!0,callData:v.data,target:v.to})),w=pe({abi:Hr,args:[m],functionName:"aggregate3"}),A=await e.request({method:"eth_call",params:[{...u===null?{data:Vu({code:Pa,data:w})}:{to:u,data:w}},f]});return Yt({abi:Hr,args:[m],functionName:"aggregate3",data:A||"0x"})}}),[{returnData:p,success:h}]=await l({data:i,to:c});if(!h)throw new rs({data:p});return p==="0x"?{data:void 0}:{data:p}}function Vu(e){const{code:t,data:n}=e;return ls({abi:Ac(["constructor(bytes, bytes)"]),bytecode:Gu,args:[t,n]})}function Wh(e){const{data:t,factory:n,factoryData:r,to:s}=e;return ls({abi:Ac(["constructor(address, bytes, address, bytes)"]),bytecode:Dh,args:[s,t,n,r]})}function Kh(e){if(!(e instanceof $))return;const t=e.walk();return typeof t?.data=="object"?t.data?.data:t.data}async function Ze(e,t){const{abi:n,address:r,args:s,functionName:o,...a}=t,i=pe({abi:n,args:s,functionName:o});try{const{data:c}=await z(e,ps,"call")({...a,data:i,to:r});return Yt({abi:n,args:s,functionName:o,data:c||"0x"})}catch(c){throw jt(c,{abi:n,address:r,args:s,docsPath:"/docs/contract/readContract",functionName:o})}}async function Zh(e,t){const{abi:n,address:r,args:s,dataSuffix:o,functionName:a,...i}=t,c=i.account?Y(i.account):e.account,u=pe({abi:n,args:s,functionName:a});try{const{data:d}=await z(e,ps,"call")({batch:!1,data:`${u}${o?o.replace("0x",""):""}`,to:r,...i,account:c}),f=Yt({abi:n,args:s,functionName:a,data:d||"0x"}),l=n.filter(p=>"name"in p&&p.name===t.functionName);return{result:f,request:{abi:l,address:r,args:s,dataSuffix:o,functionName:a,...i,account:c}}}catch(d){throw jt(d,{abi:n,address:r,args:s,docsPath:"/docs/contract/simulateContract",functionName:a,sender:c?.address})}}const Vs=new Map,Mi=new Map;let Yh=0;function mt(e,t,n){const r=++Yh,s=()=>Vs.get(e)||[],o=()=>{const d=s();Vs.set(e,d.filter(f=>f.id!==r))},a=()=>{const d=s();if(!d.some(l=>l.id===r))return;const f=Mi.get(e);if(d.length===1&&f){const l=f();l instanceof Promise&&l.catch(()=>{})}o()},i=s();if(Vs.set(e,[...i,{id:r,fns:t}]),i&&i.length>0)return a;const c={};for(const d in t)c[d]=((...f)=>{const l=s();if(l.length!==0)for(const p of l)p.fns[d]?.(...f)});const u=n(c);return typeof u=="function"&&Mi.set(e,u),a}async function _o(e){return new Promise(t=>setTimeout(t,e))}function En(e,{emitOnBegin:t,initialWaitTime:n,interval:r}){let s=!0;const o=()=>s=!1;return(async()=>{let i;t&&(i=await e({unpoll:o}));const c=await n?.(i)??r;await _o(c);const u=async()=>{s&&(await e({unpoll:o}),await _o(r),u())};u()})(),o}const Jh=new Map,Xh=new Map;function Qh(e){const t=(s,o)=>({clear:()=>o.delete(s),get:()=>o.get(s),set:a=>o.set(s,a)}),n=t(e,Jh),r=t(e,Xh);return{clear:()=>{n.clear(),r.clear()},promise:n,response:r}}async function e1(e,{cacheKey:t,cacheTime:n=Number.POSITIVE_INFINITY}){const r=Qh(t),s=r.response.get();if(s&&n>0&&Date.now()-s.created.getTime()<n)return s.data;let o=r.promise.get();o||(o=e(),r.promise.set(o));try{const a=await o;return r.response.set({created:new Date,data:a}),a}finally{r.promise.clear()}}const t1=e=>`blockNumber.${e}`;async function vr(e,{cacheTime:t=e.cacheTime}={}){const n=await e1(()=>e.request({method:"eth_blockNumber"}),{cacheKey:t1(e.uid),cacheTime:t});return BigInt(n)}async function hs(e,{filter:t}){const n="strict"in t&&t.strict,r=await t.request({method:"eth_getFilterChanges",params:[t.id]});if(typeof r[0]=="string")return r;const s=r.map(o=>yt(o));return!("abi"in t)||!t.abi?s:ga({abi:t.abi,logs:s,strict:n})}async function bs(e,{filter:t}){return t.request({method:"eth_uninstallFilter",params:[t.id]})}function n1(e,t){const{abi:n,address:r,args:s,batch:o=!0,eventName:a,fromBlock:i,onError:c,onLogs:u,poll:d,pollingInterval:f=e.pollingInterval,strict:l}=t;return(typeof d<"u"?d:typeof i=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")))?(()=>{const m=l??!1,w=ce(["watchContractEvent",r,s,o,e.uid,a,f,m,i]);return mt(w,{onLogs:u,onError:c},A=>{let v;i!==void 0&&(v=i-1n);let b,g=!1;const E=En(async()=>{if(!g){try{b=await z(e,Kc,"createContractEventFilter")({abi:n,address:r,args:s,eventName:a,strict:m,fromBlock:i})}catch{}g=!0;return}try{let P;if(b)P=await z(e,hs,"getFilterChanges")({filter:b});else{const T=await z(e,vr,"getBlockNumber")({});v&&v<T?P=await z(e,Eu,"getContractEvents")({abi:n,address:r,args:s,eventName:a,fromBlock:v+1n,toBlock:T,strict:m}):P=[],v=T}if(P.length===0)return;if(o)A.onLogs(P);else for(const T of P)A.onLogs([T])}catch(P){b&&P instanceof St&&(g=!1),A.onError?.(P)}},{emitOnBegin:!0,interval:f});return async()=>{b&&await z(e,bs,"uninstallFilter")({filter:b}),E()}})})():(()=>{const m=l??!1,w=ce(["watchContractEvent",r,s,o,e.uid,a,f,m]);let A=!0,v=()=>A=!1;return mt(w,{onLogs:u,onError:c},b=>((async()=>{try{const g=(()=>{if(e.transport.type==="fallback"){const T=e.transport.transports.find(k=>k.config.type==="webSocket"||k.config.type==="ipc");return T?T.value:e.transport}return e.transport})(),E=a?fr({abi:n,eventName:a,args:s}):[],{unsubscribe:P}=await g.subscribe({params:["logs",{address:r,topics:E}],onData(T){if(!A)return;const k=T.result;try{const{eventName:x,args:C}=Dr({abi:n,data:k.data,topics:k.topics,strict:l}),O=yt(k,{args:C,eventName:x});b.onLogs([O])}catch(x){let C,O;if(x instanceof Lr||x instanceof Xo){if(l)return;C=x.abiItem.name,O=x.abiItem.inputs?.some(j=>!("name"in j&&j.name))}const _=yt(k,{args:O?[]:{},eventName:C});b.onLogs([_])}},onError(T){b.onError?.(T)}});v=P,A||v()}catch(g){c?.(g)}})(),()=>v()))})()}class kt extends ${constructor({docsPath:t}={}){super(["Could not find an Account to execute with this Action.","Please provide an Account with the `account` argument on the Action, or by supplying an `account` to the Client."].join(`
`),{docsPath:t,docsSlug:"account",name:"AccountNotFoundError"})}}class Ut extends ${constructor({docsPath:t,metaMessages:n,type:r}){super(`Account type "${r}" is not supported.`,{docsPath:t,metaMessages:n,name:"AccountTypeNotSupportedError"})}}function $a({chain:e,currentChainId:t}){if(!e)throw new Hh;if(t!==e.id)throw new jh({chain:e,currentChainId:t})}async function Ia(e,{serializedTransaction:t}){return e.request({method:"eth_sendRawTransaction",params:[t]},{retryCount:0})}const Ws=new wn(128);async function ys(e,t){const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:o,blobs:a,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:l,nonce:p,type:h,value:y,...m}=t;if(typeof n>"u")throw new kt({docsPath:"/docs/actions/wallet/sendTransaction"});const w=n?Y(n):null;try{wt(t);const A=await(async()=>{if(t.to)return t.to;if(t.to!==null&&o&&o.length>0)return await ss({authorization:o[0]}).catch(()=>{throw new $("`to` is required. Could not infer from `authorizationList`.")})})();if(w?.type==="json-rpc"||w===null){let v;r!==null&&(v=await z(e,Ct,"getChainId")({}),$a({currentChainId:v,chain:r}));const b=e.chain?.formatters?.transactionRequest?.format,E=(b||Bt)({...vn(m,{format:b}),accessList:s,account:w,authorizationList:o,blobs:a,chainId:v,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:l,nonce:p,to:A,type:h,value:y},"sendTransaction"),P=Ws.get(e.uid),T=P?"wallet_sendTransaction":"eth_sendTransaction";try{return await e.request({method:T,params:[E]},{retryCount:0})}catch(k){if(P===!1)throw k;const x=k;if(x.name==="InvalidInputRpcError"||x.name==="InvalidParamsRpcError"||x.name==="MethodNotFoundRpcError"||x.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[E]},{retryCount:0}).then(C=>(Ws.set(e.uid,!0),C)).catch(C=>{const O=C;throw O.name==="MethodNotFoundRpcError"||O.name==="MethodNotSupportedRpcError"?(Ws.set(e.uid,!1),x):O});throw x}}if(w?.type==="local"){const v=await z(e,br,"prepareTransactionRequest")({account:w,accessList:s,authorizationList:o,blobs:a,chain:r,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:l,nonce:p,nonceManager:w.nonceManager,parameters:[...ya,"sidecars"],type:h,value:y,...m,to:A}),b=r?.serializers?.transaction,g=await w.signTransaction(v,{serializer:b});return await z(e,Ia,"sendRawTransaction")({serializedTransaction:g})}throw w?.type==="smart"?new Ut({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Ut({docsPath:"/docs/actions/wallet/sendTransaction",type:w?.type})}catch(A){throw A instanceof Ut?A:is(A,{...t,account:w,chain:t.chain||void 0})}}async function or(e,t){return or.internal(e,ys,"sendTransaction",t)}(function(e){async function t(n,r,s,o){const{abi:a,account:i=n.account,address:c,args:u,dataSuffix:d,functionName:f,...l}=o;if(typeof i>"u")throw new kt({docsPath:"/docs/contract/writeContract"});const p=i?Y(i):null,h=pe({abi:a,args:u,functionName:f});try{return await z(n,r,s)({data:`${h}${d?d.replace("0x",""):""}`,to:c,account:p,...l})}catch(y){throw jt(y,{abi:a,address:c,args:u,docsPath:"/docs/contract/writeContract",functionName:f,sender:p?.address})}}e.internal=t})(or||(or={}));class r1 extends ${constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}function qr(e,{delay:t=100,retryCount:n=2,shouldRetry:r=()=>!0}={}){return new Promise((s,o)=>{const a=async({count:i=0}={})=>{const c=async({error:u})=>{const d=typeof t=="function"?t({count:i,error:u}):t;d&&await _o(d),a({count:i+1})};try{const u=await e();s(u)}catch(u){if(i<n&&await r({count:i,error:u}))return c({error:u});o(u)}};a()})}const Wu={"0x0":"reverted","0x1":"success"};function Ku(e,t){const n={...e,blockNumber:e.blockNumber?BigInt(e.blockNumber):null,contractAddress:e.contractAddress?e.contractAddress:null,cumulativeGasUsed:e.cumulativeGasUsed?BigInt(e.cumulativeGasUsed):null,effectiveGasPrice:e.effectiveGasPrice?BigInt(e.effectiveGasPrice):null,gasUsed:e.gasUsed?BigInt(e.gasUsed):null,logs:e.logs?e.logs.map(r=>yt(r)):null,to:e.to?e.to:null,transactionIndex:e.transactionIndex?Le(e.transactionIndex):null,status:e.status?Wu[e.status]:null,type:e.type?lu[e.type]||e.type:null};return e.blobGasPrice&&(n.blobGasPrice=BigInt(e.blobGasPrice)),e.blobGasUsed&&(n.blobGasUsed=BigInt(e.blobGasUsed)),n}const Zu="0x5792579257925792579257925792579257925792579257925792579257925792",Yu=N(0,{size:32});async function Ju(e,t){const{account:n=e.account,capabilities:r,chain:s=e.chain,experimental_fallback:o,experimental_fallbackDelay:a=32,forceAtomic:i=!1,id:c,version:u="2.0.0"}=t,d=n?Y(n):null,f=t.calls.map(l=>{const p=l,h=p.abi?pe({abi:p.abi,functionName:p.functionName,args:p.args}):p.data;return{data:p.dataSuffix&&h?Ue([h,p.dataSuffix]):h,to:p.to,value:p.value?N(p.value):void 0}});try{const l=await e.request({method:"wallet_sendCalls",params:[{atomicRequired:i,calls:f,capabilities:r,chainId:N(s.id),from:d?.address,id:c,version:u}]},{retryCount:0});return typeof l=="string"?{id:l}:l}catch(l){const p=l;if(o&&(p.name==="MethodNotFoundRpcError"||p.name==="MethodNotSupportedRpcError"||p.name==="UnknownRpcError"||p.details.toLowerCase().includes("does not exist / is not available")||p.details.toLowerCase().includes("missing or invalid. request()")||p.details.toLowerCase().includes("did not match any variant of untagged enum")||p.details.toLowerCase().includes("account upgraded to unsupported contract")||p.details.toLowerCase().includes("eip-7702 not supported")||p.details.toLowerCase().includes("unsupported wc_ method")||p.details.toLowerCase().includes("feature toggled misconfigured")||p.details.toLowerCase().includes("jsonrpcengine: response has no error or result for request"))){if(r&&Object.values(r).some(A=>!A.optional)){const A="non-optional `capabilities` are not supported on fallback to `eth_sendTransaction`.";throw new hn(new $(A,{details:A}))}if(i&&f.length>1){const w="`forceAtomic` is not supported on fallback to `eth_sendTransaction`.";throw new bn(new $(w,{details:w}))}const h=[];for(const w of f){const A=ys(e,{account:d,chain:s,data:w.data,to:w.to,value:w.value?ke(w.value):void 0});h.push(A),a>0&&await new Promise(v=>setTimeout(v,a))}const y=await Promise.allSettled(h);if(y.every(w=>w.status==="rejected"))throw y[0].reason;const m=y.map(w=>w.status==="fulfilled"?w.value:Yu);return{id:Ue([...m,N(s.id,{size:32}),Zu])}}throw is(l,{...t,account:d,chain:t.chain})}}async function Xu(e,t){async function n(d){if(d.endsWith(Zu.slice(2))){const l=ze(go(d,-64,-32)),p=go(d,0,-64).slice(2).match(/.{1,64}/g),h=await Promise.all(p.map(m=>Yu.slice(2)!==m?e.request({method:"eth_getTransactionReceipt",params:[`0x${m}`]},{dedupe:!0}):void 0)),y=h.some(m=>m===null)?100:h.every(m=>m?.status==="0x1")?200:h.every(m=>m?.status==="0x0")?500:600;return{atomic:!1,chainId:Le(l),receipts:h.filter(Boolean),status:y,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[d]})}const{atomic:r=!1,chainId:s,receipts:o,version:a="2.0.0",...i}=await n(t.id),[c,u]=(()=>{const d=i.status;return d>=100&&d<200?["pending",d]:d>=200&&d<300?["success",d]:d>=300&&d<700?["failure",d]:d==="CONFIRMED"?["success",200]:d==="PENDING"?["pending",100]:[void 0,d]})();return{...i,atomic:r,chainId:s?Le(s):void 0,receipts:o?.map(d=>({...d,blockNumber:ke(d.blockNumber),gasUsed:ke(d.gasUsed),status:Wu[d.status]}))??[],statusCode:u,status:c,version:a}}async function Qu(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:s=({statusCode:y})=>y===200||y>=300,retryCount:o=4,retryDelay:a=({count:y})=>~~(1<<y)*200,timeout:i=6e4,throwOnFailure:c=!1}=t,u=ce(["waitForCallsStatus",e.uid,n]),{promise:d,resolve:f,reject:l}=Ta();let p;const h=mt(u,{resolve:f,reject:l},y=>{const m=En(async()=>{const w=A=>{clearTimeout(p),m(),A(),h()};try{const A=await qr(async()=>{const v=await z(e,Xu,"getCallsStatus")({id:n});if(c&&v.status==="failure")throw new r1(v);return v},{retryCount:o,delay:a});if(!s(A))return;w(()=>y.resolve(A))}catch(A){w(()=>y.reject(A))}},{interval:r,emitOnBegin:!0});return m});return p=i?setTimeout(()=>{h(),clearTimeout(p),l(new s1({id:n}))},i):void 0,await d}class s1 extends ${constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}const Mo=256;let Cr=Mo,kr;function e0(e=11){if(!kr||Cr+e>Mo*2){kr="",Cr=0;for(let t=0;t<Mo;t++)kr+=(256+Math.random()*256|0).toString(16).substring(1)}return kr.substring(Cr,Cr+++e)}function t0(e){const{batch:t,chain:n,ccipRead:r,key:s="base",name:o="Base Client",type:a="base"}=e,i=e.experimental_blockTag??(typeof n?.experimental_preconfirmationTime=="number"?"pending":void 0),c=n?.blockTime??12e3,u=Math.min(Math.max(Math.floor(c/2),500),4e3),d=e.pollingInterval??u,f=e.cacheTime??d,l=e.account?Y(e.account):void 0,{config:p,request:h,value:y}=e.transport({account:l,chain:n,pollingInterval:d}),m={...p,...y},w={account:l,batch:t,cacheTime:f,ccipRead:r,chain:n,key:s,name:o,pollingInterval:d,request:h,transport:m,type:a,uid:e0(),...i?{experimental_blockTag:i}:{}};function A(v){return b=>{const g=b(v);for(const P in w)delete g[P];const E={...v,...g};return Object.assign(E,{extend:A(E)})}}return Object.assign(w,{extend:A(w)})}function Sa(e){if(!(e instanceof $))return!1;const t=e.walk(n=>n instanceof xo);return t instanceof xo?t.data?.errorName==="HttpError"||t.data?.errorName==="ResolverError"||t.data?.errorName==="ResolverNotContract"||t.data?.errorName==="ResolverNotFound"||t.data?.errorName==="ReverseAddressMismatch"||t.data?.errorName==="UnsupportedResolverProfile":!1}function o1(e){const{abi:t,data:n}=e,r=Dt(n,0,4),s=t.find(o=>o.type==="function"&&r===dr(He(o)));if(!s)throw new el(r,{docsPath:"/docs/contract/decodeFunctionData"});return{functionName:s.name,args:"inputs"in s&&s.inputs&&s.inputs.length>0?lr(s.inputs,Dt(n,4)):void 0}}const Ks="/docs/contract/encodeErrorResult";function Ri(e){const{abi:t,errorName:n,args:r}=e;let s=t[0];if(n){const c=Zt({abi:t,args:r,name:n});if(!c)throw new si(n,{docsPath:Ks});s=c}if(s.type!=="error")throw new si(void 0,{docsPath:Ks});const o=He(s),a=dr(o);let i="0x";if(r&&r.length>0){if(!s.inputs)throw new Jf(s.name,{docsPath:Ks});i=Ne(s.inputs,r)}return rt([a,i])}const Zs="/docs/contract/encodeFunctionResult";function a1(e){const{abi:t,functionName:n,result:r}=e;let s=t[0];if(n){const a=Zt({abi:t,name:n});if(!a)throw new fn(n,{docsPath:Zs});s=a}if(s.type!=="function")throw new fn(void 0,{docsPath:Zs});if(!s.outputs)throw new Sc(s.name,{docsPath:Zs});const o=(()=>{if(s.outputs.length===0)return[];if(s.outputs.length===1)return[r];if(Array.isArray(r))return r;throw new Bc(r)})();return Ne(s.outputs,o)}const ms="x-batch-gateway:true";async function i1(e){const{data:t,ccipRequest:n}=e,{args:[r]}=o1({abi:No,data:t}),s=[],o=[];return await Promise.all(r.map(async(a,i)=>{try{o[i]=a.urls.includes(ms)?await i1({data:a.data,ccipRequest:n}):await n(a),s[i]=!1}catch(c){s[i]=!0,o[i]=c1(c)}})),a1({abi:No,functionName:"query",result:[s,o]})}function c1(e){return e.name==="HttpRequestError"&&e.status?Ri({abi:No,errorName:"HttpError",args:[e.status,e.shortMessage]}):Ri({abi:[Zc],errorName:"Error",args:["shortMessage"in e?e.shortMessage:e.message]})}function n0(e){if(e.length!==66||e.indexOf("[")!==0||e.indexOf("]")!==65)return null;const t=`0x${e.slice(1,65)}`;return qe(t)?t:null}function Ro(e){let t=new Uint8Array(32).fill(0);if(!e)return se(t);const n=e.split(".");for(let r=n.length-1;r>=0;r-=1){const s=n0(n[r]),o=s?gn(s):le(Ft(n[r]),"bytes");t=le(Ue([t,o]),"bytes")}return se(t)}function u1(e){return`[${e.slice(2)}]`}function d1(e){const t=new Uint8Array(32).fill(0);return e?n0(e)||le(Ft(e)):se(t)}function Ba(e){const t=e.replace(/^\.|\.$/gm,"");if(t.length===0)return new Uint8Array(1);const n=new Uint8Array(Ft(t).byteLength+2);let r=0;const s=t.split(".");for(let o=0;o<s.length;o++){let a=Ft(s[o]);a.byteLength>255&&(a=Ft(u1(d1(s[o])))),n[r]=a.length,n.set(a,r+1),r+=a.length+1}return n.byteLength!==r+1?n.slice(0,r+1):n}async function f1(e,t){const{blockNumber:n,blockTag:r,coinType:s,name:o,gatewayUrls:a,strict:i}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xn({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),d=c?.ensTlds;if(d&&!d.some(l=>o.endsWith(l)))return null;const f=s!=null?[Ro(o),BigInt(s)]:[Ro(o)];try{const l=pe({abi:Oi,functionName:"addr",args:f}),p={address:u,abi:Uu,functionName:"resolveWithGateways",args:[Q(Ba(o)),l,a??[ms]],blockNumber:n,blockTag:r},y=await z(e,Ze,"readContract")(p);if(y[0]==="0x")return null;const m=Yt({abi:Oi,args:f,functionName:"addr",data:y[0]});return m==="0x"||ze(m)==="0x00"?null:m}catch(l){if(i)throw l;if(Sa(l))return null;throw l}}class l1 extends ${constructor({data:t}){super("Unable to extract image from metadata. The metadata may be malformed or invalid.",{metaMessages:["- Metadata must be a JSON object with at least an `image`, `image_url` or `image_data` property.","",`Provided data: ${JSON.stringify(t)}`],name:"EnsAvatarInvalidMetadataError"})}}class Sn extends ${constructor({reason:t}){super(`ENS NFT avatar URI is invalid. ${t}`,{name:"EnsAvatarInvalidNftUriError"})}}class Ca extends ${constructor({uri:t}){super(`Unable to resolve ENS avatar URI "${t}". The URI may be malformed, invalid, or does not respond with a valid image.`,{name:"EnsAvatarUriResolutionError"})}}class p1 extends ${constructor({namespace:t}){super(`ENS NFT avatar namespace "${t}" is not supported. Must be "erc721" or "erc1155".`,{name:"EnsAvatarUnsupportedNamespaceError"})}}const h1=/(?<protocol>https?:\/\/[^/]*|ipfs:\/|ipns:\/|ar:\/)?(?<root>\/)?(?<subpath>ipfs\/|ipns\/)?(?<target>[\w\-.]+)(?<subtarget>\/.*)?/,b1=/^(Qm[1-9A-HJ-NP-Za-km-z]{44,}|b[A-Za-z2-7]{58,}|B[A-Z2-7]{58,}|z[1-9A-HJ-NP-Za-km-z]{48,}|F[0-9A-F]{50,})(\/(?<target>[\w\-.]+))?(?<subtarget>\/.*)?$/,y1=/^data:([a-zA-Z\-/+]*);base64,([^"].*)/,m1=/^data:([a-zA-Z\-/+]*)?(;[a-zA-Z0-9].*?)?(,)/;async function g1(e){try{const t=await fetch(e,{method:"HEAD"});return t.status===200?t.headers.get("content-type")?.startsWith("image/"):!1}catch(t){return typeof t=="object"&&typeof t.response<"u"||!Object.hasOwn(globalThis,"Image")?!1:new Promise(n=>{const r=new Image;r.onload=()=>{n(!0)},r.onerror=()=>{n(!1)},r.src=e})}}function Fi(e,t){return e?e.endsWith("/")?e.slice(0,-1):e:t}function r0({uri:e,gatewayUrls:t}){const n=y1.test(e);if(n)return{uri:e,isOnChain:!0,isEncoded:n};const r=Fi(t?.ipfs,"https://ipfs.io"),s=Fi(t?.arweave,"https://arweave.net"),o=e.match(h1),{protocol:a,subpath:i,target:c,subtarget:u=""}=o?.groups||{},d=a==="ipns:/"||i==="ipns/",f=a==="ipfs:/"||i==="ipfs/"||b1.test(e);if(e.startsWith("http")&&!d&&!f){let p=e;return t?.arweave&&(p=e.replace(/https:\/\/arweave.net/g,t?.arweave)),{uri:p,isOnChain:!1,isEncoded:!1}}if((d||f)&&c)return{uri:`${r}/${d?"ipns":"ipfs"}/${c}${u}`,isOnChain:!1,isEncoded:!1};if(a==="ar:/"&&c)return{uri:`${s}/${c}${u||""}`,isOnChain:!1,isEncoded:!1};let l=e.replace(m1,"");if(l.startsWith("<svg")&&(l=`data:image/svg+xml;base64,${btoa(l)}`),l.startsWith("data:")||l.startsWith("{"))return{uri:l,isOnChain:!0,isEncoded:!1};throw new Ca({uri:e})}function s0(e){if(typeof e!="object"||!("image"in e)&&!("image_url"in e)&&!("image_data"in e))throw new l1({data:e});return e.image||e.image_url||e.image_data}async function w1({gatewayUrls:e,uri:t}){try{const n=await fetch(t).then(s=>s.json());return await ka({gatewayUrls:e,uri:s0(n)})}catch{throw new Ca({uri:t})}}async function ka({gatewayUrls:e,uri:t}){const{uri:n,isOnChain:r}=r0({uri:t,gatewayUrls:e});if(r||await g1(n))return n;throw new Ca({uri:t})}function v1(e){let t=e;t.startsWith("did:nft:")&&(t=t.replace("did:nft:","").replace(/_/g,"/"));const[n,r,s]=t.split("/"),[o,a]=n.split(":"),[i,c]=r.split(":");if(!o||o.toLowerCase()!=="eip155")throw new Sn({reason:"Only EIP-155 supported"});if(!a)throw new Sn({reason:"Chain ID not found"});if(!c)throw new Sn({reason:"Contract address not found"});if(!s)throw new Sn({reason:"Token ID not found"});if(!i)throw new Sn({reason:"ERC namespace not found"});return{chainID:Number.parseInt(a,10),namespace:i.toLowerCase(),contractAddress:c,tokenID:s}}async function x1(e,{nft:t}){if(t.namespace==="erc721")return Ze(e,{address:t.contractAddress,abi:[{name:"tokenURI",type:"function",stateMutability:"view",inputs:[{name:"tokenId",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"tokenURI",args:[BigInt(t.tokenID)]});if(t.namespace==="erc1155")return Ze(e,{address:t.contractAddress,abi:[{name:"uri",type:"function",stateMutability:"view",inputs:[{name:"_id",type:"uint256"}],outputs:[{name:"",type:"string"}]}],functionName:"uri",args:[BigInt(t.tokenID)]});throw new p1({namespace:t.namespace})}async function E1(e,{gatewayUrls:t,record:n}){return/eip155:/i.test(n)?A1(e,{gatewayUrls:t,record:n}):ka({uri:n,gatewayUrls:t})}async function A1(e,{gatewayUrls:t,record:n}){const r=v1(n),s=await x1(e,{nft:r}),{uri:o,isOnChain:a,isEncoded:i}=r0({uri:s,gatewayUrls:t});if(a&&(o.includes("data:application/json;base64,")||o.startsWith("{"))){const u=i?atob(o.replace("data:application/json;base64,","")):o,d=JSON.parse(u);return ka({uri:s0(d),gatewayUrls:t})}let c=r.tokenID;return r.namespace==="erc1155"&&(c=c.replace("0x","").padStart(64,"0")),w1({gatewayUrls:t,uri:o.replace(/(?:0x)?{id}/,c)})}async function o0(e,t){const{blockNumber:n,blockTag:r,key:s,name:o,gatewayUrls:a,strict:i}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xn({blockNumber:n,chain:c,contract:"ensUniversalResolver"})})(),d=c?.ensTlds;if(d&&!d.some(f=>o.endsWith(f)))return null;try{const f={address:u,abi:Uu,args:[Q(Ba(o)),pe({abi:Ni,functionName:"text",args:[Ro(o),s]}),a??[ms]],functionName:"resolveWithGateways",blockNumber:n,blockTag:r},p=await z(e,Ze,"readContract")(f);if(p[0]==="0x")return null;const h=Yt({abi:Ni,functionName:"text",data:p[0]});return h===""?null:h}catch(f){if(i)throw f;if(Sa(f))return null;throw f}}async function P1(e,{blockNumber:t,blockTag:n,assetGatewayUrls:r,name:s,gatewayUrls:o,strict:a,universalResolverAddress:i}){const c=await z(e,o0,"getEnsText")({blockNumber:t,blockTag:n,key:"avatar",name:s,universalResolverAddress:i,gatewayUrls:o,strict:a});if(!c)return null;try{return await E1(e,{record:c,gatewayUrls:r})}catch{return null}}async function T1(e,t){const{address:n,blockNumber:r,blockTag:s,coinType:o=60n,gatewayUrls:a,strict:i}=t,{chain:c}=e,u=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!c)throw new Error("client chain not configured. universalResolverAddress is required.");return xn({blockNumber:r,chain:c,contract:"ensUniversalResolver"})})();try{const d={address:u,abi:Lh,args:[n,o,a??[ms]],functionName:"reverseWithGateways",blockNumber:r,blockTag:s},f=z(e,Ze,"readContract"),[l]=await f(d);return l||null}catch(d){if(i)throw d;if(Sa(d))return null;throw d}}async function $1(e,t){const{blockNumber:n,blockTag:r,name:s}=t,{chain:o}=e,a=(()=>{if(t.universalResolverAddress)return t.universalResolverAddress;if(!o)throw new Error("client chain not configured. universalResolverAddress is required.");return xn({blockNumber:n,chain:o,contract:"ensUniversalResolver"})})(),i=o?.ensTlds;if(i&&!i.some(u=>s.endsWith(u)))throw new Error(`${s} is not a valid ENS TLD (${i?.join(", ")}) for chain "${o.name}" (id: ${o.id}).`);const[c]=await z(e,Ze,"readContract")({address:a,abi:[{inputs:[{type:"bytes"}],name:"findResolver",outputs:[{type:"address"},{type:"bytes32"},{type:"uint256"}],stateMutability:"view",type:"function"}],functionName:"findResolver",args:[Q(Ba(s))],blockNumber:n,blockTag:r});return c}async function a0(e,t){const{account:n=e.account,blockNumber:r,blockTag:s="latest",blobs:o,data:a,gas:i,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,to:l,value:p,...h}=t,y=n?Y(n):void 0;try{wt(t);const w=(typeof r=="bigint"?N(r):void 0)||s,A=e.chain?.formatters?.transactionRequest?.format,b=(A||Bt)({...vn(h,{format:A}),account:y,blobs:o,data:a,gas:i,gasPrice:c,maxFeePerBlobGas:u,maxFeePerGas:d,maxPriorityFeePerGas:f,to:l,value:p},"createAccessList"),g=await e.request({method:"eth_createAccessList",params:[b,w]});return{accessList:g.accessList,gasUsed:BigInt(g.gasUsed)}}catch(m){throw Hu(m,{...t,account:y,chain:e.chain})}}async function I1(e){const t=ns(e,{method:"eth_newBlockFilter"}),n=await e.request({method:"eth_newBlockFilter"});return{id:n,request:t(n),type:"block"}}async function i0(e,{address:t,args:n,event:r,events:s,fromBlock:o,strict:a,toBlock:i}={}){const c=s??(r?[r]:void 0),u=ns(e,{method:"eth_newFilter"});let d=[];c&&(d=[c.flatMap(p=>fr({abi:[p],eventName:p.name,args:n}))],r&&(d=d[0]));const f=await e.request({method:"eth_newFilter",params:[{address:t,fromBlock:typeof o=="bigint"?N(o):o,toBlock:typeof i=="bigint"?N(i):i,...d.length?{topics:d}:{}}]});return{abi:c,args:n,eventName:r?r.name:void 0,fromBlock:o,id:f,request:u(f),strict:!!a,toBlock:i,type:"event"}}async function c0(e){const t=ns(e,{method:"eth_newPendingTransactionFilter"}),n=await e.request({method:"eth_newPendingTransactionFilter"});return{id:n,request:t(n),type:"transaction"}}async function S1(e,{address:t,blockNumber:n,blockTag:r=e.experimental_blockTag??"latest"}){const s=typeof n=="bigint"?N(n):void 0,o=await e.request({method:"eth_getBalance",params:[t,s||r]});return BigInt(o)}async function B1(e){const t=await e.request({method:"eth_blobBaseFee"});return BigInt(t)}async function C1(e,{blockHash:t,blockNumber:n,blockTag:r="latest"}={}){const s=n!==void 0?N(n):void 0;let o;return t?o=await e.request({method:"eth_getBlockTransactionCountByHash",params:[t]},{dedupe:!0}):o=await e.request({method:"eth_getBlockTransactionCountByNumber",params:[s||r]},{dedupe:!!s}),Le(o)}async function Fo(e,{address:t,blockNumber:n,blockTag:r="latest"}){const s=n!==void 0?N(n):void 0,o=await e.request({method:"eth_getCode",params:[t,s||r]},{dedupe:!!s});if(o!=="0x")return o}class k1 extends ${constructor({address:t}){super(`No EIP-712 domain found on contract "${t}".`,{metaMessages:["Ensure that:",`- The contract is deployed at the address "${t}".`,"- `eip712Domain()` function exists on the contract.","- `eip712Domain()` function matches signature to ERC-5267 specification."],name:"Eip712DomainNotFoundError"})}}async function N1(e,t){const{address:n,factory:r,factoryData:s}=t;try{const[o,a,i,c,u,d,f]=await z(e,Ze,"readContract")({abi:O1,address:n,functionName:"eip712Domain",factory:r,factoryData:s});return{domain:{name:a,version:i,chainId:Number(c),verifyingContract:u,salt:d},extensions:f,fields:o}}catch(o){const a=o;throw a.name==="ContractFunctionExecutionError"&&a.cause.name==="ContractFunctionZeroDataError"?new k1({address:n}):a}}const O1=[{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"}];function _1(e){return{baseFeePerGas:e.baseFeePerGas.map(t=>BigInt(t)),gasUsedRatio:e.gasUsedRatio,oldestBlock:BigInt(e.oldestBlock),reward:e.reward?.map(t=>t.map(n=>BigInt(n)))}}async function M1(e,{blockCount:t,blockNumber:n,blockTag:r="latest",rewardPercentiles:s}){const o=typeof n=="bigint"?N(n):void 0,a=await e.request({method:"eth_feeHistory",params:[N(t),o||r,s]},{dedupe:!!o});return _1(a)}async function R1(e,{filter:t}){const n=t.strict??!1,s=(await t.request({method:"eth_getFilterLogs",params:[t.id]})).map(o=>yt(o));return t.abi?ga({abi:t.abi,logs:s,strict:n}):s}function F1(e){const{authorizationList:t}=e;if(t)for(const n of t){const{chainId:r}=n,s=n.address;if(!ue(s))throw new we({address:s});if(r<0)throw new fs({chainId:r})}Na(e)}function z1(e){const{blobVersionedHashes:t}=e;if(t){if(t.length===0)throw new wu;for(const n of t){const r=J(n),s=Le(Dt(n,0,1));if(r!==32)throw new th({hash:n,size:r});if(s!==gu)throw new nh({hash:n,version:s})}}Na(e)}function Na(e){const{chainId:t,maxPriorityFeePerGas:n,maxFeePerGas:r,to:s}=e;if(t<=0)throw new fs({chainId:t});if(s&&!ue(s))throw new we({address:s});if(r&&r>as)throw new qt({maxFeePerGas:r});if(n&&r&&n>r)throw new nr({maxFeePerGas:r,maxPriorityFeePerGas:n})}function L1(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(t<=0)throw new fs({chainId:t});if(o&&!ue(o))throw new we({address:o});if(n||s)throw new $("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(r&&r>as)throw new qt({maxFeePerGas:r})}function U1(e){const{chainId:t,maxPriorityFeePerGas:n,gasPrice:r,maxFeePerGas:s,to:o}=e;if(o&&!ue(o))throw new we({address:o});if(typeof t<"u"&&t<=0)throw new fs({chainId:t});if(n||s)throw new $("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(r&&r>as)throw new qt({maxFeePerGas:r})}function gs(e){if(!e||e.length===0)return[];const t=[];for(let n=0;n<e.length;n++){const{address:r,storageKeys:s}=e[n];for(let o=0;o<s.length;o++)if(s[o].length-2!==64)throw new Ap({storageKey:s[o]});if(!ue(r,{strict:!1}))throw new we({address:r});t.push([r,s])}return t}function D1(e,t){const n=xu(e);return n==="eip1559"?H1(e,t):n==="eip2930"?q1(e,t):n==="eip4844"?j1(e,t):n==="eip7702"?G1(e,t):V1(e,t)}function G1(e,t){const{authorizationList:n,chainId:r,gas:s,nonce:o,to:a,value:i,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:d,data:f}=e;F1(e);const l=gs(d),p=W1(n);return rt(["0x04",Ht([N(r),o?N(o):"0x",u?N(u):"0x",c?N(c):"0x",s?N(s):"0x",a??"0x",i?N(i):"0x",f??"0x",l,p,...xr(e,t)])])}function j1(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:a,maxFeePerBlobGas:i,maxFeePerGas:c,maxPriorityFeePerGas:u,accessList:d,data:f}=e;z1(e);let l=e.blobVersionedHashes,p=e.sidecars;if(e.blobs&&(typeof l>"u"||typeof p>"u")){const v=typeof e.blobs[0]=="string"?e.blobs:e.blobs.map(E=>se(E)),b=e.kzg,g=la({blobs:v,kzg:b});if(typeof l>"u"&&(l=bu({commitments:g})),typeof p>"u"){const E=pa({blobs:v,commitments:g,kzg:b});p=vu({blobs:v,commitments:g,proofs:E})}}const h=gs(d),y=[N(n),s?N(s):"0x",u?N(u):"0x",c?N(c):"0x",r?N(r):"0x",o??"0x",a?N(a):"0x",f??"0x",h,i?N(i):"0x",l??[],...xr(e,t)],m=[],w=[],A=[];if(p)for(let v=0;v<p.length;v++){const{blob:b,commitment:g,proof:E}=p[v];m.push(b),w.push(g),A.push(E)}return rt(["0x03",Ht(p?[y,m,w,A]:y)])}function H1(e,t){const{chainId:n,gas:r,nonce:s,to:o,value:a,maxFeePerGas:i,maxPriorityFeePerGas:c,accessList:u,data:d}=e;Na(e);const f=gs(u),l=[N(n),s?N(s):"0x",c?N(c):"0x",i?N(i):"0x",r?N(r):"0x",o??"0x",a?N(a):"0x",d??"0x",f,...xr(e,t)];return rt(["0x02",Ht(l)])}function q1(e,t){const{chainId:n,gas:r,data:s,nonce:o,to:a,value:i,accessList:c,gasPrice:u}=e;L1(e);const d=gs(c),f=[N(n),o?N(o):"0x",u?N(u):"0x",r?N(r):"0x",a??"0x",i?N(i):"0x",s??"0x",d,...xr(e,t)];return rt(["0x01",Ht(f)])}function V1(e,t){const{chainId:n=0,gas:r,data:s,nonce:o,to:a,value:i,gasPrice:c}=e;U1(e);let u=[o?N(o):"0x",c?N(c):"0x",r?N(r):"0x",a??"0x",i?N(i):"0x",s??"0x"];if(t){const d=(()=>{if(t.v>=35n)return(t.v-35n)/2n>0?t.v:27n+(t.v===35n?0n:1n);if(n>0)return BigInt(n*2)+BigInt(35n+t.v-27n);const p=27n+(t.v===27n?0n:1n);if(t.v!==p)throw new xp({v:t.v});return p})(),f=ze(t.r),l=ze(t.s);u=[...u,N(d),f==="0x00"?"0x":f,l==="0x00"?"0x":l]}else n>0&&(u=[...u,N(n),"0x","0x"]);return Ht(u)}function xr(e,t){const n=t??e,{v:r,yParity:s}=n;if(typeof n.r>"u")return[];if(typeof n.s>"u")return[];if(typeof r>"u"&&typeof s>"u")return[];const o=ze(n.r),a=ze(n.s);return[typeof s=="number"?s?N(1):"0x":r===0n?"0x":r===1n?N(1):r===27n?"0x":N(1),o==="0x00"?"0x":o,a==="0x00"?"0x":a]}function W1(e){if(!e||e.length===0)return[];const t=[];for(const n of e){const{chainId:r,nonce:s,...o}=n,a=n.address;t.push([r?Q(r):"0x",a,s?Q(s):"0x",...xr({},o)])}return t}async function K1({address:e,authorization:t,signature:n}){return yr(ea(e),await ss({authorization:t,signature:n}))}const Nr=new wn(8192);function Z1(e,{enabled:t=!0,id:n}){if(!t||!n)return e();if(Nr.get(n))return Nr.get(n);const r=e().finally(()=>Nr.delete(n));return Nr.set(n,r),r}function Y1(e,t={}){return async(n,r={})=>{const{dedupe:s=!1,methods:o,retryDelay:a=150,retryCount:i=3,uid:c}={...t,...r},{method:u}=n;if(o?.exclude?.includes(u))throw new Mt(new Error("method not supported"),{method:u});if(o?.include&&!o.include.includes(u))throw new Mt(new Error("method not supported"),{method:u});const d=s?ln(`${c}.${ce(n)}`):void 0;return Z1(()=>qr(async()=>{try{return await e(n)}catch(f){const l=f;switch(l.code){case zn.code:throw new zn(l);case Ln.code:throw new Ln(l);case Un.code:throw new Un(l,{method:n.method});case Dn.code:throw new Dn(l);case Gt.code:throw new Gt(l);case St.code:throw new St(l);case Gn.code:throw new Gn(l);case jn.code:throw new jn(l);case Hn.code:throw new Hn(l);case Mt.code:throw new Mt(l,{method:n.method});case pn.code:throw new pn(l);case qn.code:throw new qn(l);case cn.code:throw new cn(l);case Vn.code:throw new Vn(l);case Wn.code:throw new Wn(l);case Kn.code:throw new Kn(l);case Zn.code:throw new Zn(l);case Yn.code:throw new Yn(l);case hn.code:throw new hn(l);case Jn.code:throw new Jn(l);case Xn.code:throw new Xn(l);case Qn.code:throw new Qn(l);case er.code:throw new er(l);case tr.code:throw new tr(l);case bn.code:throw new bn(l);case 5e3:throw new cn(l);default:throw f instanceof $?f:new Cp(l)}}},{delay:({count:f,error:l})=>{if(l&&l instanceof On){const p=l?.headers?.get("Retry-After");if(p?.match(/\d/))return Number.parseInt(p,10)*1e3}return~~(1<<f)*a},retryCount:i,shouldRetry:({error:f})=>J1(f)}),{enabled:s,id:d})}}function J1(e){return"code"in e&&typeof e.code=="number"?e.code===-1||e.code===pn.code||e.code===Gt.code:e instanceof On&&e.status?e.status===403||e.status===408||e.status===413||e.status===429||e.status===500||e.status===502||e.status===503||e.status===504:!0}function u0(e){const t={formatters:void 0,fees:void 0,serializers:void 0,...e};function n(r){return s=>{const o=typeof s=="function"?s(r):s,a={...r,...o};return Object.assign(a,{extend:n(a)})}}return Object.assign(t,{extend:n(t)})}function X1(e,{errorInstance:t=new Error("timed out"),timeout:n,signal:r}){return new Promise((s,o)=>{(async()=>{let a;try{const i=new AbortController;n>0&&(a=setTimeout(()=>{r&&i.abort()},n)),s(await e({signal:i?.signal||null}))}catch(i){i?.name==="AbortError"&&o(t),o(i)}finally{clearTimeout(a)}})()})}function Q1(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const zi=Q1();function eb(e,t={}){return{async request(n){const{body:r,fetchFn:s=t.fetchFn??fetch,onRequest:o=t.onRequest,onResponse:a=t.onResponse,timeout:i=t.timeout??1e4}=n,c={...t.fetchOptions??{},...n.fetchOptions??{}},{headers:u,method:d,signal:f}=c;try{const l=await X1(async({signal:h})=>{const y={...c,body:Array.isArray(r)?ce(r.map(v=>({jsonrpc:"2.0",id:v.id??zi.take(),...v}))):ce({jsonrpc:"2.0",id:r.id??zi.take(),...r}),headers:{"Content-Type":"application/json",...u},method:d||"POST",signal:f||(i>0?h:null)},m=new Request(e,y),w=await o?.(m,y)??{...y,url:e};return await s(w.url??e,w)},{errorInstance:new wi({body:r,url:e}),timeout:i,signal:!0});a&&await a(l);let p;if(l.headers.get("Content-Type")?.startsWith("application/json"))p=await l.json();else{p=await l.text();try{p=JSON.parse(p||"{}")}catch(h){if(l.ok)throw h;p={error:p}}}if(!l.ok)throw new On({body:r,details:ce(p.error)||l.statusText,headers:l.headers,status:l.status,url:e});return p}catch(l){throw l instanceof On||l instanceof wi?l:new On({body:r,cause:l,url:e})}}}}const tb=`Ethereum Signed Message:
`;function nb(e){const t=typeof e=="string"?ln(e):typeof e.raw=="string"?e.raw:se(e.raw),n=ln(`${tb}${J(t)}`);return Ue([n,t])}function Oa(e,t){return le(nb(e),t)}class rb extends ${constructor({domain:t}){super(`Invalid domain "${ce(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class sb extends ${constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class ob extends ${constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function ab(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(c,u)=>{const d={...u};for(const f of c){const{name:l,type:p}=f;p==="address"&&(d[l]=d[l].toLowerCase())}return d},a=s.EIP712Domain?t?o(s.EIP712Domain,t):{}:{},i=(()=>{if(r!=="EIP712Domain")return o(s[r],n)})();return ce({domain:a,message:i,primaryType:r,types:s})}function d0(e){const{domain:t,message:n,primaryType:r,types:s}=e,o=(a,i)=>{for(const c of a){const{name:u,type:d}=c,f=i[u],l=d.match(Vc);if(l&&(typeof f=="number"||typeof f=="bigint")){const[y,m,w]=l;N(f,{signed:m==="int",size:Number.parseInt(w,10)/8})}if(d==="address"&&typeof f=="string"&&!ue(f))throw new we({address:f});const p=d.match(Vl);if(p){const[y,m]=p;if(m&&J(f)!==Number.parseInt(m,10))throw new nl({expectedSize:Number.parseInt(m,10),givenSize:J(f)})}const h=s[d];h&&(ib(d),o(h,f))}};if(s.EIP712Domain&&t){if(typeof t!="object")throw new rb({domain:t});o(s.EIP712Domain,t)}if(r!=="EIP712Domain")if(s[r])o(s[r],n);else throw new sb({primaryType:r,types:s})}function f0({domain:e}){return[typeof e?.name=="string"&&{name:"name",type:"string"},e?.version&&{name:"version",type:"string"},(typeof e?.chainId=="number"||typeof e?.chainId=="bigint")&&{name:"chainId",type:"uint256"},e?.verifyingContract&&{name:"verifyingContract",type:"address"},e?.salt&&{name:"salt",type:"bytes32"}].filter(Boolean)}function ib(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new ob({type:e})}function l0(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:f0({domain:t}),...e.types};d0({domain:t,message:n,primaryType:r,types:s});const o=["0x1901"];return t&&o.push(cb({domain:t,types:s})),r!=="EIP712Domain"&&o.push(p0({data:n,primaryType:r,types:s})),le(Ue(o))}function cb({domain:e,types:t}){return p0({data:e,primaryType:"EIP712Domain",types:t})}function p0({data:e,primaryType:t,types:n}){const r=h0({data:e,primaryType:t,types:n});return le(r)}function h0({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[ub({primaryType:t,types:n})];for(const o of n[t]){const[a,i]=y0({types:n,name:o.name,type:o.type,value:e[o.name]});r.push(a),s.push(i)}return Ne(r,s)}function ub({primaryType:e,types:t}){const n=Q(db({primaryType:e,types:t}));return le(n)}function db({primaryType:e,types:t}){let n="";const r=b0({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const o of s)n+=`${o}(${t[o].map(({name:a,type:i})=>`${i} ${a}`).join(",")})`;return n}function b0({primaryType:e,types:t},n=new Set){const s=e.match(/^\w*/u)?.[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const o of t[s])b0({primaryType:o.type,types:t},n);return n}function y0({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},le(h0({data:r,primaryType:n,types:e}))];if(n==="bytes")return[{type:"bytes32"},le(r)];if(n==="string")return[{type:"bytes32"},le(Q(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),o=r.map(a=>y0({name:t,type:s,types:e,value:a}));return[{type:"bytes32"},le(Ne(o.map(([a])=>a),o.map(([,a])=>a)))]}return[{type:n},r]}class fb extends Map{constructor(t){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=t}get(t){const n=super.get(t);return super.has(t)&&n!==void 0&&(this.delete(t),super.set(t,n)),n}set(t,n){if(super.set(t,n),this.maxSize&&this.size>this.maxSize){const r=this.keys().next().value;r&&this.delete(r)}return this}}const lb={checksum:new fb(8192)},Ys=lb.checksum;function pb(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Li(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Vr(e,...t){if(!pb(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function Ui(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function hb(e,t){Vr(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function bb(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))}function m0(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}const yb=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function mb(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}function gb(e){for(let t=0;t<e.length;t++)e[t]=mb(e[t]);return e}const Di=yb?e=>e:gb;function wb(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function g0(e){return typeof e=="string"&&(e=wb(e)),Vr(e),e}let vb=class{};function xb(e){const t=r=>e().update(g0(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}const Or=BigInt(2**32-1),Gi=BigInt(32);function Eb(e,t=!1){return t?{h:Number(e&Or),l:Number(e>>Gi&Or)}:{h:Number(e>>Gi&Or)|0,l:Number(e&Or)|0}}function Ab(e,t=!1){const n=e.length;let r=new Uint32Array(n),s=new Uint32Array(n);for(let o=0;o<n;o++){const{h:a,l:i}=Eb(e[o],t);[r[o],s[o]]=[a,i]}return[r,s]}const Pb=(e,t,n)=>e<<n|t>>>32-n,Tb=(e,t,n)=>t<<n|e>>>32-n,$b=(e,t,n)=>t<<n-32|e>>>64-n,Ib=(e,t,n)=>e<<n-32|t>>>64-n,Sb=BigInt(0),Bn=BigInt(1),Bb=BigInt(2),Cb=BigInt(7),kb=BigInt(256),Nb=BigInt(113),w0=[],v0=[],x0=[];for(let e=0,t=Bn,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],w0.push(2*(5*r+n)),v0.push((e+1)*(e+2)/2%64);let s=Sb;for(let o=0;o<7;o++)t=(t<<Bn^(t>>Cb)*Nb)%kb,t&Bb&&(s^=Bn<<(Bn<<BigInt(o))-Bn);x0.push(s)}const E0=Ab(x0,!0),Ob=E0[0],_b=E0[1],ji=(e,t,n)=>n>32?$b(e,t,n):Pb(e,t,n),Hi=(e,t,n)=>n>32?Ib(e,t,n):Tb(e,t,n);function Mb(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let a=0;a<10;a++)n[a]=e[a]^e[a+10]^e[a+20]^e[a+30]^e[a+40];for(let a=0;a<10;a+=2){const i=(a+8)%10,c=(a+2)%10,u=n[c],d=n[c+1],f=ji(u,d,1)^n[i],l=Hi(u,d,1)^n[i+1];for(let p=0;p<50;p+=10)e[a+p]^=f,e[a+p+1]^=l}let s=e[2],o=e[3];for(let a=0;a<24;a++){const i=v0[a],c=ji(s,o,i),u=Hi(s,o,i),d=w0[a];s=e[d],o=e[d+1],e[d]=c,e[d+1]=u}for(let a=0;a<50;a+=10){for(let i=0;i<10;i++)n[i]=e[a+i];for(let i=0;i<10;i++)e[a+i]^=~n[(i+2)%10]&n[(i+4)%10]}e[0]^=Ob[r],e[1]^=_b[r]}m0(n)}class _a extends vb{constructor(t,n,r,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=s,this.rounds=o,Li(r),!(0<t&&t<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=bb(this.state)}clone(){return this._cloneInto()}keccak(){Di(this.state32),Mb(this.state32,this.rounds),Di(this.state32),this.posOut=0,this.pos=0}update(t){Ui(this),t=g0(t),Vr(t);const{blockLen:n,state:r}=this,s=t.length;for(let o=0;o<s;){const a=Math.min(n-this.pos,s-o);for(let i=0;i<a;i++)r[this.pos++]^=t[o++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:s}=this;t[r]^=n,(n&128)!==0&&r===s-1&&this.keccak(),t[s-1]^=128,this.keccak()}writeInto(t){Ui(this,!1),Vr(t),this.finish();const n=this.state,{blockLen:r}=this;for(let s=0,o=t.length;s<o;){this.posOut>=r&&this.keccak();const a=Math.min(r-this.posOut,o-s);t.set(n.subarray(this.posOut,this.posOut+a),s),this.posOut+=a,s+=a}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return Li(t),this.xofInto(new Uint8Array(t))}digestInto(t){if(hb(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,m0(this.state)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:s,rounds:o,enableXOF:a}=this;return t||(t=new _a(n,r,s,a,o)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=o,t.suffix=r,t.outputLen=s,t.enableXOF=a,t.destroyed=this.destroyed,t}}const Rb=(e,t,n)=>xb(()=>new _a(t,e,n)),Fb=Rb(1,136,256/8);function A0(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Fb(wh(e));return n==="Bytes"?r:Ke(r)}const zb=/^0x[a-fA-F0-9]{40}$/;function ws(e,t={}){const{strict:n=!0}=t;if(!zb.test(e))throw new qi({address:e,cause:new Lb});if(n){if(e.toLowerCase()===e)return;if(P0(e)!==e)throw new qi({address:e,cause:new Ub})}}function P0(e){if(Ys.has(e))return Ys.get(e);ws(e,{strict:!1});const t=e.substring(2).toLowerCase(),n=A0(xh(t),{as:"Bytes"}),r=t.split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&r[o]&&(r[o]=r[o].toUpperCase()),(n[o>>1]&15)>=8&&r[o+1]&&(r[o+1]=r[o+1].toUpperCase());const s=`0x${r.join("")}`;return Ys.set(e,s),s}function zo(e,t={}){const{strict:n=!0}=t??{};try{return ws(e,{strict:n}),!0}catch{return!1}}class qi extends q{constructor({address:t,cause:n}){super(`Address "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidAddressError"})}}class Lb extends q{constructor(){super("Address is not a 20 byte (40 hexadecimal character) value."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidInputError"})}}class Ub extends q{constructor(){super("Address does not match its checksum counterpart."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Address.InvalidChecksumError"})}}const Db=/^(.*)\[([0-9]*)\]$/,Gb=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,T0=/^(u?int)(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,Vi=2n**256n-1n;function dn(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=Fa(t.type);if(o){const[a,i]=o;return Hb(e,{...t,type:i},{checksumAddress:r,length:a,staticPosition:s})}if(t.type==="tuple")return Kb(e,t,{checksumAddress:r,staticPosition:s});if(t.type==="address")return jb(e,{checksum:r});if(t.type==="bool")return qb(e);if(t.type.startsWith("bytes"))return Vb(e,t,{staticPosition:s});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Wb(e,t);if(t.type==="string")return Zb(e,{staticPosition:s});throw new La(t.type)}const Wi=32,Lo=32;function jb(e,t={}){const{checksum:n=!1}=t,r=e.readBytes(32);return[(o=>n?P0(o):o)(Ke(Ah(r,-20))),32]}function Hb(e,t,n){const{checksumAddress:r,length:s,staticPosition:o}=n;if(!s){const c=ht(e.readBytes(Lo)),u=o+c,d=u+Wi;e.setPosition(u);const f=ht(e.readBytes(Wi)),l=ar(t);let p=0;const h=[];for(let y=0;y<f;++y){e.setPosition(d+(l?y*32:p));const[m,w]=dn(e,t,{checksumAddress:r,staticPosition:d});p+=w,h.push(m)}return e.setPosition(o+32),[h,32]}if(ar(t)){const c=ht(e.readBytes(Lo)),u=o+c,d=[];for(let f=0;f<s;++f){e.setPosition(u+f*32);const[l]=dn(e,t,{checksumAddress:r,staticPosition:u});d.push(l)}return e.setPosition(o+32),[d,32]}let a=0;const i=[];for(let c=0;c<s;++c){const[u,d]=dn(e,t,{checksumAddress:r,staticPosition:o+a});a+=d,i.push(u)}return[i,a]}function qb(e){return[Th(e.readBytes(32),{size:32}),32]}function Vb(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const a=ht(e.readBytes(32));e.setPosition(n+a);const i=ht(e.readBytes(32));if(i===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(i);return e.setPosition(n+32),[Ke(c),32]}return[Ke(e.readBytes(Number.parseInt(s,10),32)),32]}function Wb(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256",10),s=e.readBytes(32);return[r>48?Ph(s,{signed:n}):ht(s,{signed:n}),32]}function Kb(e,t,n){const{checksumAddress:r,staticPosition:s}=n,o=t.components.length===0||t.components.some(({name:c})=>!c),a=o?[]:{};let i=0;if(ar(t)){const c=ht(e.readBytes(Lo)),u=s+c;for(let d=0;d<t.components.length;++d){const f=t.components[d];e.setPosition(u+i);const[l,p]=dn(e,f,{checksumAddress:r,staticPosition:u});i+=p,a[o?d:f?.name]=l}return e.setPosition(s+32),[a,32]}for(let c=0;c<t.components.length;++c){const u=t.components[c],[d,f]=dn(e,u,{checksumAddress:r,staticPosition:s});a[o?c:u?.name]=d,i+=f}return[a,i]}function Zb(e,{staticPosition:t}){const n=ht(e.readBytes(32)),r=t+n;e.setPosition(r);const s=ht(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const o=e.readBytes(s,32),a=$h(Nu(o));return e.setPosition(t+32),[a,32]}function Yb({checksumAddress:e,parameters:t,values:n}){const r=[];for(let s=0;s<t.length;s++)r.push(Ma({checksumAddress:e,parameter:t[s],value:n[s]}));return r}function Ma({checksumAddress:e=!1,parameter:t,value:n}){const r=t,s=Fa(r.type);if(s){const[o,a]=s;return Xb(n,{checksumAddress:e,length:o,parameter:{...r,type:a}})}if(r.type==="tuple")return ry(n,{checksumAddress:e,parameter:r});if(r.type==="address")return Jb(n,{checksum:e});if(r.type==="bool")return ey(n);if(r.type.startsWith("uint")||r.type.startsWith("int")){const o=r.type.startsWith("int"),[,,a="256"]=T0.exec(r.type)??[];return ty(n,{signed:o,size:Number(a)})}if(r.type.startsWith("bytes"))return Qb(n,{type:r.type});if(r.type==="string")return ny(n);throw new La(r.type)}function Ra(e){let t=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:i}=e[o];a?t+=32:t+=Oe(i)}const n=[],r=[];let s=0;for(let o=0;o<e.length;o++){const{dynamic:a,encoded:i}=e[o];a?(n.push(me(t+s,{size:32})),r.push(i),s+=Oe(i)):n.push(i)}return We(...n,...r)}function Jb(e,t){const{checksum:n=!1}=t;return ws(e,{strict:n}),{dynamic:!1,encoded:Vt(e.toLowerCase())}}function Xb(e,t){const{checksumAddress:n,length:r,parameter:s}=t,o=r===null;if(!Array.isArray(e))throw new ly(e);if(!o&&e.length!==r)throw new fy({expectedLength:r,givenLength:e.length,type:`${s.type}[${r}]`});let a=!1;const i=[];for(let c=0;c<e.length;c++){const u=Ma({checksumAddress:n,parameter:s,value:e[c]});u.dynamic&&(a=!0),i.push(u)}if(o||a){const c=Ra(i);if(o){const u=me(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?We(u,c):u}}if(a)return{dynamic:!0,encoded:c}}return{dynamic:!1,encoded:We(...i.map(({encoded:c})=>c))}}function Qb(e,{type:t}){const[,n]=t.split("bytes"),r=Oe(e);if(!n){let s=e;return r%32!==0&&(s=Wt(s,Math.ceil((e.length-2)/2/32)*32)),{dynamic:!0,encoded:We(Vt(me(r,{size:32})),s)}}if(r!==Number.parseInt(n,10))throw new I0({expectedSize:Number.parseInt(n,10),value:e});return{dynamic:!1,encoded:Wt(e)}}function ey(e){if(typeof e!="boolean")throw new q(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Vt(Ou(e))}}function ty(e,{signed:t,size:n}){if(typeof n=="number"){const r=2n**(BigInt(n)-(t?1n:0n))-1n,s=t?-r-1n:0n;if(e>r||e<s)throw new Ru({max:r.toString(),min:s.toString(),signed:t,size:n/8,value:e.toString()})}return{dynamic:!1,encoded:me(e,{size:32,signed:t})}}function ny(e){const t=Aa(e),n=Math.ceil(Oe(t)/32),r=[];for(let s=0;s<n;s++)r.push(Wt(nt(t,s*32,(s+1)*32)));return{dynamic:!0,encoded:We(Wt(me(Oe(t),{size:32})),...r)}}function ry(e,t){const{checksumAddress:n,parameter:r}=t;let s=!1;const o=[];for(let a=0;a<r.components.length;a++){const i=r.components[a],c=Array.isArray(e)?a:i.name,u=Ma({checksumAddress:n,parameter:i,value:e[c]});o.push(u),u.dynamic&&(s=!0)}return{dynamic:s,encoded:s?Ra(o):We(...o.map(({encoded:a})=>a))}}function Fa(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}function ar(e){const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return e.components?.some(ar);const n=Fa(e.type);return!!(n&&ar({...e,type:n[1]}))}const sy={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new iy({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new ay({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new Ki({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new Ki({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function oy(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(sy);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}class Ki extends q{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.NegativeOffsetError"})}}class ay extends q{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.PositionOutOfBoundsError"})}}class iy extends q{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Cursor.RecursiveReadLimitExceededError"})}}function cy(e,t,n={}){const{as:r="Array",checksumAddress:s=!1}=n,o=typeof t=="string"?ku(t):t,a=oy(o);if(sn(o)===0&&e.length>0)throw new dy;if(sn(o)&&sn(o)<32)throw new uy({data:typeof t=="string"?t:Ke(t),parameters:e,size:sn(o)});let i=0;const c=r==="Array"?[]:{};for(let u=0;u<e.length;++u){const d=e[u];a.setPosition(i);const[f,l]=dn(a,d,{checksumAddress:s,staticPosition:0});i+=l,r==="Array"?c.push(f):c[d.name??u]=f}return c}function za(e,t,n){const{checksumAddress:r=!1}={};if(e.length!==t.length)throw new S0({expectedLength:e.length,givenLength:t.length});const s=Yb({checksumAddress:r,parameters:e,values:t}),o=Ra(s);return o.length===0?"0x":o}function Uo(e,t){if(e.length!==t.length)throw new S0({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const s=e[r],o=t[r];n.push(Uo.encode(s,o))}return We(...n)}(function(e){function t(n,r,s=!1){if(n==="address"){const c=r;return ws(c),Vt(c.toLowerCase(),s?32:0)}if(n==="string")return Aa(r);if(n==="bytes")return r;if(n==="bool")return Vt(Ou(r),s?32:1);const o=n.match(T0);if(o){const[c,u,d="256"]=o,f=Number.parseInt(d,10)/8;return me(r,{size:s?32:f,signed:u==="int"})}const a=n.match(Gb);if(a){const[c,u]=a;if(Number.parseInt(u,10)!==(r.length-2)/2)throw new I0({expectedSize:Number.parseInt(u,10),value:r});return Wt(r,s?32:0)}const i=n.match(Db);if(i&&Array.isArray(r)){const[c,u]=i,d=[];for(let f=0;f<r.length;f++)d.push(t(u,r[f],!0));return d.length===0?"0x":We(...d)}throw new La(n)}e.encode=t})(Uo||(Uo={}));function $0(e){return Array.isArray(e)&&typeof e[0]=="string"||typeof e=="string"?It(e):e}class uy extends q{constructor({data:t,parameters:n,size:r}){super(`Data size of ${r} bytes is too small for given parameters.`,{metaMessages:[`Params: (${nn(n)})`,`Data:   ${t} (${r} bytes)`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.DataSizeTooSmallError"})}}class dy extends q{constructor(){super('Cannot decode zero data ("0x") with ABI parameters.'),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ZeroDataError"})}}class fy extends q{constructor({expectedLength:t,givenLength:n,type:r}){super(`Array length mismatch for type \`${r}\`. Expected: \`${t}\`. Given: \`${n}\`.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.ArrayLengthMismatchError"})}}class I0 extends q{constructor({expectedSize:t,value:n}){super(`Size of bytes "${n}" (bytes${Oe(n)}) does not match expected size (bytes${t}).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.BytesSizeMismatchError"})}}class S0 extends q{constructor({expectedLength:t,givenLength:n}){super(["ABI encoding parameters/values length mismatch.",`Expected length (parameters): ${t}`,`Given length (values): ${n}`].join(`
`)),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.LengthMismatchError"})}}class ly extends q{constructor(t){super(`Value \`${t}\` is not a valid array.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidArrayError"})}}class La extends q{constructor(t){super(`Type \`${t}\` is not a valid ABI Type.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiParameters.InvalidTypeError"})}}const Qt=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function py(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&e.constructor.name==="Uint8Array"}function Do(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function Er(e,...t){if(!py(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}function hy(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Do(e.outputLen),Do(e.blockLen)}function Wr(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function by(e,t){Er(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Kr(...e){for(let t=0;t<e.length;t++)e[t].fill(0)}function Js(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Xe(e,t){return e<<32-t|e>>>t}function yy(e){if(typeof e!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}function Ua(e){return typeof e=="string"&&(e=yy(e)),Er(e),e}function my(...e){let t=0;for(let r=0;r<e.length;r++){const s=e[r];Er(s),t+=s.length}const n=new Uint8Array(t);for(let r=0,s=0;r<e.length;r++){const o=e[r];n.set(o,s),s+=o.length}return n}class B0{}function gy(e){const t=r=>e().update(Ua(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function wy(e=32){if(Qt&&typeof Qt.getRandomValues=="function")return Qt.getRandomValues(new Uint8Array(e));if(Qt&&typeof Qt.randomBytes=="function")return Uint8Array.from(Qt.randomBytes(e));throw new Error("crypto.getRandomValues must be defined")}function vy(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),o=BigInt(4294967295),a=Number(n>>s&o),i=Number(n&o),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,i,r)}function xy(e,t,n){return e&t^~e&n}function Ey(e,t,n){return e&t^e&n^t&n}class Ay extends B0{constructor(t,n,r,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.buffer=new Uint8Array(t),this.view=Js(this.buffer)}update(t){Wr(this),t=Ua(t),Er(t);const{view:n,buffer:r,blockLen:s}=this,o=t.length;for(let a=0;a<o;){const i=Math.min(s-this.pos,o-a);if(i===s){const c=Js(t);for(;s<=o-a;a+=s)this.process(c,a);continue}r.set(t.subarray(a,a+i),this.pos),this.pos+=i,a+=i,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Wr(this),by(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:o}=this;let{pos:a}=this;n[a++]=128,Kr(this.buffer.subarray(a)),this.padOffset>s-a&&(this.process(r,0),a=0);for(let f=a;f<s;f++)n[f]=0;vy(r,s-8,BigInt(this.length*8),o),this.process(r,0);const i=Js(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<u;f++)i.setUint32(4*f,d[f],o)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:o,destroyed:a,pos:i}=this;return t.destroyed=a,t.finished=o,t.length=s,t.pos=i,s%n&&t.buffer.set(r),t}clone(){return this._cloneInto()}}const Pt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Py=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Tt=new Uint32Array(64);class Ty extends Ay{constructor(t=32){super(64,t,8,!1),this.A=Pt[0]|0,this.B=Pt[1]|0,this.C=Pt[2]|0,this.D=Pt[3]|0,this.E=Pt[4]|0,this.F=Pt[5]|0,this.G=Pt[6]|0,this.H=Pt[7]|0}get(){const{A:t,B:n,C:r,D:s,E:o,F:a,G:i,H:c}=this;return[t,n,r,s,o,a,i,c]}set(t,n,r,s,o,a,i,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=o|0,this.F=a|0,this.G=i|0,this.H=c|0}process(t,n){for(let f=0;f<16;f++,n+=4)Tt[f]=t.getUint32(n,!1);for(let f=16;f<64;f++){const l=Tt[f-15],p=Tt[f-2],h=Xe(l,7)^Xe(l,18)^l>>>3,y=Xe(p,17)^Xe(p,19)^p>>>10;Tt[f]=y+Tt[f-7]+h+Tt[f-16]|0}let{A:r,B:s,C:o,D:a,E:i,F:c,G:u,H:d}=this;for(let f=0;f<64;f++){const l=Xe(i,6)^Xe(i,11)^Xe(i,25),p=d+l+xy(i,c,u)+Py[f]+Tt[f]|0,y=(Xe(r,2)^Xe(r,13)^Xe(r,22))+Ey(r,s,o)|0;d=u,u=c,c=i,i=a+p|0,a=o,o=s,s=r,r=p+y|0}r=r+this.A|0,s=s+this.B|0,o=o+this.C|0,a=a+this.D|0,i=i+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,o,a,i,c,u,d)}roundClean(){Kr(Tt)}destroy(){this.set(0,0,0,0,0,0,0,0),Kr(this.buffer)}}const $y=gy(()=>new Ty);class C0 extends B0{constructor(t,n){super(),this.finished=!1,this.destroyed=!1,hy(t);const r=Ua(n);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const s=this.blockLen,o=new Uint8Array(s);o.set(r.length>s?t.create().update(r).digest():r);for(let a=0;a<o.length;a++)o[a]^=54;this.iHash.update(o),this.oHash=t.create();for(let a=0;a<o.length;a++)o[a]^=106;this.oHash.update(o),Kr(o)}update(t){return Wr(this),this.iHash.update(t),this}digestInto(t){Wr(this),Er(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){const t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:r,finished:s,destroyed:o,blockLen:a,outputLen:i}=this;return t=t,t.finished=s,t.destroyed=o,t.blockLen=a,t.outputLen=i,t.oHash=n._cloneInto(t.oHash),t.iHash=r._cloneInto(t.iHash),t}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const k0=(e,t,n)=>new C0(e,t).update(n).digest();k0.create=(e,t)=>new C0(e,t);const Ee=BigInt(0),ge=BigInt(1),Rt=BigInt(2),Iy=BigInt(3),N0=BigInt(4),O0=BigInt(5),_0=BigInt(8);function ve(e,t){const n=e%t;return n>=Ee?n:t+n}function Re(e,t,n){let r=e;for(;t-- >Ee;)r*=r,r%=n;return r}function Go(e,t){if(e===Ee)throw new Error("invert: expected non-zero number");if(t<=Ee)throw new Error("invert: expected positive modulus, got "+t);let n=ve(e,t),r=t,s=Ee,o=ge;for(;n!==Ee;){const i=r/n,c=r%n,u=s-o*i;r=n,n=c,s=o,o=u}if(r!==ge)throw new Error("invert: does not exist");return ve(s,t)}function M0(e,t){const n=(e.ORDER+ge)/N0,r=e.pow(t,n);if(!e.eql(e.sqr(r),t))throw new Error("Cannot find square root");return r}function Sy(e,t){const n=(e.ORDER-O0)/_0,r=e.mul(t,Rt),s=e.pow(r,n),o=e.mul(t,s),a=e.mul(e.mul(o,Rt),s),i=e.mul(o,e.sub(a,e.ONE));if(!e.eql(e.sqr(i),t))throw new Error("Cannot find square root");return i}function By(e){if(e<BigInt(3))throw new Error("sqrt is not defined for small field");let t=e-ge,n=0;for(;t%Rt===Ee;)t/=Rt,n++;let r=Rt;const s=Da(e);for(;Zi(s,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return M0;let o=s.pow(r,t);const a=(t+ge)/Rt;return function(c,u){if(c.is0(u))return u;if(Zi(c,u)!==1)throw new Error("Cannot find square root");let d=n,f=c.mul(c.ONE,o),l=c.pow(u,t),p=c.pow(u,a);for(;!c.eql(l,c.ONE);){if(c.is0(l))return c.ZERO;let h=1,y=c.sqr(l);for(;!c.eql(y,c.ONE);)if(h++,y=c.sqr(y),h===d)throw new Error("Cannot find square root");const m=ge<<BigInt(d-h-1),w=c.pow(f,m);d=h,f=c.sqr(w),l=c.mul(l,f),p=c.mul(p,w)}return p}}function Cy(e){return e%N0===Iy?M0:e%_0===O0?Sy:By(e)}const ky=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ny(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},n=ky.reduce((r,s)=>(r[s]="function",r),t);return us(e,n)}function Oy(e,t,n){if(n<Ee)throw new Error("invalid exponent, negatives unsupported");if(n===Ee)return e.ONE;if(n===ge)return t;let r=e.ONE,s=t;for(;n>Ee;)n&ge&&(r=e.mul(r,s)),s=e.sqr(s),n>>=ge;return r}function R0(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),s=t.reduce((a,i,c)=>e.is0(i)?a:(r[c]=a,e.mul(a,i)),e.ONE),o=e.inv(s);return t.reduceRight((a,i,c)=>e.is0(i)?a:(r[c]=e.mul(a,r[c]),e.mul(a,i)),o),r}function Zi(e,t){const n=(e.ORDER-ge)/Rt,r=e.pow(t,n),s=e.eql(r,e.ONE),o=e.eql(r,e.ZERO),a=e.eql(r,e.neg(e.ONE));if(!s&&!o&&!a)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function F0(e,t){t!==void 0&&Do(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Da(e,t,n=!1,r={}){if(e<=Ee)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:s,nByteLength:o}=F0(e,t);if(o>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let a;const i=Object.freeze({ORDER:e,isLE:n,BITS:s,BYTES:o,MASK:cs(s),ZERO:Ee,ONE:ge,create:c=>ve(c,e),isValid:c=>{if(typeof c!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof c);return Ee<=c&&c<e},is0:c=>c===Ee,isOdd:c=>(c&ge)===ge,neg:c=>ve(-c,e),eql:(c,u)=>c===u,sqr:c=>ve(c*c,e),add:(c,u)=>ve(c+u,e),sub:(c,u)=>ve(c-u,e),mul:(c,u)=>ve(c*u,e),pow:(c,u)=>Oy(i,c,u),div:(c,u)=>ve(c*Go(u,e),e),sqrN:c=>c*c,addN:(c,u)=>c+u,subN:(c,u)=>c-u,mulN:(c,u)=>c*u,inv:c=>Go(c,e),sqrt:r.sqrt||(c=>(a||(a=Cy(e)),a(i,c))),toBytes:c=>n?$u(c,o):gr(c,o),fromBytes:c=>{if(c.length!==o)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+c.length);return n?Tu(c):Lt(c)},invertBatch:c=>R0(i,c),cmov:(c,u,d)=>d?u:c});return Object.freeze(i)}function z0(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function L0(e){const t=z0(e);return t+Math.ceil(t/2)}function _y(e,t,n=!1){const r=e.length,s=z0(t),o=L0(t);if(r<16||r<o||r>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+r);const a=n?Tu(e):Lt(e),i=ve(a,t-ge)+ge;return n?$u(i,s):gr(i,s)}const Yi=BigInt(0),jo=BigInt(1);function Xs(e,t){const n=t.negate();return e?n:t}function U0(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function Qs(e,t){U0(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),s=2**e,o=cs(e),a=BigInt(e);return{windows:n,windowSize:r,mask:o,maxNumber:s,shiftBy:a}}function Ji(e,t,n){const{windowSize:r,mask:s,maxNumber:o,shiftBy:a}=n;let i=Number(e&s),c=e>>a;i>r&&(i-=o,c+=jo);const u=t*r,d=u+Math.abs(i)-1,f=i===0,l=i<0,p=t%2!==0;return{nextN:c,offset:d,isZero:f,isNeg:l,isNegF:p,offsetF:u}}function My(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Ry(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const eo=new WeakMap,D0=new WeakMap;function to(e){return D0.get(e)||1}function Fy(e,t){return{constTimeNegate:Xs,hasPrecomputes(n){return to(n)!==1},unsafeLadder(n,r,s=e.ZERO){let o=n;for(;r>Yi;)r&jo&&(s=s.add(o)),o=o.double(),r>>=jo;return s},precomputeWindow(n,r){const{windows:s,windowSize:o}=Qs(r,t),a=[];let i=n,c=i;for(let u=0;u<s;u++){c=i,a.push(c);for(let d=1;d<o;d++)c=c.add(i),a.push(c);i=c.double()}return a},wNAF(n,r,s){let o=e.ZERO,a=e.BASE;const i=Qs(n,t);for(let c=0;c<i.windows;c++){const{nextN:u,offset:d,isZero:f,isNeg:l,isNegF:p,offsetF:h}=Ji(s,c,i);s=u,f?a=a.add(Xs(p,r[h])):o=o.add(Xs(l,r[d]))}return{p:o,f:a}},wNAFUnsafe(n,r,s,o=e.ZERO){const a=Qs(n,t);for(let i=0;i<a.windows&&s!==Yi;i++){const{nextN:c,offset:u,isZero:d,isNeg:f}=Ji(s,i,a);if(s=c,!d){const l=r[u];o=o.add(f?l.negate():l)}}return o},getPrecomputes(n,r,s){let o=eo.get(r);return o||(o=this.precomputeWindow(r,n),n!==1&&eo.set(r,s(o))),o},wNAFCached(n,r,s){const o=to(n);return this.wNAF(o,this.getPrecomputes(o,n,s),r)},wNAFCachedUnsafe(n,r,s,o){const a=to(n);return a===1?this.unsafeLadder(n,r,o):this.wNAFUnsafe(a,this.getPrecomputes(a,n,s),r,o)},setWindowSize(n,r){U0(r,t),D0.set(n,r),eo.delete(n)}}}function zy(e,t,n,r){My(n,e),Ry(r,t);const s=n.length,o=r.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");const a=e.ZERO,i=ch(BigInt(s));let c=1;i>12?c=i-3:i>4?c=i-2:i>0&&(c=2);const u=cs(c),d=new Array(Number(u)+1).fill(a),f=Math.floor((t.BITS-1)/c)*c;let l=a;for(let p=f;p>=0;p-=c){d.fill(a);for(let y=0;y<o;y++){const m=r[y],w=Number(m>>BigInt(p)&u);d[w]=d[w].add(n[y])}let h=a;for(let y=d.length-1,m=a;y>0;y--)m=m.add(d[y]),h=h.add(m);if(l=l.add(h),p!==0)for(let y=0;y<c;y++)l=l.double()}return l}function G0(e){return Ny(e.Fp),us(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...F0(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Xi(e){e.lowS!==void 0&&rr("lowS",e.lowS),e.prehash!==void 0&&rr("prehash",e.prehash)}function Ly(e){const t=G0(e);us(t,{a:"field",b:"field"},{allowInfinityPoint:"boolean",allowedPrivateKeyLengths:"array",clearCofactor:"function",fromBytes:"function",isTorsionFree:"function",toBytes:"function",wrapPrivateKey:"boolean"});const{endo:n,Fp:r,a:s}=t;if(n){if(!r.eql(s,r.ZERO))throw new Error("invalid endo: CURVE.a must be 0");if(typeof n!="object"||typeof n.beta!="bigint"||typeof n.splitScalar!="function")throw new Error('invalid endo: expected "beta": bigint and "splitScalar": function')}return Object.freeze({...t})}class Uy extends Error{constructor(t=""){super(t)}}const ut={Err:Uy,_tlv:{encode:(e,t)=>{const{Err:n}=ut;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,s=Br(r);if(s.length/2&128)throw new n("tlv.encode: long form length too big");const o=r>127?Br(s.length/2|128):"";return Br(e)+o+s+t},decode(e,t){const{Err:n}=ut;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const s=t[r++],o=!!(s&128);let a=0;if(!o)a=s;else{const c=s&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of u)a=a<<8|d;if(r+=c,a<128)throw new n("tlv.decode(long): not minimal encoding")}const i=t.subarray(r,r+a);if(i.length!==a)throw new n("tlv.decode: wrong value length");return{v:i,l:t.subarray(r+a)}}},_int:{encode(e){const{Err:t}=ut;if(e<dt)throw new t("integer: negative integers are not allowed");let n=Br(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=ut;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return Lt(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=ut,s=Fe("signature",e),{v:o,l:a}=r.decode(48,s);if(a.length)throw new t("invalid signature: left bytes after parsing");const{v:i,l:c}=r.decode(2,o),{v:u,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(i),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=ut,r=t.encode(2,n.encode(e.r)),s=t.encode(2,n.encode(e.s)),o=r+s;return t.encode(48,o)}};function no(e,t){return sr(gr(e,t))}const dt=BigInt(0),de=BigInt(1);BigInt(2);const ro=BigInt(3),Dy=BigInt(4);function Gy(e){const t=Ly(e),{Fp:n}=t,r=Da(t.n,t.nBitLength),s=t.toBytes||((v,b,g)=>{const E=b.toAffine();return jr(Uint8Array.from([4]),n.toBytes(E.x),n.toBytes(E.y))}),o=t.fromBytes||(v=>{const b=v.subarray(1),g=n.fromBytes(b.subarray(0,n.BYTES)),E=n.fromBytes(b.subarray(n.BYTES,2*n.BYTES));return{x:g,y:E}});function a(v){const{a:b,b:g}=t,E=n.sqr(v),P=n.mul(E,v);return n.add(n.add(P,n.mul(v,b)),g)}function i(v,b){const g=n.sqr(b),E=a(v);return n.eql(g,E)}if(!i(t.Gx,t.Gy))throw new Error("bad curve params: generator point");const c=n.mul(n.pow(t.a,ro),Dy),u=n.mul(n.sqr(t.b),BigInt(27));if(n.is0(n.add(c,u)))throw new Error("bad curve params: a or b");function d(v){return Ea(v,de,t.n)}function f(v){const{allowedPrivateKeyLengths:b,nByteLength:g,wrapPrivateKey:E,n:P}=t;if(b&&typeof v!="bigint"){if(mr(v)&&(v=sr(v)),typeof v!="string"||!b.includes(v.length))throw new Error("invalid private key");v=v.padStart(g*2,"0")}let T;try{T=typeof v=="bigint"?v:Lt(Fe("private key",v,g))}catch{throw new Error("invalid private key, expected hex or "+g+" bytes, got "+typeof v)}return E&&(T=ve(T,P)),un("private key",T,de,P),T}function l(v){if(!(v instanceof y))throw new Error("ProjectivePoint expected")}const p=Si((v,b)=>{const{px:g,py:E,pz:P}=v;if(n.eql(P,n.ONE))return{x:g,y:E};const T=v.is0();b==null&&(b=T?n.ONE:n.inv(P));const k=n.mul(g,b),x=n.mul(E,b),C=n.mul(P,b);if(T)return{x:n.ZERO,y:n.ZERO};if(!n.eql(C,n.ONE))throw new Error("invZ was invalid");return{x:k,y:x}}),h=Si(v=>{if(v.is0()){if(t.allowInfinityPoint&&!n.is0(v.py))return;throw new Error("bad point: ZERO")}const{x:b,y:g}=v.toAffine();if(!n.isValid(b)||!n.isValid(g))throw new Error("bad point: x or y not FE");if(!i(b,g))throw new Error("bad point: equation left != right");if(!v.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});class y{constructor(b,g,E){if(b==null||!n.isValid(b))throw new Error("x required");if(g==null||!n.isValid(g)||n.is0(g))throw new Error("y required");if(E==null||!n.isValid(E))throw new Error("z required");this.px=b,this.py=g,this.pz=E,Object.freeze(this)}static fromAffine(b){const{x:g,y:E}=b||{};if(!b||!n.isValid(g)||!n.isValid(E))throw new Error("invalid affine point");if(b instanceof y)throw new Error("projective point not allowed");const P=T=>n.eql(T,n.ZERO);return P(g)&&P(E)?y.ZERO:new y(g,E,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(b){const g=R0(n,b.map(E=>E.pz));return b.map((E,P)=>E.toAffine(g[P])).map(y.fromAffine)}static fromHex(b){const g=y.fromAffine(o(Fe("pointHex",b)));return g.assertValidity(),g}static fromPrivateKey(b){return y.BASE.multiply(f(b))}static msm(b,g){return zy(y,r,b,g)}_setWindowSize(b){A.setWindowSize(this,b)}assertValidity(){h(this)}hasEvenY(){const{y:b}=this.toAffine();if(n.isOdd)return!n.isOdd(b);throw new Error("Field doesn't support isOdd")}equals(b){l(b);const{px:g,py:E,pz:P}=this,{px:T,py:k,pz:x}=b,C=n.eql(n.mul(g,x),n.mul(T,P)),O=n.eql(n.mul(E,x),n.mul(k,P));return C&&O}negate(){return new y(this.px,n.neg(this.py),this.pz)}double(){const{a:b,b:g}=t,E=n.mul(g,ro),{px:P,py:T,pz:k}=this;let x=n.ZERO,C=n.ZERO,O=n.ZERO,_=n.mul(P,P),j=n.mul(T,T),I=n.mul(k,k),S=n.mul(P,T);return S=n.add(S,S),O=n.mul(P,k),O=n.add(O,O),x=n.mul(b,O),C=n.mul(E,I),C=n.add(x,C),x=n.sub(j,C),C=n.add(j,C),C=n.mul(x,C),x=n.mul(S,x),O=n.mul(E,O),I=n.mul(b,I),S=n.sub(_,I),S=n.mul(b,S),S=n.add(S,O),O=n.add(_,_),_=n.add(O,_),_=n.add(_,I),_=n.mul(_,S),C=n.add(C,_),I=n.mul(T,k),I=n.add(I,I),_=n.mul(I,S),x=n.sub(x,_),O=n.mul(I,j),O=n.add(O,O),O=n.add(O,O),new y(x,C,O)}add(b){l(b);const{px:g,py:E,pz:P}=this,{px:T,py:k,pz:x}=b;let C=n.ZERO,O=n.ZERO,_=n.ZERO;const j=t.a,I=n.mul(t.b,ro);let S=n.mul(g,T),M=n.mul(E,k),B=n.mul(P,x),R=n.add(g,E),D=n.add(T,k);R=n.mul(R,D),D=n.add(S,M),R=n.sub(R,D),D=n.add(g,P);let V=n.add(T,x);return D=n.mul(D,V),V=n.add(S,B),D=n.sub(D,V),V=n.add(E,P),C=n.add(k,x),V=n.mul(V,C),C=n.add(M,B),V=n.sub(V,C),_=n.mul(j,D),C=n.mul(I,B),_=n.add(C,_),C=n.sub(M,_),_=n.add(M,_),O=n.mul(C,_),M=n.add(S,S),M=n.add(M,S),B=n.mul(j,B),D=n.mul(I,D),M=n.add(M,B),B=n.sub(S,B),B=n.mul(j,B),D=n.add(D,B),S=n.mul(M,D),O=n.add(O,S),S=n.mul(V,D),C=n.mul(R,C),C=n.sub(C,S),S=n.mul(R,M),_=n.mul(V,_),_=n.add(_,S),new y(C,O,_)}subtract(b){return this.add(b.negate())}is0(){return this.equals(y.ZERO)}wNAF(b){return A.wNAFCached(this,b,y.normalizeZ)}multiplyUnsafe(b){const{endo:g,n:E}=t;un("scalar",b,dt,E);const P=y.ZERO;if(b===dt)return P;if(this.is0()||b===de)return this;if(!g||A.hasPrecomputes(this))return A.wNAFCachedUnsafe(this,b,y.normalizeZ);let{k1neg:T,k1:k,k2neg:x,k2:C}=g.splitScalar(b),O=P,_=P,j=this;for(;k>dt||C>dt;)k&de&&(O=O.add(j)),C&de&&(_=_.add(j)),j=j.double(),k>>=de,C>>=de;return T&&(O=O.negate()),x&&(_=_.negate()),_=new y(n.mul(_.px,g.beta),_.py,_.pz),O.add(_)}multiply(b){const{endo:g,n:E}=t;un("scalar",b,de,E);let P,T;if(g){const{k1neg:k,k1:x,k2neg:C,k2:O}=g.splitScalar(b);let{p:_,f:j}=this.wNAF(x),{p:I,f:S}=this.wNAF(O);_=A.constTimeNegate(k,_),I=A.constTimeNegate(C,I),I=new y(n.mul(I.px,g.beta),I.py,I.pz),P=_.add(I),T=j.add(S)}else{const{p:k,f:x}=this.wNAF(b);P=k,T=x}return y.normalizeZ([P,T])[0]}multiplyAndAddUnsafe(b,g,E){const P=y.BASE,T=(x,C)=>C===dt||C===de||!x.equals(P)?x.multiplyUnsafe(C):x.multiply(C),k=T(this,g).add(T(b,E));return k.is0()?void 0:k}toAffine(b){return p(this,b)}isTorsionFree(){const{h:b,isTorsionFree:g}=t;if(b===de)return!0;if(g)return g(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:b,clearCofactor:g}=t;return b===de?this:g?g(y,this):this.multiplyUnsafe(t.h)}toRawBytes(b=!0){return rr("isCompressed",b),this.assertValidity(),s(y,this,b)}toHex(b=!0){return rr("isCompressed",b),sr(this.toRawBytes(b))}}y.BASE=new y(t.Gx,t.Gy,n.ONE),y.ZERO=new y(n.ZERO,n.ONE,n.ZERO);const{endo:m,nBitLength:w}=t,A=Fy(y,m?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:f,weierstrassEquation:a,isWithinCurveOrder:d}}function jy(e){const t=G0(e);return us(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Hy(e){const t=jy(e),{Fp:n,n:r,nByteLength:s,nBitLength:o}=t,a=n.BYTES+1,i=2*n.BYTES+1;function c(I){return ve(I,r)}function u(I){return Go(I,r)}const{ProjectivePoint:d,normPrivateKeyToScalar:f,weierstrassEquation:l,isWithinCurveOrder:p}=Gy({...t,toBytes(I,S,M){const B=S.toAffine(),R=n.toBytes(B.x),D=jr;return rr("isCompressed",M),M?D(Uint8Array.from([S.hasEvenY()?2:3]),R):D(Uint8Array.from([4]),R,n.toBytes(B.y))},fromBytes(I){const S=I.length,M=I[0],B=I.subarray(1);if(S===a&&(M===2||M===3)){const R=Lt(B);if(!Ea(R,de,n.ORDER))throw new Error("Point is not on curve");const D=l(R);let V;try{V=n.sqrt(D)}catch(oe){const te=oe instanceof Error?": "+oe.message:"";throw new Error("Point is not on curve"+te)}const W=(V&de)===de;return(M&1)===1!==W&&(V=n.neg(V)),{x:R,y:V}}else if(S===i&&M===4){const R=n.fromBytes(B.subarray(0,n.BYTES)),D=n.fromBytes(B.subarray(n.BYTES,2*n.BYTES));return{x:R,y:D}}else{const R=a,D=i;throw new Error("invalid Point, expected length of "+R+", or uncompressed "+D+", got "+S)}}});function h(I){const S=r>>de;return I>S}function y(I){return h(I)?c(-I):I}const m=(I,S,M)=>Lt(I.slice(S,M));class w{constructor(S,M,B){un("r",S,de,r),un("s",M,de,r),this.r=S,this.s=M,B!=null&&(this.recovery=B),Object.freeze(this)}static fromCompact(S){const M=s;return S=Fe("compactSignature",S,M*2),new w(m(S,0,M),m(S,M,2*M))}static fromDER(S){const{r:M,s:B}=ut.toSig(Fe("DER",S));return new w(M,B)}assertValidity(){}addRecoveryBit(S){return new w(this.r,this.s,S)}recoverPublicKey(S){const{r:M,s:B,recovery:R}=this,D=P(Fe("msgHash",S));if(R==null||![0,1,2,3].includes(R))throw new Error("recovery id invalid");const V=R===2||R===3?M+t.n:M;if(V>=n.ORDER)throw new Error("recovery id 2 or 3 invalid");const W=(R&1)===0?"02":"03",he=d.fromHex(W+no(V,n.BYTES)),oe=u(V),te=c(-D*oe),ae=c(B*oe),be=d.BASE.multiplyAndAddUnsafe(he,te,ae);if(!be)throw new Error("point at infinify");return be.assertValidity(),be}hasHighS(){return h(this.s)}normalizeS(){return this.hasHighS()?new w(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Gr(this.toDERHex())}toDERHex(){return ut.hexFromSig(this)}toCompactRawBytes(){return Gr(this.toCompactHex())}toCompactHex(){const S=s;return no(this.r,S)+no(this.s,S)}}const A={isValidPrivateKey(I){try{return f(I),!0}catch{return!1}},normPrivateKeyToScalar:f,randomPrivateKey:()=>{const I=L0(t.n);return _y(t.randomBytes(I),t.n)},precompute(I=8,S=d.BASE){return S._setWindowSize(I),S.multiply(BigInt(3)),S}};function v(I,S=!0){return d.fromPrivateKey(I).toRawBytes(S)}function b(I){if(typeof I=="bigint")return!1;if(I instanceof d)return!0;const M=Fe("key",I).length,B=n.BYTES,R=B+1,D=2*B+1;if(!(t.allowedPrivateKeyLengths||s===R))return M===R||M===D}function g(I,S,M=!0){if(b(I)===!0)throw new Error("first arg must be private key");if(b(S)===!1)throw new Error("second arg must be public key");return d.fromHex(S).multiply(f(I)).toRawBytes(M)}const E=t.bits2int||function(I){if(I.length>8192)throw new Error("input is too large");const S=Lt(I),M=I.length*8-o;return M>0?S>>BigInt(M):S},P=t.bits2int_modN||function(I){return c(E(I))},T=cs(o);function k(I){return un("num < 2^"+o,I,dt,T),gr(I,s)}function x(I,S,M=C){if(["recovered","canonical"].some(ie=>ie in M))throw new Error("sign() legacy options not supported");const{hash:B,randomBytes:R}=t;let{lowS:D,prehash:V,extraEntropy:W}=M;D==null&&(D=!0),I=Fe("msgHash",I),Xi(M),V&&(I=Fe("prehashed msgHash",B(I)));const he=P(I),oe=f(S),te=[k(oe),k(he)];if(W!=null&&W!==!1){const ie=W===!0?R(n.BYTES):W;te.push(Fe("extraEntropy",ie))}const ae=jr(...te),be=he;function Me(ie){const ye=E(ie);if(!p(ye))return;const Nt=u(ye),$e=d.BASE.multiply(ye).toAffine(),Ie=c($e.x);if(Ie===dt)return;const st=c(Nt*c(be+Ie*oe));if(st===dt)return;let Se=($e.x===Ie?0:2)|Number($e.y&de),vt=st;return D&&h(st)&&(vt=y(st),Se^=1),new w(Ie,vt,Se)}return{seed:ae,k2sig:Me}}const C={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};function _(I,S,M=C){const{seed:B,k2sig:R}=x(I,S,M),D=t;return uh(D.hash.outputLen,D.nByteLength,D.hmac)(B,R)}d.BASE._setWindowSize(8);function j(I,S,M,B=O){const R=I;S=Fe("msgHash",S),M=Fe("publicKey",M);const{lowS:D,prehash:V,format:W}=B;if(Xi(B),"strict"in B)throw new Error("options.strict was renamed to lowS");if(W!==void 0&&W!=="compact"&&W!=="der")throw new Error("format must be compact or der");const he=typeof R=="string"||mr(R),oe=!he&&!W&&typeof R=="object"&&R!==null&&typeof R.r=="bigint"&&typeof R.s=="bigint";if(!he&&!oe)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let te,ae;try{if(oe&&(te=new w(R.r,R.s)),he){try{W!=="compact"&&(te=w.fromDER(R))}catch(Se){if(!(Se instanceof ut.Err))throw Se}!te&&W!=="der"&&(te=w.fromCompact(R))}ae=d.fromHex(M)}catch{return!1}if(!te||D&&te.hasHighS())return!1;V&&(S=t.hash(S));const{r:be,s:Me}=te,ie=P(S),ye=u(Me),Nt=c(ie*ye),$e=c(be*ye),Ie=d.BASE.multiplyAndAddUnsafe(ae,Nt,$e)?.toAffine();return Ie?c(Ie.x)===be:!1}return{CURVE:t,getPublicKey:v,getSharedSecret:g,sign:_,verify:j,ProjectivePoint:d,Signature:w,utils:A}}function qy(e){return{hash:e,hmac:(t,...n)=>k0(e,t,my(...n)),randomBytes:wy}}function Vy(e,t){const n=r=>Hy({...e,...qy(r)});return{...n(t),create:n}}const j0=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Qi=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Wy=BigInt(0),Ky=BigInt(1),Ho=BigInt(2),ec=(e,t)=>(e+t/Ho)/t;function Zy(e){const t=j0,n=BigInt(3),r=BigInt(6),s=BigInt(11),o=BigInt(22),a=BigInt(23),i=BigInt(44),c=BigInt(88),u=e*e*e%t,d=u*u*e%t,f=Re(d,n,t)*d%t,l=Re(f,n,t)*d%t,p=Re(l,Ho,t)*u%t,h=Re(p,s,t)*p%t,y=Re(h,o,t)*h%t,m=Re(y,i,t)*y%t,w=Re(m,c,t)*m%t,A=Re(w,i,t)*y%t,v=Re(A,n,t)*d%t,b=Re(v,a,t)*h%t,g=Re(b,r,t)*u%t,E=Re(g,Ho,t);if(!qo.eql(qo.sqr(E),e))throw new Error("Cannot find square root");return E}const qo=Da(j0,void 0,void 0,{sqrt:Zy}),Ar=Vy({a:Wy,b:BigInt(7),Fp:qo,n:Qi,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=Qi,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-Ky*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=n,a=BigInt("0x100000000000000000000000000000000"),i=ec(o*e,t),c=ec(-r*e,t);let u=ve(e-i*n-c*s,t),d=ve(-i*r-c*o,t);const f=u>a,l=d>a;if(f&&(u=t-u),l&&(d=t-d),u>a||d>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:f,k1:u,k2neg:l,k2:d}}}},$y),Yy=Object.freeze(Object.defineProperty({__proto__:null,secp256k1:Ar},Symbol.toStringTag,{value:"Module"}));function H0(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new so({signature:e});if(typeof e.s>"u")throw new so({signature:e});if(n&&typeof e.yParity>"u")throw new so({signature:e});if(e.r<0n||e.r>Vi)throw new rm({value:e.r});if(e.s<0n||e.s>Vi)throw new sm({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new ja({value:e.yParity})}function Jy(e){return q0(Ke(e))}function q0(e){if(e.length!==130&&e.length!==132)throw new nm({signature:e});const t=BigInt(nt(e,0,32)),n=BigInt(nt(e,32,64)),r=(()=>{const s=+`0x${e.slice(130)}`;if(!Number.isNaN(s))try{return Ga(s)}catch{throw new ja({value:s})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function Xy(e){if(!(typeof e.r>"u")&&!(typeof e.s>"u"))return Qy(e)}function Qy(e){const t=typeof e=="string"?q0(e):e instanceof Uint8Array?Jy(e):typeof e.r=="string"?tm(e):e.v?em(e):{r:e.r,s:e.s,...typeof e.yParity<"u"?{yParity:e.yParity}:{}};return H0(t),t}function em(e){return{r:e.r,s:e.s,yParity:Ga(e.v)}}function tm(e){const t=(()=>{const n=e.v?Number(e.v):void 0;let r=e.yParity?Number(e.yParity):void 0;if(typeof n=="number"&&typeof r!="number"&&(r=Ga(n)),typeof r!="number")throw new ja({value:e.yParity});return r})();return{r:BigInt(e.r),s:BigInt(e.s),yParity:t}}function Ga(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new om({value:e})}class nm extends q{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${Oe(_h(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class so extends q{constructor({signature:t}){super(`Signature \`${Cu(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class rm extends q{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class sm extends q{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class ja extends q{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class om extends q{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}function am(e,t={}){return typeof e.chainId=="string"?im(e):{...e,...t.signature}}function im(e){const{address:t,chainId:n,nonce:r}=e,s=Xy(e);return{address:t,chainId:Number(n),nonce:BigInt(r),...s}}const cm="0x8010801080108010801080108010801080108010801080108010801080108010",um=$0("(uint256 chainId, address delegation, uint256 nonce, uint8 yParity, uint256 r, uint256 s), address to, bytes data");function V0(e){if(typeof e=="string"){if(nt(e,-32)!==cm)throw new lm(e)}else H0(e.authorization)}function dm(e){V0(e);const t=Mu(nt(e,-64,-32)),n=nt(e,-t-64,-64),r=nt(e,0,-t-64),[s,o,a]=cy(um,n);return{authorization:am({address:s.delegation,chainId:Number(s.chainId),nonce:s.nonce,yParity:s.yParity,r:s.r,s:s.s}),signature:r,...a&&a!=="0x"?{data:a,to:o}:{}}}function fm(e){try{return V0(e),!0}catch{return!1}}let lm=class extends q{constructor(t){super(`Value \`${t}\` is an invalid ERC-8010 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc8010.InvalidWrappedSignatureError"})}};class pm extends ${constructor({value:t}){super(`Number \`${t}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function hm(e,t){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(e))throw new pm({value:e});let[n,r="0"]=e.split(".");const s=n.startsWith("-");if(s&&(n=n.slice(1)),r=r.replace(/(0+)$/,""),t===0)Math.round(+`.${r}`)===1&&(n=`${BigInt(n)+1n}`),r="";else if(r.length>t){const[o,a,i]=[r.slice(0,t-1),r.slice(t-1,t),r.slice(t)],c=Math.round(+`${a}.${i}`);c>9?r=`${BigInt(o)+BigInt(1)}0`.padStart(o.length+1,"0"):r=`${o}${c}`,r.length>t&&(r=r.slice(1),n=`${BigInt(n)+1n}`),r=r.slice(0,t)}else r=r.padEnd(t,"0");return BigInt(`${s?"-":""}${n}${r}`)}function bm(e,t="wei"){return hm(e,Xc[t])}function ym(e){return e.map(t=>({...t,value:BigInt(t.value)}))}function mm(e){return{...e,balance:e.balance?BigInt(e.balance):void 0,nonce:e.nonce?Le(e.nonce):void 0,storageProof:e.storageProof?ym(e.storageProof):void 0}}async function gm(e,{address:t,blockNumber:n,blockTag:r,storageKeys:s}){const o=r??"latest",a=n!==void 0?N(n):void 0,i=await e.request({method:"eth_getProof",params:[t,s,a||o]});return mm(i)}async function wm(e,{address:t,blockNumber:n,blockTag:r="latest",slot:s}){const o=n!==void 0?N(n):void 0;return await e.request({method:"eth_getStorageAt",params:[t,s,o||r]})}async function Ha(e,{blockHash:t,blockNumber:n,blockTag:r,hash:s,index:o,sender:a,nonce:i}){const c=r||"latest",u=n!==void 0?N(n):void 0;let d=null;if(s?d=await e.request({method:"eth_getTransactionByHash",params:[s]},{dedupe:!0}):t?d=await e.request({method:"eth_getTransactionByBlockHashAndIndex",params:[t,N(o)]},{dedupe:!0}):typeof o=="number"?d=await e.request({method:"eth_getTransactionByBlockNumberAndIndex",params:[u||c,N(o)]},{dedupe:!!u}):a&&typeof i=="number"&&(d=await e.request({method:"eth_getTransactionBySenderAndNonce",params:[a,N(i)]},{dedupe:!0})),!d)throw new eu({blockHash:t,blockNumber:n,blockTag:c,hash:s,index:o});return(e.chain?.formatters?.transaction?.format||ua)(d,"getTransaction")}async function vm(e,{hash:t,transactionReceipt:n}){const[r,s]=await Promise.all([z(e,vr,"getBlockNumber")({}),t?z(e,Ha,"getTransaction")({hash:t}):void 0]),o=n?.blockNumber||s?.blockNumber;return o?r-o+1n:0n}async function _r(e,{hash:t}){const n=await e.request({method:"eth_getTransactionReceipt",params:[t]},{dedupe:!0});if(!n)throw new tu({hash:t});return(e.chain?.formatters?.transactionReceipt?.format||Ku)(n,"getTransactionReceipt")}async function xm(e,t){const{account:n,authorizationList:r,allowFailure:s=!0,blockNumber:o,blockOverrides:a,blockTag:i,stateOverride:c}=t,u=t.contracts,{batchSize:d=t.batchSize??1024,deployless:f=t.deployless??!1}=typeof e.batch?.multicall=="object"?e.batch.multicall:{},l=(()=>{if(t.multicallAddress)return t.multicallAddress;if(f)return null;if(e.chain)return xn({blockNumber:o,chain:e.chain,contract:"multicall3"});throw new Error("client chain not configured. multicallAddress is required.")})(),p=[[]];let h=0,y=0;for(let A=0;A<u.length;A++){const{abi:v,address:b,args:g,functionName:E}=u[A];try{const P=pe({abi:v,args:g,functionName:E});y+=(P.length-2)/2,d>0&&y>d&&p[h].length>0&&(h++,y=(P.length-2)/2,p[h]=[]),p[h]=[...p[h],{allowFailure:!0,callData:P,target:b}]}catch(P){const T=jt(P,{abi:v,address:b,args:g,docsPath:"/docs/contract/multicall",functionName:E,sender:n});if(!s)throw T;p[h]=[...p[h],{allowFailure:!0,callData:"0x",target:b}]}}const m=await Promise.allSettled(p.map(A=>z(e,Ze,"readContract")({...l===null?{code:Pa}:{address:l},abi:Hr,account:n,args:[A],authorizationList:r,blockNumber:o,blockOverrides:a,blockTag:i,functionName:"aggregate3",stateOverride:c}))),w=[];for(let A=0;A<m.length;A++){const v=m[A];if(v.status==="rejected"){if(!s)throw v.reason;for(let g=0;g<p[A].length;g++)w.push({status:"failure",error:v.reason,result:void 0});continue}const b=v.value;for(let g=0;g<b.length;g++){const{returnData:E,success:P}=b[g],{callData:T}=p[A][g],{abi:k,address:x,functionName:C,args:O}=u[w.length];try{if(T==="0x")throw new cr;if(!P)throw new rs({data:E});const _=Yt({abi:k,args:O,data:E,functionName:C});w.push(s?{result:_,status:"success"}:_)}catch(_){const j=jt(_,{abi:k,address:x,args:O,docsPath:"/docs/contract/multicall",functionName:C});if(!s)throw j;w.push({error:j,result:void 0,status:"failure"})}}}if(w.length!==u.length)throw new $("multicall results mismatch");return w}async function Vo(e,t){const{blockNumber:n,blockTag:r=e.experimental_blockTag??"latest",blocks:s,returnFullTransactions:o,traceTransfers:a,validation:i}=t;try{const c=[];for(const l of s){const p=l.blockOverrides?zu(l.blockOverrides):void 0,h=l.calls.map(m=>{const w=m,A=w.account?Y(w.account):void 0,v=w.abi?pe(w):w.data,b={...w,account:A,data:w.dataSuffix?Ue([v||"0x",w.dataSuffix]):v,from:w.from??A?.address};return wt(b),Bt(b)}),y=l.stateOverrides?ia(l.stateOverrides):void 0;c.push({blockOverrides:p,calls:h,stateOverrides:y})}const d=(typeof n=="bigint"?N(n):void 0)||r;return(await e.request({method:"eth_simulateV1",params:[{blockStateCalls:c,returnFullTransactions:o,traceTransfers:a,validation:i},d]})).map((l,p)=>({...pu(l),calls:l.calls.map((h,y)=>{const{abi:m,args:w,functionName:A,to:v}=s[p].calls[y],b=h.error?.data??h.returnData,g=BigInt(h.gasUsed),E=h.logs?.map(x=>yt(x)),P=h.status==="0x1"?"success":"failure",T=m&&P==="success"&&b!=="0x"?Yt({abi:m,data:b,functionName:A}):null,k=(()=>{if(P==="success")return;let x;if(h.error?.data==="0x"?x=new cr:h.error&&(x=new rs(h.error)),!!x)return jt(x,{abi:m??[],address:v??"0x",args:w,functionName:A??"<unknown>"})})();return{data:b,gasUsed:g,logs:E,status:P,...P==="success"?{result:T}:{error:k}}})}))}catch(c){const u=c,d=os(u,{});throw d instanceof hr?u:d}}function Wo(e){let t=!0,n="",r=0,s="",o=!1;for(let a=0;a<e.length;a++){const i=e[a];if(["(",")",","].includes(i)&&(t=!0),i==="("&&r++,i===")"&&r--,!!t){if(r===0){if(i===" "&&["event","function","error",""].includes(s))s="";else if(s+=i,i===")"){o=!0;break}continue}if(i===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=i,n+=i}}if(!o)throw new q("Unable to normalize signature.");return s}function Ko(e,t){const n=typeof e,r=t.type;switch(r){case"address":return zo(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,o)=>Ko(Object.values(e)[o],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Ko(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function W0(e,t,n){for(const r in e){const s=e[r],o=t[r];if(s.type==="tuple"&&o.type==="tuple"&&"components"in s&&"components"in o)return W0(s.components,o.components,n[r]);const a=[s.type,o.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?zo(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?zo(n[r],{strict:!1}):!1)return a}}function K0(e,t={}){const{prepare:n=!0}=t,r=Array.isArray(e)||typeof e=="string"?ni(e):e;return{...r,...n?{hash:on(r)}:{}}}function vs(e,t,n){const{args:r=[],prepare:s=!0}=n??{},o=Mh(t,{strict:!1}),a=e.filter(u=>o?u.type==="function"||u.type==="error"?Z0(u)===nt(t,0,4):u.type==="event"?on(u)===t:!1:"name"in u&&u.name===t);if(a.length===0)throw new Zr({name:t});if(a.length===1)return{...a[0],...s?{hash:on(a[0])}:{}};let i;for(const u of a){if(!("inputs"in u))continue;if(!r||r.length===0){if(!u.inputs||u.inputs.length===0)return{...u,...s?{hash:on(u)}:{}};continue}if(!u.inputs||u.inputs.length===0||u.inputs.length!==r.length)continue;if(r.every((f,l)=>{const p="inputs"in u&&u.inputs[l];return p?Ko(f,p):!1})){if(i&&"inputs"in i&&i.inputs){const f=W0(u.inputs,i.inputs,r);if(f)throw new Am({abiItem:u,type:f[0]},{abiItem:i,type:f[1]})}i=u}}const c=(()=>{if(i)return i;const[u,...d]=a;return{...u,overloads:d}})();if(!c)throw new Zr({name:t});return{...c,...s?{hash:on(c)}:{}}}function Z0(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return vs(n,r)}return e[0]})();return nt(on(t),0,4)}function Em(...e){const t=(()=>{if(Array.isArray(e[0])){const[r,s]=e;return vs(r,s)}return e[0]})(),n=typeof t=="string"?t:zr(t);return Wo(n)}function on(...e){const t=(()=>{if(Array.isArray(e[0])){const[n,r]=e;return vs(n,r)}return e[0]})();return typeof t!="string"&&"hash"in t&&t.hash?t.hash:A0(Aa(Em(t)))}class Am extends q{constructor(t,n){super("Found ambiguous types in overloaded ABI Items.",{metaMessages:[`\`${t.type}\` in \`${Wo(zr(t.abiItem))}\`, and`,`\`${n.type}\` in \`${Wo(zr(n.abiItem))}\``,"","These types encode differently and cannot be distinguished at runtime.","Remove one of the ambiguous items in the ABI."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.AmbiguityError"})}}class Zr extends q{constructor({name:t,data:n,type:r="item"}){const s=t?` with name "${t}"`:n?` with data "${n}"`:"";super(`ABI ${r}${s} not found.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiItem.NotFoundError"})}}function Pm(...e){const[t,n]=(()=>{if(Array.isArray(e[0])){const[o,a]=e;return[$m(o),a]}return e})(),{bytecode:r,args:s}=n;return We(r,t.inputs?.length&&s?.length?za(t.inputs,s):"0x")}function Tm(e){return K0(e)}function $m(e){const t=e.find(n=>n.type==="constructor");if(!t)throw new Zr({name:"constructor"});return t}function Im(...e){const[t,n=[]]=(()=>{if(Array.isArray(e[0])){const[u,d,f]=e;return[tc(u,d,{args:f}),f]}const[i,c]=e;return[i,c]})(),{overloads:r}=t,s=r?tc([t,...r],t.name,{args:n}):t,o=Sm(s),a=n.length>0?za(s.inputs,n):void 0;return a?We(o,a):o}function en(e,t={}){return K0(e,t)}function tc(e,t,n){const r=vs(e,t,n);if(r.type!=="function")throw new Zr({name:t,type:"function"});return r}function Sm(e){return Z0(e)}const Bm="0xeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee",Qe="0x0000000000000000000000000000000000000000",Cm="0x6080604052348015600e575f80fd5b5061016d8061001c5f395ff3fe608060405234801561000f575f80fd5b5060043610610029575f3560e01c8063f8b2cb4f1461002d575b5f80fd5b610047600480360381019061004291906100db565b61005d565b604051610054919061011e565b60405180910390f35b5f8173ffffffffffffffffffffffffffffffffffffffff16319050919050565b5f80fd5b5f73ffffffffffffffffffffffffffffffffffffffff82169050919050565b5f6100aa82610081565b9050919050565b6100ba816100a0565b81146100c4575f80fd5b50565b5f813590506100d5816100b1565b92915050565b5f602082840312156100f0576100ef61007d565b5b5f6100fd848285016100c7565b91505092915050565b5f819050919050565b61011881610106565b82525050565b5f6020820190506101315f83018461010f565b9291505056fea26469706673582212203b9fe929fe995c7cf9887f0bdba8a36dd78e8b73f149b17d2d9ad7cd09d2dc6264736f6c634300081a0033";async function km(e,t){const{blockNumber:n,blockTag:r,calls:s,stateOverrides:o,traceAssetChanges:a,traceTransfers:i,validation:c}=t,u=t.account?Y(t.account):void 0;if(a&&!u)throw new $("`account` is required when `traceAssetChanges` is true");const d=u?Pm(Tm("constructor(bytes, bytes)"),{bytecode:Gu,args:[Cm,Im(en("function getBalance(address)"),[u.address])]}):void 0,f=a?await Promise.all(t.calls.map(async B=>{if(!B.data&&!B.abi)return;const{accessList:R}=await a0(e,{account:u.address,...B,data:B.abi?pe(B):B.data});return R.map(({address:D,storageKeys:V})=>V.length>0?D:null)})).then(B=>B.flat().filter(Boolean)):[],l=await Vo(e,{blockNumber:n,blockTag:r,blocks:[...a?[{calls:[{data:d}],stateOverrides:o},{calls:f.map((B,R)=>({abi:[en("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:B,from:Qe,nonce:R})),stateOverrides:[{address:Qe,nonce:0}]}]:[],{calls:[...s,{}].map(B=>({...B,from:u?.address})),stateOverrides:o},...a?[{calls:[{data:d}]},{calls:f.map((B,R)=>({abi:[en("function balanceOf(address) returns (uint256)")],functionName:"balanceOf",args:[u.address],to:B,from:Qe,nonce:R})),stateOverrides:[{address:Qe,nonce:0}]},{calls:f.map((B,R)=>({to:B,abi:[en("function decimals() returns (uint256)")],functionName:"decimals",from:Qe,nonce:R})),stateOverrides:[{address:Qe,nonce:0}]},{calls:f.map((B,R)=>({to:B,abi:[en("function tokenURI(uint256) returns (string)")],functionName:"tokenURI",args:[0n],from:Qe,nonce:R})),stateOverrides:[{address:Qe,nonce:0}]},{calls:f.map((B,R)=>({to:B,abi:[en("function symbol() returns (string)")],functionName:"symbol",from:Qe,nonce:R})),stateOverrides:[{address:Qe,nonce:0}]}]:[]],traceTransfers:i,validation:c}),p=a?l[2]:l[0],[h,y,,m,w,A,v,b]=a?l:[],{calls:g,...E}=p,P=g.slice(0,-1)??[],T=h?.calls??[],k=y?.calls??[],x=[...T,...k].map(B=>B.status==="success"?ke(B.data):null),C=m?.calls??[],O=w?.calls??[],_=[...C,...O].map(B=>B.status==="success"?ke(B.data):null),j=(A?.calls??[]).map(B=>B.status==="success"?B.result:null),I=(b?.calls??[]).map(B=>B.status==="success"?B.result:null),S=(v?.calls??[]).map(B=>B.status==="success"?B.result:null),M=[];for(const[B,R]of _.entries()){const D=x[B];if(typeof R!="bigint"||typeof D!="bigint")continue;const V=j[B-1],W=I[B-1],he=S[B-1],oe=B===0?{address:Bm,decimals:18,symbol:"ETH"}:{address:f[B-1],decimals:he||V?Number(V??1):void 0,symbol:W??void 0};M.some(te=>te.token.address===oe.address)||M.push({token:oe,value:{pre:D,post:R,diff:R-D}})}return{assetChanges:M,block:E,results:P}}const Y0="0x6492649264926492649264926492649264926492649264926492649264926492";function Nm(e){if(nt(e,-32)!==Y0)throw new Mm(e)}function Om(e){const{data:t,signature:n,to:r}=e;return We(za($0("address, bytes, bytes"),[r,t,n]),Y0)}function _m(e){try{return Nm(e),!0}catch{return!1}}class Mm extends q{constructor(t){super(`Value \`${t}\` is an invalid ERC-6492 wrapped signature.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SignatureErc6492.InvalidWrappedSignatureError"})}}function J0({r:e,s:t,to:n="hex",v:r,yParity:s}){const o=(()=>{if(s===0||s===1)return s;if(r&&(r===27n||r===28n||r>=35n))return r%2n===0n?1:0;throw new Error("Invalid `v` or `yParity` value")})(),a=`0x${new Ar.Signature(ke(e),ke(t)).toCompactHex()}${o===0?"1b":"1c"}`;return n==="hex"?a:Ve(a)}async function xs(e,t){const{address:n,chain:r=e.chain,hash:s,erc6492VerifierAddress:o=t.universalSignatureVerifierAddress??r?.contracts?.erc6492Verifier?.address,multicallAddress:a=t.multicallAddress??r?.contracts?.multicall3?.address}=t;if(r?.verifyHash)return await r.verifyHash(e,t);const i=(()=>{const c=t.signature;return qe(c)?c:typeof c=="object"&&"r"in c&&"s"in c?J0(c):se(c)})();try{return fm(i)?await Rm(e,{...t,multicallAddress:a,signature:i}):await Fm(e,{...t,verifierAddress:o,signature:i})}catch(c){try{if(yr(ea(n),await au({hash:s,signature:i})))return!0}catch{}if(c instanceof Kt)return!1;throw c}}async function Rm(e,t){const{address:n,blockNumber:r,blockTag:s,hash:o,multicallAddress:a}=t,{authorization:i,data:c,signature:u,to:d}=dm(t.signature);if(await Fo(e,{address:n,blockNumber:r,blockTag:s})===rt(["0xef0100",i.address]))return await zm(e,{address:n,blockNumber:r,blockTag:s,hash:o,signature:u});const l={address:i.address,chainId:Number(i.chainId),nonce:Number(i.nonce),r:N(i.r,{size:32}),s:N(i.s,{size:32}),yParity:i.yParity};if(!await K1({address:n,authorization:l}))throw new Kt;const h=await z(e,Ze,"readContract")({...a?{address:a}:{code:Pa},authorizationList:[l],abi:Hr,blockNumber:r,blockTag:"pending",functionName:"aggregate3",args:[[...c?[{allowFailure:!0,target:d??n,callData:c}]:[],{allowFailure:!0,target:n,callData:pe({abi:Du,functionName:"isValidSignature",args:[o,u]})}]]});if(h[h.length-1]?.returnData?.startsWith("0x1626ba7e"))return!0;throw new Kt}async function Fm(e,t){const{address:n,factory:r,factoryData:s,hash:o,signature:a,verifierAddress:i,...c}=t,u=await(async()=>!r&&!s||_m(a)?a:Om({data:s,signature:a,to:r}))(),d=i?{to:i,data:pe({abi:_i,functionName:"isValidSig",args:[n,o,u]}),...c}:{data:ls({abi:_i,args:[n,o,u],bytecode:Gh}),...c},{data:f}=await z(e,ps,"call")(d).catch(l=>{throw l instanceof ru?new Kt:l});if(fl(f??"0x0"))return!0;throw new Kt}async function zm(e,t){const{address:n,blockNumber:r,blockTag:s,hash:o,signature:a}=t;if((await z(e,Ze,"readContract")({address:n,abi:Du,args:[o,a],blockNumber:r,blockTag:s,functionName:"isValidSignature"}).catch(c=>{throw c instanceof su?new Kt:c})).startsWith("0x1626ba7e"))return!0;throw new Kt}class Kt extends Error{}async function Lm(e,{address:t,message:n,factory:r,factoryData:s,signature:o,...a}){const i=Oa(n);return z(e,xs,"verifyHash")({address:t,factory:r,factoryData:s,hash:i,signature:o,...a})}async function Um(e,t){const{address:n,factory:r,factoryData:s,signature:o,message:a,primaryType:i,types:c,domain:u,...d}=t,f=l0({message:a,primaryType:i,types:c,domain:u});return z(e,xs,"verifyHash")({address:n,factory:r,factoryData:s,hash:f,signature:o,...d})}function X0(e,{emitOnBegin:t=!1,emitMissed:n=!1,onBlockNumber:r,onError:s,poll:o,pollingInterval:a=e.pollingInterval}){const i=typeof o<"u"?o:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc"));let c;return i?(()=>{const f=ce(["watchBlockNumber",e.uid,t,n,a]);return mt(f,{onBlockNumber:r,onError:s},l=>En(async()=>{try{const p=await z(e,vr,"getBlockNumber")({cacheTime:0});if(c!==void 0){if(p===c)return;if(p-c>1&&n)for(let h=c+1n;h<p;h++)l.onBlockNumber(h,c),c=h}(c===void 0||p>c)&&(l.onBlockNumber(p,c),c=p)}catch(p){l.onError?.(p)}},{emitOnBegin:t,interval:a}))})():(()=>{const f=ce(["watchBlockNumber",e.uid,t,n]);return mt(f,{onBlockNumber:r,onError:s},l=>{let p=!0,h=()=>p=!1;return(async()=>{try{const y=(()=>{if(e.transport.type==="fallback"){const w=e.transport.transports.find(A=>A.config.type==="webSocket"||A.config.type==="ipc");return w?w.value:e.transport}return e.transport})(),{unsubscribe:m}=await y.subscribe({params:["newHeads"],onData(w){if(!p)return;const A=ke(w.result?.number);l.onBlockNumber(A,c),c=A},onError(w){l.onError?.(w)}});h=m,p||h()}catch(y){s?.(y)}})(),()=>h()})})()}async function Q0(e,t){const{checkReplacement:n=!0,confirmations:r=1,hash:s,onReplaced:o,retryCount:a=6,retryDelay:i=({count:g})=>~~(1<<g)*200,timeout:c=18e4}=t,u=ce(["waitForTransactionReceipt",e.uid,s]),d=t.pollingInterval?t.pollingInterval:e.chain?.experimental_preconfirmationTime?e.chain.experimental_preconfirmationTime:e.pollingInterval;let f,l,p,h=!1,y,m;const{promise:w,resolve:A,reject:v}=Ta(),b=c?setTimeout(()=>{m?.(),y?.(),v(new Tp({hash:s}))},c):void 0;return y=mt(u,{onReplaced:o,resolve:A,reject:v},async g=>{if(p=await z(e,_r,"getTransactionReceipt")({hash:s}).catch(()=>{}),p&&r<=1){clearTimeout(b),g.resolve(p),y?.();return}m=z(e,X0,"watchBlockNumber")({emitMissed:!0,emitOnBegin:!0,poll:!0,pollingInterval:d,async onBlockNumber(E){const P=k=>{clearTimeout(b),m?.(),k(),y?.()};let T=E;if(!h)try{if(p){if(r>1&&(!p.blockNumber||T-p.blockNumber+1n<r))return;P(()=>g.resolve(p));return}if(n&&!f&&(h=!0,await qr(async()=>{f=await z(e,Ha,"getTransaction")({hash:s}),f.blockNumber&&(T=f.blockNumber)},{delay:i,retryCount:a}),h=!1),p=await z(e,_r,"getTransactionReceipt")({hash:s}),r>1&&(!p.blockNumber||T-p.blockNumber+1n<r))return;P(()=>g.resolve(p))}catch(k){if(k instanceof eu||k instanceof tu){if(!f){h=!1;return}try{l=f,h=!0;const x=await qr(()=>z(e,je,"getBlock")({blockNumber:T,includeTransactions:!0}),{delay:i,retryCount:a,shouldRetry:({error:_})=>_ instanceof fu});h=!1;const C=x.transactions.find(({from:_,nonce:j})=>_===l.from&&j===l.nonce);if(!C||(p=await z(e,_r,"getTransactionReceipt")({hash:C.hash}),r>1&&(!p.blockNumber||T-p.blockNumber+1n<r)))return;let O="replaced";C.to===l.to&&C.value===l.value&&C.input===l.input?O="repriced":C.from===C.to&&C.value===0n&&(O="cancelled"),P(()=>{g.onReplaced?.({reason:O,replacedTransaction:l,transaction:C,transactionReceipt:p}),g.resolve(p)})}catch(x){P(()=>g.reject(x))}}else P(()=>g.reject(k))}}})}),w}function Dm(e,{blockTag:t=e.experimental_blockTag??"latest",emitMissed:n=!1,emitOnBegin:r=!1,onBlock:s,onError:o,includeTransactions:a,poll:i,pollingInterval:c=e.pollingInterval}){const u=typeof i<"u"?i:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),d=a??!1;let f;return u?(()=>{const h=ce(["watchBlocks",e.uid,t,n,r,d,c]);return mt(h,{onBlock:s,onError:o},y=>En(async()=>{try{const m=await z(e,je,"getBlock")({blockTag:t,includeTransactions:d});if(m.number!==null&&f?.number!=null){if(m.number===f.number)return;if(m.number-f.number>1&&n)for(let w=f?.number+1n;w<m.number;w++){const A=await z(e,je,"getBlock")({blockNumber:w,includeTransactions:d});y.onBlock(A,f),f=A}}(f?.number==null||t==="pending"&&m?.number==null||m.number!==null&&m.number>f.number)&&(y.onBlock(m,f),f=m)}catch(m){y.onError?.(m)}},{emitOnBegin:r,interval:c}))})():(()=>{let h=!0,y=!0,m=()=>h=!1;return(async()=>{try{r&&z(e,je,"getBlock")({blockTag:t,includeTransactions:d}).then(v=>{h&&y&&(s(v,void 0),y=!1)}).catch(o);const w=(()=>{if(e.transport.type==="fallback"){const v=e.transport.transports.find(b=>b.config.type==="webSocket"||b.config.type==="ipc");return v?v.value:e.transport}return e.transport})(),{unsubscribe:A}=await w.subscribe({params:["newHeads"],async onData(v){if(!h)return;const b=await z(e,je,"getBlock")({blockNumber:v.result?.number,includeTransactions:d}).catch(()=>{});h&&(s(b,f),y=!1,f=b)},onError(v){o?.(v)}});m=A,h||m()}catch(w){o?.(w)}})(),()=>m()})()}function Gm(e,{address:t,args:n,batch:r=!0,event:s,events:o,fromBlock:a,onError:i,onLogs:c,poll:u,pollingInterval:d=e.pollingInterval,strict:f}){const l=typeof u<"u"?u:typeof a=="bigint"?!0:!(e.transport.type==="webSocket"||e.transport.type==="ipc"||e.transport.type==="fallback"&&(e.transport.transports[0].config.type==="webSocket"||e.transport.transports[0].config.type==="ipc")),p=f??!1;return l?(()=>{const m=ce(["watchEvent",t,n,r,e.uid,s,d,a]);return mt(m,{onLogs:c,onError:i},w=>{let A;a!==void 0&&(A=a-1n);let v,b=!1;const g=En(async()=>{if(!b){try{v=await z(e,i0,"createEventFilter")({address:t,args:n,event:s,events:o,strict:p,fromBlock:a})}catch{}b=!0;return}try{let E;if(v)E=await z(e,hs,"getFilterChanges")({filter:v});else{const P=await z(e,vr,"getBlockNumber")({});A&&A!==P?E=await z(e,wa,"getLogs")({address:t,args:n,event:s,events:o,fromBlock:A+1n,toBlock:P}):E=[],A=P}if(E.length===0)return;if(r)w.onLogs(E);else for(const P of E)w.onLogs([P])}catch(E){v&&E instanceof St&&(b=!1),w.onError?.(E)}},{emitOnBegin:!0,interval:d});return async()=>{v&&await z(e,bs,"uninstallFilter")({filter:v}),g()}})})():(()=>{let m=!0,w=()=>m=!1;return(async()=>{try{const A=(()=>{if(e.transport.type==="fallback"){const E=e.transport.transports.find(P=>P.config.type==="webSocket"||P.config.type==="ipc");return E?E.value:e.transport}return e.transport})(),v=o??(s?[s]:void 0);let b=[];v&&(b=[v.flatMap(P=>fr({abi:[P],eventName:P.name,args:n}))],s&&(b=b[0]));const{unsubscribe:g}=await A.subscribe({params:["logs",{address:t,topics:b}],onData(E){if(!m)return;const P=E.result;try{const{eventName:T,args:k}=Dr({abi:v??[],data:P.data,topics:P.topics,strict:p}),x=yt(P,{args:k,eventName:T});c([x])}catch(T){let k,x;if(T instanceof Lr||T instanceof Xo){if(f)return;k=T.abiItem.name,x=T.abiItem.inputs?.some(O=>!("name"in O&&O.name))}const C=yt(P,{args:x?[]:{},eventName:k});c([C])}},onError(E){i?.(E)}});w=g,m||w()}catch(A){i?.(A)}})(),()=>w()})()}function jm(e,{batch:t=!0,onError:n,onTransactions:r,poll:s,pollingInterval:o=e.pollingInterval}){return(typeof s<"u"?s:e.transport.type!=="webSocket"&&e.transport.type!=="ipc")?(()=>{const u=ce(["watchPendingTransactions",e.uid,t,o]);return mt(u,{onTransactions:r,onError:n},d=>{let f;const l=En(async()=>{try{if(!f)try{f=await z(e,c0,"createPendingTransactionFilter")({});return}catch(h){throw l(),h}const p=await z(e,hs,"getFilterChanges")({filter:f});if(p.length===0)return;if(t)d.onTransactions(p);else for(const h of p)d.onTransactions([h])}catch(p){d.onError?.(p)}},{emitOnBegin:!0,interval:o});return async()=>{f&&await z(e,bs,"uninstallFilter")({filter:f}),l()}})})():(()=>{let u=!0,d=()=>u=!1;return(async()=>{try{const{unsubscribe:f}=await e.transport.subscribe({params:["newPendingTransactions"],onData(l){if(!u)return;const p=l.result;r([p])},onError(l){n?.(l)}});d=f,u||d()}catch(f){n?.(f)}})(),()=>d()})()}function Hm(e){const{scheme:t,statement:n,...r}=e.match(qm)?.groups??{},{chainId:s,expirationTime:o,issuedAt:a,notBefore:i,requestId:c,...u}=e.match(Vm)?.groups??{},d=e.split("Resources:")[1]?.split(`
- `).slice(1);return{...r,...u,...s?{chainId:Number(s)}:{},...o?{expirationTime:new Date(o)}:{},...a?{issuedAt:new Date(a)}:{},...i?{notBefore:new Date(i)}:{},...c?{requestId:c}:{},...d?{resources:d}:{},...t?{scheme:t}:{},...n?{statement:n}:{}}}const qm=/^(?:(?<scheme>[a-zA-Z][a-zA-Z0-9+-.]*):\/\/)?(?<domain>[a-zA-Z0-9+-.]*(?::[0-9]{1,5})?) (?:wants you to sign in with your Ethereum account:\n)(?<address>0x[a-fA-F0-9]{40})\n\n(?:(?<statement>.*)\n\n)?/,Vm=/(?:URI: (?<uri>.+))\n(?:Version: (?<version>.+))\n(?:Chain ID: (?<chainId>\d+))\n(?:Nonce: (?<nonce>[a-zA-Z0-9]+))\n(?:Issued At: (?<issuedAt>.+))(?:\nExpiration Time: (?<expirationTime>.+))?(?:\nNot Before: (?<notBefore>.+))?(?:\nRequest ID: (?<requestId>.+))?/;function Wm(e){const{address:t,domain:n,message:r,nonce:s,scheme:o,time:a=new Date}=e;if(n&&r.domain!==n||s&&r.nonce!==s||o&&r.scheme!==o||r.expirationTime&&a>=r.expirationTime||r.notBefore&&a<r.notBefore)return!1;try{if(!r.address||!ue(r.address,{strict:!1})||t&&!yr(r.address,t))return!1}catch{return!1}return!0}async function Km(e,t){const{address:n,domain:r,message:s,nonce:o,scheme:a,signature:i,time:c=new Date,...u}=t,d=Hm(s);if(!d.address||!Wm({address:n,domain:r,message:d,nonce:o,scheme:a,time:c}))return!1;const l=Oa(s);return xs(e,{address:d.address,hash:l,signature:i,...u})}async function qa(e,{serializedTransaction:t,throwOnReceiptRevert:n,timeout:r}){const s=await e.request({method:"eth_sendRawTransactionSync",params:r?[t,N(r)]:[t]},{retryCount:0}),a=(e.chain?.formatters?.transactionReceipt?.format||Ku)(s);if(a.status==="reverted"&&n)throw new nu({receipt:a});return a}function Zm(e){return{call:t=>ps(e,t),createAccessList:t=>a0(e,t),createBlockFilter:()=>I1(e),createContractEventFilter:t=>Kc(e,t),createEventFilter:t=>i0(e,t),createPendingTransactionFilter:()=>c0(e),estimateContractGas:t=>sh(e,t),estimateGas:t=>ma(e,t),getBalance:t=>S1(e,t),getBlobBaseFee:()=>B1(e),getBlock:t=>je(e,t),getBlockNumber:t=>vr(e,t),getBlockTransactionCount:t=>C1(e,t),getBytecode:t=>Fo(e,t),getChainId:()=>Ct(e),getCode:t=>Fo(e,t),getContractEvents:t=>Eu(e,t),getEip712Domain:t=>N1(e,t),getEnsAddress:t=>f1(e,t),getEnsAvatar:t=>P1(e,t),getEnsName:t=>T1(e,t),getEnsResolver:t=>$1(e,t),getEnsText:t=>o0(e,t),getFeeHistory:t=>M1(e,t),estimateFeesPerGas:t=>jp(e,t),getFilterChanges:t=>hs(e,t),getFilterLogs:t=>R1(e,t),getGasPrice:()=>da(e),getLogs:t=>wa(e,t),getProof:t=>gm(e,t),estimateMaxPriorityFeePerGas:t=>Gp(e,t),fillTransaction:t=>ba(e,t),getStorageAt:t=>wm(e,t),getTransaction:t=>Ha(e,t),getTransactionConfirmations:t=>vm(e,t),getTransactionCount:t=>fa(e,t),getTransactionReceipt:t=>_r(e,t),multicall:t=>xm(e,t),prepareTransactionRequest:t=>br(e,t),readContract:t=>Ze(e,t),sendRawTransaction:t=>Ia(e,t),sendRawTransactionSync:t=>qa(e,t),simulate:t=>Vo(e,t),simulateBlocks:t=>Vo(e,t),simulateCalls:t=>km(e,t),simulateContract:t=>Zh(e,t),verifyHash:t=>xs(e,t),verifyMessage:t=>Lm(e,t),verifySiweMessage:t=>Km(e,t),verifyTypedData:t=>Um(e,t),uninstallFilter:t=>bs(e,t),waitForTransactionReceipt:t=>Q0(e,t),watchBlocks:t=>Dm(e,t),watchBlockNumber:t=>X0(e,t),watchContractEvent:t=>n1(e,t),watchEvent:t=>Gm(e,t),watchPendingTransactions:t=>jm(e,t)}}function ed(e){const{key:t="public",name:n="Public Client"}=e;return t0({...e,key:t,name:n,type:"publicClient"}).extend(Zm)}async function Ym(e,{chain:t}){const{id:n,name:r,nativeCurrency:s,rpcUrls:o,blockExplorers:a}=t;await e.request({method:"wallet_addEthereumChain",params:[{chainId:N(n),chainName:r,nativeCurrency:s,rpcUrls:o.default.http,blockExplorerUrls:a?Object.values(a).map(({url:i})=>i):void 0}]},{dedupe:!0,retryCount:0})}function Jm(e,t){const{abi:n,args:r,bytecode:s,...o}=t,a=ls({abi:n,args:r,bytecode:s});return ys(e,{...o,...o.authorizationList?{to:null}:{},data:a})}async function Xm(e){return e.account?.type==="local"?[e.account.address]:(await e.request({method:"eth_accounts"},{dedupe:!0})).map(n=>ur(n))}async function Qm(e,t={}){const{account:n=e.account,chainId:r}=t,s=n?Y(n):void 0,o=r?[s?.address,[N(r)]]:[s?.address],a=await e.request({method:"wallet_getCapabilities",params:o}),i={};for(const[c,u]of Object.entries(a)){i[Number(c)]={};for(let[d,f]of Object.entries(u))d==="addSubAccount"&&(d="unstable_addSubAccount"),i[Number(c)][d]=f}return typeof r=="number"?i[r]:i}async function eg(e){return await e.request({method:"wallet_getPermissions"},{dedupe:!0})}async function td(e,t){const{account:n=e.account,chainId:r,nonce:s}=t;if(!n)throw new kt({docsPath:"/docs/eip7702/prepareAuthorization"});const o=Y(n),a=(()=>{if(t.executor)return t.executor==="self"?t.executor:Y(t.executor)})(),i={address:t.contractAddress??t.address,chainId:r,nonce:s};return typeof i.chainId>"u"&&(i.chainId=e.chain?.id??await z(e,Ct,"getChainId")({})),typeof i.nonce>"u"&&(i.nonce=await z(e,fa,"getTransactionCount")({address:o.address,blockTag:"pending"}),(a==="self"||a?.address&&yr(a.address,o.address))&&(i.nonce+=1)),i}async function tg(e){return(await e.request({method:"eth_requestAccounts"},{dedupe:!0,retryCount:0})).map(n=>ea(n))}async function ng(e,t){return e.request({method:"wallet_requestPermissions",params:[t]},{retryCount:0})}async function rg(e,t){const{chain:n=e.chain}=t,r=t.timeout??Math.max((n?.blockTime??0)*3,5e3),s=await Ju(e,t);return await Qu(e,{...t,id:s.id,timeout:r})}const oo=new wn(128);async function nd(e,t){const{account:n=e.account,chain:r=e.chain,accessList:s,authorizationList:o,blobs:a,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:l,nonce:p,pollingInterval:h,throwOnReceiptRevert:y,type:m,value:w,...A}=t,v=t.timeout??Math.max((r?.blockTime??0)*3,5e3);if(typeof n>"u")throw new kt({docsPath:"/docs/actions/wallet/sendTransactionSync"});const b=n?Y(n):null;try{wt(t);const g=await(async()=>{if(t.to)return t.to;if(t.to!==null&&o&&o.length>0)return await ss({authorization:o[0]}).catch(()=>{throw new $("`to` is required. Could not infer from `authorizationList`.")})})();if(b?.type==="json-rpc"||b===null){let E;r!==null&&(E=await z(e,Ct,"getChainId")({}),$a({currentChainId:E,chain:r}));const P=e.chain?.formatters?.transactionRequest?.format,k=(P||Bt)({...vn(A,{format:P}),accessList:s,account:b,authorizationList:o,blobs:a,chainId:E,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:l,nonce:p,to:g,type:m,value:w},"sendTransaction"),x=oo.get(e.uid),C=x?"wallet_sendTransaction":"eth_sendTransaction",O=await(async()=>{try{return await e.request({method:C,params:[k]},{retryCount:0})}catch(j){if(x===!1)throw j;const I=j;if(I.name==="InvalidInputRpcError"||I.name==="InvalidParamsRpcError"||I.name==="MethodNotFoundRpcError"||I.name==="MethodNotSupportedRpcError")return await e.request({method:"wallet_sendTransaction",params:[k]},{retryCount:0}).then(S=>(oo.set(e.uid,!0),S)).catch(S=>{const M=S;throw M.name==="MethodNotFoundRpcError"||M.name==="MethodNotSupportedRpcError"?(oo.set(e.uid,!1),I):M});throw I}})(),_=await z(e,Q0,"waitForTransactionReceipt")({checkReplacement:!1,hash:O,pollingInterval:h,timeout:v});if(y&&_.status==="reverted")throw new nu({receipt:_});return _}if(b?.type==="local"){const E=await z(e,br,"prepareTransactionRequest")({account:b,accessList:s,authorizationList:o,blobs:a,chain:r,data:i,gas:c,gasPrice:u,maxFeePerBlobGas:d,maxFeePerGas:f,maxPriorityFeePerGas:l,nonce:p,nonceManager:b.nonceManager,parameters:[...ya,"sidecars"],type:m,value:w,...A,to:g}),P=r?.serializers?.transaction,T=await b.signTransaction(E,{serializer:P});return await z(e,qa,"sendRawTransactionSync")({serializedTransaction:T,throwOnReceiptRevert:y})}throw b?.type==="smart"?new Ut({metaMessages:["Consider using the `sendUserOperation` Action instead."],docsPath:"/docs/actions/bundler/sendUserOperation",type:"smart"}):new Ut({docsPath:"/docs/actions/wallet/sendTransactionSync",type:b?.type})}catch(g){throw g instanceof Ut?g:is(g,{...t,account:b,chain:t.chain||void 0})}}async function sg(e,t){const{id:n}=t;await e.request({method:"wallet_showCallsStatus",params:[n]})}async function og(e,t){const{account:n=e.account}=t;if(!n)throw new kt({docsPath:"/docs/eip7702/signAuthorization"});const r=Y(n);if(!r.signAuthorization)throw new Ut({docsPath:"/docs/eip7702/signAuthorization",metaMessages:["The `signAuthorization` Action does not support JSON-RPC Accounts."],type:r.type});const s=await td(e,t);return r.signAuthorization(s)}async function ag(e,{account:t=e.account,message:n}){if(!t)throw new kt({docsPath:"/docs/actions/wallet/signMessage"});const r=Y(t);if(r.signMessage)return r.signMessage({message:n});const s=typeof n=="string"?ln(n):n.raw instanceof Uint8Array?Q(n.raw):n.raw;return e.request({method:"personal_sign",params:[s,r.address]},{retryCount:0})}async function ig(e,t){const{account:n=e.account,chain:r=e.chain,...s}=t;if(!n)throw new kt({docsPath:"/docs/actions/wallet/signTransaction"});const o=Y(n);wt({account:o,...t});const a=await z(e,Ct,"getChainId")({});r!==null&&$a({currentChainId:a,chain:r});const c=(r?.formatters||e.chain?.formatters)?.transactionRequest?.format||Bt;return o.signTransaction?o.signTransaction({...s,chainId:a},{serializer:e.chain?.serializers?.transaction}):await e.request({method:"eth_signTransaction",params:[{...c({...s,account:o},"signTransaction"),chainId:N(a),from:o.address}]},{retryCount:0})}async function cg(e,t){const{account:n=e.account,domain:r,message:s,primaryType:o}=t;if(!n)throw new kt({docsPath:"/docs/actions/wallet/signTypedData"});const a=Y(n),i={EIP712Domain:f0({domain:r}),...t.types};if(d0({domain:r,message:s,primaryType:o,types:i}),a.signTypedData)return a.signTypedData({domain:r,message:s,primaryType:o,types:i});const c=ab({domain:r,message:s,primaryType:o,types:i});return e.request({method:"eth_signTypedData_v4",params:[a.address,c]},{retryCount:0})}async function ug(e,{id:t}){await e.request({method:"wallet_switchEthereumChain",params:[{chainId:N(t)}]},{retryCount:0})}async function dg(e,t){return await e.request({method:"wallet_watchAsset",params:t},{retryCount:0})}async function fg(e,t){return or.internal(e,nd,"sendTransactionSync",t)}function lg(e){return{addChain:t=>Ym(e,t),deployContract:t=>Jm(e,t),fillTransaction:t=>ba(e,t),getAddresses:()=>Xm(e),getCallsStatus:t=>Xu(e,t),getCapabilities:t=>Qm(e,t),getChainId:()=>Ct(e),getPermissions:()=>eg(e),prepareAuthorization:t=>td(e,t),prepareTransactionRequest:t=>br(e,t),requestAddresses:()=>tg(e),requestPermissions:t=>ng(e,t),sendCalls:t=>Ju(e,t),sendCallsSync:t=>rg(e,t),sendRawTransaction:t=>Ia(e,t),sendRawTransactionSync:t=>qa(e,t),sendTransaction:t=>ys(e,t),sendTransactionSync:t=>nd(e,t),showCallsStatus:t=>sg(e,t),signAuthorization:t=>og(e,t),signMessage:t=>ag(e,t),signTransaction:t=>ig(e,t),signTypedData:t=>cg(e,t),switchChain:t=>ug(e,t),waitForCallsStatus:t=>Qu(e,t),watchAsset:t=>dg(e,t),writeContract:t=>or(e,t),writeContractSync:t=>fg(e,t)}}function pg(e){const{key:t="wallet",name:n="Wallet Client",transport:r}=e;return t0({...e,key:t,name:n,transport:r,type:"walletClient"}).extend(lg)}function rd({key:e,methods:t,name:n,request:r,retryCount:s=3,retryDelay:o=150,timeout:a,type:i},c){const u=e0();return{config:{key:e,methods:t,name:n,request:r,retryCount:s,retryDelay:o,timeout:a,type:i},request:Y1(r,{methods:t,retryCount:s,retryDelay:o,uid:u}),value:c}}function hg(e,t={}){const{key:n="custom",methods:r,name:s="Custom Provider",retryDelay:o}=t;return({retryCount:a})=>rd({key:n,methods:r,name:s,request:e.request.bind(e),retryCount:t.retryCount??a,retryDelay:o,type:"custom"})}class bg extends ${constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function sd(e,t={}){const{batch:n,fetchFn:r,fetchOptions:s,key:o="http",methods:a,name:i="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:u,retryDelay:d,raw:f}=t;return({chain:l,retryCount:p,timeout:h})=>{const{batchSize:y=1e3,wait:m=0}=typeof n=="object"?n:{},w=t.retryCount??p,A=h??t.timeout??1e4,v=l?.rpcUrls.default.http[0];if(!v)throw new bg;const b=eb(v,{fetchFn:r,fetchOptions:s,onRequest:c,onResponse:u,timeout:A});return rd({key:o,methods:a,name:i,async request({method:g,params:E}){const P={method:g,params:E},{schedule:T}=qu({id:v,wait:m,shouldSplitBatch(O){return O.length>y},fn:O=>b.request({body:O}),sort:(O,_)=>O.id-_.id}),k=async O=>n?T(O):[await b.request({body:O})],[{error:x,result:C}]=await k(P);if(f)return{error:x,result:C};if(x)throw new aa({body:P,error:x,url:v});return C},retryCount:w,retryDelay:d,timeout:A,type:"http"},{fetchOptions:s,url:v})}}const od=u0({id:421614,name:"Arbitrum Sepolia",blockTime:250,nativeCurrency:{name:"Arbitrum Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia-rollup.arbitrum.io/rpc"]}},blockExplorers:{default:{name:"Arbiscan",url:"https://sepolia.arbiscan.io",apiUrl:"https://api-sepolia.arbiscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:81930}},testnet:!0}),Es=u0({id:11155111,name:"Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://11155111.rpc.thirdweb.com"]}},blockExplorers:{default:{name:"Etherscan",url:"https://sepolia.etherscan.io",apiUrl:"https://api-sepolia.etherscan.io/api"}},contracts:{multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:751532},ensUniversalResolver:{address:"0xeeeeeeee14d718c2b47d9923deab1335e144eeee",blockCreated:8928790}},testnet:!0});function yg(){const{subscribe:e,update:t}=Zo([]);function n(){return Math.random().toString(36).substring(2,9)}function r(s,o,a){const i=n(),c={id:i,timestamp:new Date,level:s,message:o,details:a};return t(u=>[...u,c]),i}return{subscribe:e,info:(s,o)=>r("info",s,o),success:(s,o)=>r("success",s,o),error:(s,o)=>r("error",s,o),pending:(s,o)=>r("pending",s,o),warn:(s,o)=>r("warn",s,o),updateLog:(s,o,a,i)=>{t(c=>c.map(u=>u.id===s?{...u,level:o,message:a,details:i,timestamp:new Date}:u))},clear:()=>t(()=>[])}}const F=yg(),mg={sepolia:{entryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",factory:"0x26fC0Bf3D80663A8Bbbe51faAa341b2762C81195",paymaster:"0x18bF042488F4e36Cc65993715F7a14097740BE4F",nft:"0x90B54B4C9B926ACD2F8461196c3371Db920800b2",smartAccount:"0x3D18509a0EaB0F97721D63D29753F39BbF8f1ABd"},arbitrumSepolia:{entryPoint:"0x0000000071727De22E5E9d8BAf0edAc6f37da032",factory:"0x_YOUR_FACTORY_ADDRESS_HERE",paymaster:"0x_YOUR_PAYMASTER_ADDRESS_HERE",nft:"0x_YOUR_NFT_ADDRESS_HERE",smartAccount:"0x_YOUR_SMART_ACCOUNT_ADDRESS_HERE"}},Jt="sepolia";function fe(){return mg[Jt]}const gg={sepolia:11155111,arbitrumSepolia:421614};function wg(){return gg[Jt]}const ir=[{type:"constructor",inputs:[{name:"_myEntryPoint",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"UPGRADE_INTERFACE_VERSION",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"addOwner",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"approveRecovery",inputs:[{name:"recoveryHash",type:"bytes32",internalType:"bytes32"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"execute",inputs:[{name:"dest",type:"address",internalType:"address"},{name:"value",type:"uint256",internalType:"uint256"},{name:"functionData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"executeBatch",inputs:[{name:"dest",type:"address[]",internalType:"address[]"},{name:"value",type:"uint256[]",internalType:"uint256[]"},{name:"data",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"executeRecovery",inputs:[{name:"newOwners",type:"address[]",internalType:"address[]"},{name:"newThreshold",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"getEntryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getOwners",inputs:[],outputs:[{name:"",type:"address[]",internalType:"address[]"}],stateMutability:"view"},{type:"function",name:"getSessionKey",inputs:[{name:"key",type:"address",internalType:"address"}],outputs:[{name:"",type:"tuple",internalType:"struct MyAccount.SessionKey",components:[{name:"expiresAt",type:"uint48",internalType:"uint48"},{name:"oneTime",type:"bool",internalType:"bool"},{name:"used",type:"bool",internalType:"bool"}]}],stateMutability:"view"},{type:"function",name:"guardianApprovalCount",inputs:[{name:"",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"guardianApproved",inputs:[{name:"",type:"bytes32",internalType:"bytes32"},{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"guardianThreshold",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"initialOwners",type:"address[]",internalType:"address[]"},{name:"initialThreshold",type:"uint256",internalType:"uint256"},{name:"initialGuardians",type:"address[]",internalType:"address[]"},{name:"_guardianThreshold",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"isGuardian",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isOwner",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isOwnerGuardian",inputs:[{name:"addr",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"owners",inputs:[{name:"",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"proxiableUUID",inputs:[],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"removeOwner",inputs:[{name:"owner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"revokeSessionKey",inputs:[{name:"key",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"sessionKeys",inputs:[{name:"",type:"address",internalType:"address"}],outputs:[{name:"expiresAt",type:"uint48",internalType:"uint48"},{name:"oneTime",type:"bool",internalType:"bool"},{name:"used",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"setGuardian",inputs:[{name:"g",type:"address",internalType:"address"},{name:"allowed",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setSessionKey",inputs:[{name:"key",type:"address",internalType:"address"},{name:"expiresAt",type:"uint48",internalType:"uint48"},{name:"oneTime",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setThreshold",inputs:[{name:"newThreshold",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"threshold",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"upgradeToAndCall",inputs:[{name:"newImplementation",type:"address",internalType:"address"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"validateUserOp",inputs:[{name:"userOp",type:"tuple",internalType:"struct PackedUserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"accountGasLimits",type:"bytes32",internalType:"bytes32"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"gasFees",type:"bytes32",internalType:"bytes32"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"},{name:"missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"event",name:"GuardianSet",inputs:[{name:"guardian",type:"address",indexed:!0,internalType:"address"},{name:"allowed",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint64",indexed:!1,internalType:"uint64"}],anonymous:!1},{type:"event",name:"MyAccountInitialized",inputs:[{name:"entryPoint",type:"address",indexed:!0,internalType:"contract IEntryPoint"},{name:"owner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnerAdded",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"OwnerRemoved",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"RecoveryApproved",inputs:[{name:"recoveryHash",type:"bytes32",indexed:!0,internalType:"bytes32"},{name:"guardian",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"RecoveryExecuted",inputs:[{name:"recoveryHash",type:"bytes32",indexed:!0,internalType:"bytes32"}],anonymous:!1},{type:"event",name:"SessionKeyRevoked",inputs:[{name:"key",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"SessionKeySet",inputs:[{name:"key",type:"address",indexed:!0,internalType:"address"},{name:"expiresAt",type:"uint48",indexed:!1,internalType:"uint48"},{name:"oneTime",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"SessionKeyUsed",inputs:[{name:"key",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"ThresholdChanged",inputs:[{name:"threshold",type:"uint256",indexed:!1,internalType:"uint256"}],anonymous:!1},{type:"event",name:"Upgraded",inputs:[{name:"implementation",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"error",name:"AddressEmptyCode",inputs:[{name:"target",type:"address",internalType:"address"}]},{type:"error",name:"CannotRemoveLastOwner",inputs:[]},{type:"error",name:"DuplicateSigner",inputs:[]},{type:"error",name:"ECDSAInvalidSignature",inputs:[]},{type:"error",name:"ECDSAInvalidSignatureLength",inputs:[{name:"length",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ECDSAInvalidSignatureS",inputs:[{name:"s",type:"bytes32",internalType:"bytes32"}]},{type:"error",name:"ERC1967InvalidImplementation",inputs:[{name:"implementation",type:"address",internalType:"address"}]},{type:"error",name:"ERC1967NonPayable",inputs:[]},{type:"error",name:"FailedCall",inputs:[]},{type:"error",name:"GuardianAddressEmpty",inputs:[]},{type:"error",name:"InvalidInitialization",inputs:[]},{type:"error",name:"MyAccount__CallFailed",inputs:[{name:"",type:"bytes",internalType:"bytes"}]},{type:"error",name:"MyAccount__NotFromEntryPoint",inputs:[]},{type:"error",name:"MyAccount__NotFromEntryPointOrOwner",inputs:[]},{type:"error",name:"NoOwners",inputs:[]},{type:"error",name:"NotEnoughGuardianApprovals",inputs:[]},{type:"error",name:"NotGuardian",inputs:[]},{type:"error",name:"NotInitializing",inputs:[]},{type:"error",name:"NotOwner",inputs:[]},{type:"error",name:"OnlySelf",inputs:[]},{type:"error",name:"SessionKeyInvalid",inputs:[]},{type:"error",name:"ThresholdOutOfBound",inputs:[]},{type:"error",name:"UUPSUnauthorizedCallContext",inputs:[]},{type:"error",name:"UUPSUnsupportedProxiableUUID",inputs:[{name:"slot",type:"bytes32",internalType:"bytes32"}]}],As=[{type:"constructor",inputs:[{name:"initialOwner",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"function",name:"approve",inputs:[{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"balanceOf",inputs:[{name:"owner",type:"address",internalType:"address"}],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getApproved",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"isApprovedForAll",inputs:[{name:"owner",type:"address",internalType:"address"},{name:"operator",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"name",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"owner",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"ownerOf",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"renounceOwnership",inputs:[],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeMint",inputs:[{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"safeTransferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setApprovalForAll",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"approved",type:"bool",internalType:"bool"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"tokenURI",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"transferFrom",inputs:[{name:"from",type:"address",internalType:"address"},{name:"to",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"transferOwnership",inputs:[{name:"newOwner",type:"address",internalType:"address"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"Approval",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"event",name:"ApprovalForAll",inputs:[{name:"owner",type:"address",indexed:!0,internalType:"address"},{name:"operator",type:"address",indexed:!0,internalType:"address"},{name:"approved",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"OwnershipTransferred",inputs:[{name:"previousOwner",type:"address",indexed:!0,internalType:"address"},{name:"newOwner",type:"address",indexed:!0,internalType:"address"}],anonymous:!1},{type:"event",name:"Transfer",inputs:[{name:"from",type:"address",indexed:!0,internalType:"address"},{name:"to",type:"address",indexed:!0,internalType:"address"},{name:"tokenId",type:"uint256",indexed:!0,internalType:"uint256"}],anonymous:!1},{type:"error",name:"ERC721IncorrectOwner",inputs:[{name:"sender",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"},{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"ERC721InsufficientApproval",inputs:[{name:"operator",type:"address",internalType:"address"},{name:"tokenId",type:"uint256",internalType:"uint256"}]},{type:"error",name:"ERC721InvalidApprover",inputs:[{name:"approver",type:"address",internalType:"address"}]},{type:"error",name:"ERC721InvalidOperator",inputs:[{name:"operator",type:"address",internalType:"address"}]},{type:"error",name:"ERC721InvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"ERC721InvalidReceiver",inputs:[{name:"receiver",type:"address",internalType:"address"}]},{type:"error",name:"ERC721InvalidSender",inputs:[{name:"sender",type:"address",internalType:"address"}]},{type:"error",name:"ERC721NonexistentToken",inputs:[{name:"tokenId",type:"uint256",internalType:"uint256"}]},{type:"error",name:"OwnableInvalidOwner",inputs:[{name:"owner",type:"address",internalType:"address"}]},{type:"error",name:"OwnableUnauthorizedAccount",inputs:[{name:"account",type:"address",internalType:"address"}]}],ad=[{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"accountGasLimits",type:"bytes32"},{name:"preVerificationGas",type:"uint256"},{name:"gasFees",type:"bytes32"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"}],vg={sepolia:Es,arbitrumSepolia:od},nc=vg[Jt];function xg(){const{subscribe:e,set:t,update:n}=Zo({connected:!1,address:null,publicClient:null,walletClient:null});return{subscribe:e,connect:async()=>{try{if(typeof window>"u"||!window.ethereum)return F.error("MetaMask not detected","Please install MetaMask"),!1;F.pending("Connecting wallet...");const r=await window.ethereum.request({method:"eth_requestAccounts"});if(!r||r.length===0)return F.error("No accounts found"),!1;const s=await window.ethereum.request({method:"eth_chainId"}),o=`0x${wg().toString(16)}`;if(s!==o){F.info(`Switching to ${Jt}...`);try{await window.ethereum.request({method:"wallet_switchEthereumChain",params:[{chainId:o}]})}catch(u){if(u.code===4902)return F.error("Please add the network to MetaMask"),!1;throw u}}const a=ed({chain:nc,transport:sd()}),i=r[0],c=pg({account:i,chain:nc,transport:hg(window.ethereum)});return t({connected:!0,address:i,publicClient:a,walletClient:c}),F.success(`Connected: ${i.slice(0,6)}...${i.slice(-4)}`),!0}catch(r){const s=r;return F.error("Connection failed",s.message),!1}},disconnect:()=>{t({connected:!1,address:null,publicClient:null,walletClient:null}),F.info("Wallet disconnected")}}}function Eg(){const{subscribe:e,set:t,update:n}=Zo({address:null,balance:"0",owners:[],threshold:1,isDeployed:!1});return{subscribe:e,load:async r=>{try{const o=fe().smartAccount;F.info(`Loading Smart Account: ${o.slice(0,10)}...`);const a=await r.getBytecode({address:o});if(!(a!==void 0&&a!=="0x")){F.warn("Smart Account not deployed yet"),t({address:o,balance:"0",owners:[],threshold:1,isDeployed:!1});return}const c=await r.getBalance({address:o}),[u,d]=await Promise.all([r.readContract({address:o,abi:ir,functionName:"getOwners"}),r.readContract({address:o,abi:ir,functionName:"threshold"})]);t({address:o,balance:zt(c),owners:u,threshold:Number(d),isDeployed:!0}),F.success("Smart Account loaded",`Balance: ${zt(c)} ETH, Owners: ${u.length}, Threshold: ${d}`)}catch(s){const o=s;F.error("Failed to load Smart Account",o.message)}},refresh:async r=>{const o=fe().smartAccount;try{const a=await r.getBalance({address:o});n(i=>({...i,balance:zt(a)}))}catch(a){console.error("Refresh failed:",a)}}}}const _n=xg(),Mr=Eg();pd(_n,e=>e.connected);function Nn(e,t=4){return`${e.slice(0,t+2)}...${e.slice(-t)}`}function Ag(e){return e.toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"})}function Pg(e,t=4){const n=parseFloat(e);return n===0?"0":n<1e-4?"< 0.0001":n.toFixed(t)}function ao(){return BigInt(Math.floor(Math.random()*1e6))}var Tg=ee('<button class="connect-btn svelte-wlrh8d"><span class="btn-icon svelte-wlrh8d">â</span> CONNECT METAMASK</button>'),$g=ee('<span class="status-badge deployed svelte-wlrh8d">DEPLOYED</span>'),Ig=ee('<span class="status-badge svelte-wlrh8d">NOT DEPLOYED</span>'),Sg=ee('<div class="owner-row svelte-wlrh8d"><span class="owner-index svelte-wlrh8d"></span> <span class="value copyable svelte-wlrh8d" role="button" tabindex="0" title="Click to copy"> </span></div>'),Bg=ee('<div class="owners-list svelte-wlrh8d"></div>'),Cg=ee('<div class="wallet-info svelte-wlrh8d"><div class="info-row svelte-wlrh8d"><span class="label svelte-wlrh8d">EOA</span> <span class="value copyable svelte-wlrh8d" role="button" tabindex="0" title="Click to copy"> </span></div> <div class="divider svelte-wlrh8d"></div> <div class="info-row svelte-wlrh8d"><span class="label svelte-wlrh8d">SMART ACCOUNT</span> <!></div> <div class="info-row svelte-wlrh8d"><span class="label svelte-wlrh8d">ADDRESS</span> <span class="value copyable svelte-wlrh8d" role="button" tabindex="0" title="Click to copy"> </span></div> <div class="info-row svelte-wlrh8d"><span class="label svelte-wlrh8d">BALANCE</span> <span class="value highlight svelte-wlrh8d"> </span></div> <div class="info-row svelte-wlrh8d"><span class="label svelte-wlrh8d">OWNERS</span> <span class="value svelte-wlrh8d"> </span></div> <div class="info-row svelte-wlrh8d"><span class="label svelte-wlrh8d">THRESHOLD</span> <span class="value svelte-wlrh8d"> </span></div> <div class="info-row svelte-wlrh8d"><span class="label svelte-wlrh8d">PAYMASTER</span> <span class="value copyable svelte-wlrh8d" role="button" tabindex="0" title="Click to copy"> </span></div> <div class="info-row svelte-wlrh8d"><span class="label svelte-wlrh8d">EP DEPOSIT</span> <span class="value highlight svelte-wlrh8d"> </span></div> <!> <div class="action-buttons svelte-wlrh8d"><button class="action-btn svelte-wlrh8d">â» REFRESH</button> <button class="action-btn svelte-wlrh8d"> </button> <button class="action-btn disconnect svelte-wlrh8d">â DISCONNECT</button></div></div>'),kg=ee('<div class="wallet-panel svelte-wlrh8d"><div class="panel-header svelte-wlrh8d"><div></div> <span>WALLET</span> <span class="network-badge svelte-wlrh8d"> </span></div> <div class="panel-content svelte-wlrh8d"><!></div></div>');function Ng(e,t){Jr(t,!1);const n=()=>Rr(_n,"$wallet",s),r=()=>Rr(Mr,"$smartAccount",s),[s,o]=dc(),a=[{type:"function",name:"depositTo",stateMutability:"payable",inputs:[{name:"account",type:"address"}],outputs:[]},{type:"function",name:"balanceOf",stateMutability:"view",inputs:[{name:"account",type:"address"}],outputs:[{name:"",type:"uint256"}]}];let i=ft(0n),c=ft(!1);async function u(){if(!n().publicClient)return;const T=fe();ne(i,await n().publicClient.readContract({address:T.entryPoint,abi:a,functionName:"balanceOf",args:[T.paymaster]}))}async function d(){if(n().walletClient){ne(c,!0);try{const T=fe(),k=bm("0.01"),x=await n().walletClient.writeContract({address:T.entryPoint,abi:a,functionName:"depositTo",args:[T.paymaster],value:k,chain:Es,account:n().walletClient.account});F.success("Paymaster funded",`Tx: ${x.slice(0,18)}...`),F.success("Tx on etherscan",`https://sepolia.etherscan.io/tx/${x}`),await u()}catch(T){const k=T;F.error("Funding failed",k.message)}ne(c,!1)}}async function f(){await _n.connect()&&n().publicClient&&(await Mr.load(n().publicClient),await u())}async function l(){n().publicClient&&(await Mr.load(n().publicClient),await u())}async function p(T,k){try{await navigator.clipboard.writeText(T),F.info("Copied to clipboard",k??T)}catch{F.error("Copy failed","Clipboard not available")}}Yr();var h=kg(),y=U(h),m=U(y);let w;var A=G(m,4),v=U(A,!0);L(A),L(y);var b=G(y,2),g=U(b);{var E=T=>{var k=Tg();re("click",k,f),Z(T,k)},P=T=>{var k=Cg(),x=U(k),C=G(U(x),2),O=U(C,!0);L(C),L(x);var _=G(x,4),j=G(U(_),2);{var I=K=>{var Be=$g();Z(K,Be)},S=K=>{var Be=Ig();Z(K,Be)};tt(j,K=>{r().isDeployed?K(I):K(S,!1)})}L(_);var M=G(_,2),B=G(U(M),2),R=U(B,!0);L(B),L(M);var D=G(M,2),V=G(U(D),2),W=U(V);L(V),L(D);var he=G(D,2),oe=G(U(he),2),te=U(oe,!0);L(oe),L(he);var ae=G(he,2),be=G(U(ae),2),Me=U(be);L(be),L(ae);var ie=G(ae,2),ye=G(U(ie),2),Nt=U(ye,!0);L(ye),L(ie);var $e=G(ie,2),Ie=G(U($e),2),st=U(Ie);L(Ie),L($e);var Se=G($e,2);{var vt=K=>{var Be=Bg();fc(Be,5,()=>r().owners,Wd,(Pn,De,ot)=>{var _t=Sg(),Tn=U(_t);Tn.textContent=`#${ot+1}`;var Xt=G(Tn,2),fd=U(Xt,!0);L(Xt),L(_t),et($n=>X(fd,$n),[()=>Nn(H(De)||"",6)]),re("click",Xt,()=>p(H(De)||"","EOA address")),re("keydown",Xt,$n=>{($n.key==="Enter"||$n.key===" ")&&($n.preventDefault(),p(H(De)||"","EOA address"))}),Z(Pn,_t)}),L(Be),Z(K,Be)};tt(Se,K=>{r().owners.length>0&&K(vt)})}var An=G(Se,2),Tr=U(An),Ot=G(Tr,2),Ss=U(Ot,!0);L(Ot);var $r=G(Ot,2);L(An),L(k),et((K,Be,Pn,De,ot)=>{X(O,K),X(R,Be),X(W,`${Pn??""} ETH`),X(te,r().owners.length),X(Me,`${r().threshold??""}/${r().owners.length??""}`),X(Nt,De),X(st,`${ot??""} ETH`),Ot.disabled=H(c),X(Ss,H(c)?"â¦ FUNDING":"+ FUND 0.01")},[()=>Nn(n().address||"",6),()=>Nn(r().address||"",6),()=>Pg(r().balance),()=>Nn(fe().paymaster,6),()=>Number(zt(H(i))).toFixed(4)]),re("click",C,()=>p(n().address||"","EOA address")),re("keydown",C,K=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),p(n().address||"","EOA address"))}),re("click",B,()=>p(r().address||"","Smart account address")),re("keydown",B,K=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),p(r().address||"","Smart account address"))}),re("click",ye,()=>p(fe().paymaster,"EOA address")),re("keydown",ye,K=>{(K.key==="Enter"||K.key===" ")&&(K.preventDefault(),p(fe().paymaster,"EOA address"))}),re("click",Tr,l),re("click",Ot,d),re("click",$r,function(...K){_n.disconnect?.apply(this,K)}),Z(T,k)};tt(g,T=>{n().connected?T(P,!1):T(E)})}L(b),L(h),et(T=>{w=Fr(m,1,"status-dot svelte-wlrh8d",null,w,{connected:n().connected}),X(v,T)},[()=>Jt.toUpperCase()]),Z(e,h),Xr(),o()}const Og="pim_GT2fGostX279KhCRWvECRs",_g={sepolia:Es,arbitrumSepolia:od},id=_g[Jt],Mg=`https://api.pimlico.io/v2/${id.id}/rpc?apikey=${Og}`;function Va(){return{publicClient:ed({chain:id,transport:sd()})}}async function cd(e,t){console.log("ð¤ Bundler RPC:",e),console.log("ð¤ Params:",JSON.stringify(t,null,2));const r=await(await fetch(Mg,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({jsonrpc:"2.0",id:Date.now(),method:e,params:t})})).json();if(console.log("ð¥ Bundler response:",JSON.stringify(r,null,2)),r.error){let s="Unknown bundler error";throw typeof r.error=="string"?s=r.error:r.error.message?s=r.error.message:r.error.data?.message?s=r.error.data.message:r.error.data?s=JSON.stringify(r.error.data):s=JSON.stringify(r.error),new Error(s)}if(r.result===void 0)throw new Error("No result from bundler");return r.result}function Rg(e,t){const n=e.toString(16).padStart(32,"0"),r=t.toString(16).padStart(32,"0");return`0x${n}${r}`}function Fg(e,t){const n=e.toString(16).padStart(32,"0"),r=t.toString(16).padStart(32,"0");return`0x${n}${r}`}const xe={verificationGasLimit:500000n,callGasLimit:500000n,preVerificationGas:100000n,paymasterVerificationGasLimit:100000n,paymasterPostOpGasLimit:50000n,maxFeePerGas:50000000000n,maxPriorityFeePerGas:2000000000n};function zg(e,t=!0){const n=fe(),r={sender:e.sender,nonce:Q(e.nonce),callData:e.callData,callGasLimit:Q(xe.callGasLimit),verificationGasLimit:Q(xe.verificationGasLimit),preVerificationGas:Q(xe.preVerificationGas),maxFeePerGas:Q(xe.maxFeePerGas),maxPriorityFeePerGas:Q(xe.maxPriorityFeePerGas),signature:e.signature};return t&&(r.paymaster=n.paymaster,r.paymasterVerificationGasLimit=Q(xe.paymasterVerificationGasLimit),r.paymasterPostOpGasLimit=Q(xe.paymasterPostOpGasLimit),r.paymasterData="0x"),r}function Lg(e){const t=e.slice(2).toLowerCase(),n=xe.paymasterVerificationGasLimit.toString(16).padStart(32,"0"),r=xe.paymasterPostOpGasLimit.toString(16).padStart(32,"0");return`0x${t}${n}${r}`}async function Ug(e,t){const n=fe();return await e.readContract({address:n.entryPoint,abi:ad,functionName:"getNonce",args:[t,0n]})}async function Ps(e,t,n,r){const s=fe(),o=s.smartAccount;F.info("Building UserOperation...");const a=await Ug(e,o);F.info(`Nonce: ${a}`);const i=pe({abi:ir,functionName:"execute",args:[t,n,r]}),c=Lg(s.paymaster),u={sender:o,nonce:a,initCode:"0x",callData:i,accountGasLimits:Rg(xe.verificationGasLimit,xe.callGasLimit),preVerificationGas:xe.preVerificationGas,gasFees:Fg(xe.maxPriorityFeePerGas,xe.maxFeePerGas),paymasterAndData:c,signature:"0x"};return F.success("UserOp built"),u}async function Ts(e,t){const n=fe();return console.log("Getting hash for userOp:",{sender:t.sender,nonce:t.nonce.toString(),initCode:t.initCode,callData:t.callData.slice(0,50)+"...",accountGasLimits:t.accountGasLimits,preVerificationGas:t.preVerificationGas.toString(),gasFees:t.gasFees,paymasterAndData:t.paymasterAndData.slice(0,50)+"...",signature:t.signature}),await e.readContract({address:n.entryPoint,abi:ad,functionName:"getUserOpHash",args:[t]})}async function $s(e){F.pending("Submitting to bundler...");try{const t=fe(),n=zg(e);F.info("Sending eth_sendUserOperation...");const r=await cd("eth_sendUserOperation",[n,t.entryPoint]);return F.success("UserOp submitted",`Hash: ${r.slice(0,18)}...`),r}catch(t){const n=t;throw F.error("Bundler rejected UserOp",n.message),n}}async function Is(e){const t=F.pending("Waiting for confirmation...");try{let n=null,r=0;const s=60;for(;!n&&r<s;){await new Promise(a=>setTimeout(a,2e3));try{n=await cd("eth_getUserOperationReceipt",[e])}catch{}r++}if(!n)throw new Error("Timeout waiting for UserOp receipt");const o=n.receipt.transactionHash;return F.updateLog(t,"success","Transaction confirmed!",`Tx: ${o.slice(0,18)}...`),o}catch(n){const r=n;throw F.updateLog(t,"error","Transaction failed",r.message),r}}function Dg(){return Q(Ar.utils.randomPrivateKey())}function Gg(e){if(typeof e=="string"){if(!ue(e,{strict:!1}))throw new we({address:e});return{address:e,type:"json-rpc"}}if(!ue(e.address,{strict:!1}))throw new we({address:e.address});return{address:e.address,nonceManager:e.nonceManager,sign:e.sign,signAuthorization:e.signAuthorization,signMessage:e.signMessage,signTransaction:e.signTransaction,signTypedData:e.signTypedData,source:"custom",type:"local"}}let io=!1;async function Pr({hash:e,privateKey:t,to:n="object"}){const{r,s,recovery:o}=Ar.sign(e.slice(2),t.slice(2),{lowS:!0,extraEntropy:qe(io,{strict:!1})?Ve(io):io}),a={r:N(r,{size:32}),s:N(s,{size:32}),v:o?28n:27n,yParity:o};return n==="bytes"||n==="hex"?J0({...a,to:n}):a}async function jg(e){const{chainId:t,nonce:n,privateKey:r,to:s="object"}=e,o=e.contractAddress??e.address,a=await Pr({hash:uu({address:o,chainId:t,nonce:n}),privateKey:r,to:s});return s==="object"?{address:o,chainId:t,nonce:n,...a}:a}async function Hg({message:e,privateKey:t}){return await Pr({hash:Oa(e),privateKey:t,to:"hex"})}async function qg(e){const{privateKey:t,transaction:n,serializer:r=D1}=e,s=n.type==="eip4844"?{...n,sidecars:!1}:n,o=await Pr({hash:le(await r(s)),privateKey:t});return await r(n,o)}async function Vg(e){const{privateKey:t,...n}=e;return await Pr({hash:l0(n),privateKey:t,to:"hex"})}function Wa(e,t={}){const{nonceManager:n}=t,r=Q(Ar.getPublicKey(e.slice(2),!1)),s=ou(r);return{...Gg({address:s,nonceManager:n,async sign({hash:a}){return Pr({hash:a,privateKey:e,to:"hex"})},async signAuthorization(a){return jg({...a,privateKey:e})},async signMessage({message:a}){return Hg({message:a,privateKey:e})},async signTransaction(a,{serializer:i}={}){return qg({privateKey:e,transaction:a,serializer:i})},async signTypedData(a){return Vg({...a,privateKey:e})}}),publicKey:r,source:"privateKey"}}const ud=0,Wg=1;function Kg(e=5,t=!1){const n=Dg(),r=Wa(n),s=Math.floor(Date.now()/1e3)+e*60;return F.info(`Session key generated: ${r.address.slice(0,10)}...`,`Expires: ${new Date(s*1e3).toLocaleTimeString()}, OneTime: ${t}`),{privateKey:n,address:r.address,expiresAt:s,oneTime:t}}async function dd(e,t,n){F.info(`Signing with owner: ${n.slice(0,10)}...`);const r=await e.signMessage({account:n,message:{raw:t}}),s=Ne(It("uint8, bytes"),[ud,Ne(It("address[], bytes[]"),[[n],[r]])]);return F.success("Signature complete"),s}async function Zg(e,t,n,r){F.info(`Multi-sig signing with ${n.length} owners...`);const s=[],o=[],a=e.account?.address;if(a&&n.includes(a)){F.info(`Signing with connected wallet: ${a.slice(0,10)}...`);const c=await e.signMessage({account:a,message:{raw:t}});s.push(a),o.push(c)}if(r)for(const{address:c,signature:u}of r)F.info(`Adding signature from: ${c.slice(0,10)}...`),s.push(c),o.push(u);const i=Ne(It("uint8, bytes"),[ud,Ne(It("address[], bytes[]"),[s,o])]);return F.success(`Multi-sig complete: ${s.length} signatures`),i}async function Yg(e,t){F.info(`Signing with session key: ${e.address.slice(0,10)}...`);const r=await Wa(e.privateKey).signMessage({message:{raw:t}}),s=Ne(It("uint8, bytes"),[Wg,Ne(It("address, bytes"),[e.address,r])]);return F.success("Session key signature complete"),s}async function Jg(e,t){const n=Wa(e),r=await n.signMessage({message:{raw:t}});return{address:n.address,signature:r}}async function Xg(e,t,n){const r=fe();console.log("=== Mint NFT (Single Owner) ==="),console.log("paymaster deposit");const s=pe({abi:As,functionName:"safeMint",args:[r.smartAccount,n]}),o=await Ps(t,r.nft,0n,s),a=await Ts(t,o);F.info(`UserOp hash: ${a.slice(0,18)}...`);const i=e.account?.address;if(!i)throw new Error("Wallet not connected");o.signature=await dd(e,a,i);try{const c=await $s(o),u=await Is(c);return F.success(`NFT #${n} minted!`,`Tx: ${u}`),F.success("Tx on etherscan",`https://sepolia.etherscan.io/tx/${u}`),u}catch(c){throw console.error("Bundler error (full):",c),console.error("cause:",c?.cause),console.error("details:",c?.details),console.error("shortMessage:",c?.shortMessage),console.error("data:",c?.data??c?.cause?.data),c}}async function Qg(e,t,n,r){const s=fe();F.info("=== Mint NFT (Multi-Sig) ===");const o=pe({abi:As,functionName:"safeMint",args:[s.smartAccount,n]}),a=await Ps(t,s.nft,0n,o),i=await Ts(t,a);F.info(`UserOp hash: ${i.slice(0,18)}...`);const c=e.account?.address;if(!c)throw new Error("Wallet not connected");const u=await Jg(r,i);F.info(`Simulated owner 2: ${u.address.slice(0,10)}...`),a.signature=await Zg(e,i,[c],[u]);const{bundlerClient:d}=Va();await $s(d);const f=await Is(d);return F.success(`NFT #${n} minted with multi-sig!`,`Tx: ${f}`),F.success("Tx on etherscan",`https://sepolia.etherscan.io/tx/${f}`),f}async function e6(e,t,n){const r=fe();F.info("=== Setting Session Key On-Chain ===");const s=pe({abi:ir,functionName:"setSessionKey",args:[n.address,n.expiresAt,n.oneTime]}),o=await Ps(t,r.smartAccount,0n,s),a=await Ts(t,o),i=e.account?.address;if(!i)throw new Error("Wallet not connected");o.signature=await dd(e,a,i);const{bundlerClient:c}=Va();await $s(c);const u=await Is(c);return F.success("Session key registered on-chain!",`Key: ${n.address.slice(0,10)}...`),F.success("Tx on etherscan",`https://sepolia.etherscan.io/tx/${u}`),u}async function t6(e,t,n){const r=fe();F.info("=== Mint NFT (Session Key) ===");const s=pe({abi:As,functionName:"safeMint",args:[r.smartAccount,n]}),o=await Ps(e,r.nft,0n,s),a=await Ts(e,o);F.info(`UserOp hash: ${a.slice(0,18)}...`),o.signature=await Yg(t,a);const{bundlerClient:i}=Va();await $s(i);const c=await Is(i);return F.success(`NFT #${n} minted with session key!`,`Tx: ${c}`),F.success("Tx on etherscan",`https://sepolia.etherscan.io/tx/${c}`),c}async function rc(e,t){const n=fe(),r=await e.readContract({address:n.smartAccount,abi:ir,functionName:"getSessionKey",args:[t]}),[s,o,a]=r;return{expiresAt:Number(s),oneTime:o,used:a}}var n6=ee('<div class="disabled-overlay svelte-1sy5nox"><span>Connect wallet to enable actions</span></div>'),r6=ee('<div class="disabled-overlay svelte-1sy5nox"><span>Smart Account not deployed</span></div>'),s6=ee('<p class="section-desc svelte-1sy5nox">Create a temporary session key</p> <div class="button-group svelte-1sy5nox"><button class="action-btn tertiary svelte-1sy5nox">CREATE (5 MIN)</button> <button class="action-btn tertiary svelte-1sy5nox">CREATE (ONE-TIME)</button></div>',1),o6=ee('<div class="key-row svelte-1sy5nox"><span class="key-label svelte-1sy5nox">Status</span> <span> </span></div>'),a6=ee('<div class="session-key-info svelte-1sy5nox"><div class="key-row svelte-1sy5nox"><span class="key-label svelte-1sy5nox">Address</span> <span class="key-value svelte-1sy5nox"> </span></div> <div class="key-row svelte-1sy5nox"><span class="key-label svelte-1sy5nox">Expires</span> <span class="key-value svelte-1sy5nox"> </span></div> <div class="key-row svelte-1sy5nox"><span class="key-label svelte-1sy5nox">Type</span> <span> </span></div> <!></div> <div class="button-group svelte-1sy5nox"><button class="action-btn primary svelte-1sy5nox">MINT WITH KEY</button> <button class="action-btn tertiary svelte-1sy5nox">CHECK</button> <button class="action-btn danger svelte-1sy5nox">CLEAR</button></div>',1),i6=ee('<div class="action-section svelte-1sy5nox"><div class="section-title svelte-1sy5nox"><span class="section-icon svelte-1sy5nox">1</span> SINGLE OWNER MINT</div> <p class="section-desc svelte-1sy5nox">Mint NFT with single owner signature</p> <button class="action-btn primary svelte-1sy5nox"> </button></div> <div class="action-section svelte-1sy5nox"><div class="section-title svelte-1sy5nox"><span class="section-icon svelte-1sy5nox">2</span> MULTI-SIG MINT</div> <p class="section-desc svelte-1sy5nox"> </p> <div class="input-group svelte-1sy5nox"><label class="svelte-1sy5nox">Simulated Owner 2 Key</label> <input type="text" placeholder="0x..." class="svelte-1sy5nox"/></div> <button class="action-btn secondary svelte-1sy5nox"> </button></div> <div class="action-section svelte-1sy5nox"><div class="section-title svelte-1sy5nox"><span class="section-icon svelte-1sy5nox">3</span> SESSION KEYS</div> <!></div>',1),c6=ee('<div class="actions-panel svelte-1sy5nox"><div class="panel-header svelte-1sy5nox"><span class="action-icon svelte-1sy5nox">â</span> <span>ACTIONS</span></div> <div class="panel-content svelte-1sy5nox"><!></div></div>');function u6(e,t){Jr(t,!1);const n=()=>Rr(_n,"$wallet",s),r=()=>Rr(Mr,"$smartAccount",s),[s,o]=dc();let a=ft(!1),i=ft(null),c=ft(null),u=ft("0xac0974bec39a17e36ba4a6b4d238ff944bacb478cbed5efcae784d7bf4f2ff80");async function d(){if(!(!n().walletClient||!n().publicClient)){ne(a,!0);try{const g=ao();await n().walletClient.writeContract({abi:As,functionName:"transferOwnership",args:[r().address],chain:Es,account:n().walletClient.account,address:fe().nft}),await Xg(n().walletClient,n().publicClient,g)}catch(g){const E=g;F.error("Mint failed",E.message)}ne(a,!1)}}async function f(){if(!(!n().walletClient||!n().publicClient)){if(r().threshold<2){F.warn("Threshold is 1","Set threshold to 2 for multi-sig demo");return}ne(a,!0);try{const g=ao();await Qg(n().walletClient,n().publicClient,g,H(u))}catch(g){const E=g;F.error("Multi-sig mint failed",E.message)}ne(a,!1)}}async function l(g){if(!(!n().walletClient||!n().publicClient)){ne(a,!0);try{const E=Kg(5,g);await e6(n().walletClient,n().publicClient,E),ne(i,E),ne(c,null),F.success("Session key ready!",`Address: ${E.address.slice(0,10)}... | OneTime: ${g}`)}catch(E){const P=E;F.error("Session key creation failed",P.message)}ne(a,!1)}}async function p(){if(!(!n().publicClient||!H(i))){ne(a,!0);try{const g=ao();await t6(n().publicClient,H(i),g),H(i).oneTime&&(ne(c,await rc(n().publicClient,H(i).address)),H(c).used&&F.info("One-time key is now USED","Cannot be used again"))}catch(g){const E=g;F.error("Session key mint failed",E.message)}ne(a,!1)}}async function h(){if(!(!n().publicClient||!H(i)))try{ne(c,await rc(n().publicClient,H(i).address)),F.info("Session key status",`Expires: ${new Date(H(c).expiresAt*1e3).toLocaleTimeString()} | Used: ${H(c).used}`)}catch(g){const E=g;F.error("Check failed",E.message)}}function y(){ne(i,null),ne(c,null),F.info("Session key cleared from memory")}Yr();var m=c6(),w=G(U(m),2),A=U(w);{var v=g=>{var E=n6();Z(g,E)},b=g=>{var E=sc(),P=Cn(E);{var T=x=>{var C=r6();Z(x,C)},k=x=>{var C=i6(),O=Cn(C),_=G(U(O),4),j=U(_,!0);L(_),L(O);var I=G(O,2),S=G(U(I),2),M=U(S);L(S);var B=G(S,2),R=G(U(B),2);ef(R),L(B);var D=G(B,2),V=U(D,!0);L(D),L(I);var W=G(I,2),he=G(U(W),2);{var oe=ae=>{var be=s6(),Me=G(Cn(be),2),ie=U(Me),ye=G(ie,2);L(Me),et(()=>{ie.disabled=H(a),ye.disabled=H(a)}),re("click",ie,()=>l(!1)),re("click",ye,()=>l(!0)),Z(ae,be)},te=ae=>{var be=a6(),Me=Cn(be),ie=U(Me),ye=G(U(ie),2),Nt=U(ye,!0);L(ye),L(ie);var $e=G(ie,2),Ie=G(U($e),2),st=U(Ie,!0);L(Ie),L($e);var Se=G($e,2),vt=G(U(Se),2);let An;var Tr=U(vt,!0);L(vt),L(Se);var Ot=G(Se,2);{var Ss=De=>{var ot=o6(),_t=G(U(ot),2);let Tn;var Xt=U(_t,!0);L(_t),L(ot),et(()=>{Tn=Fr(_t,1,"key-value svelte-1sy5nox",null,Tn,{used:H(c).used}),X(Xt,H(c).used?"USED â":"VALID â")}),Z(De,ot)};tt(Ot,De=>{H(c)&&De(Ss)})}L(Me);var $r=G(Me,2),K=U($r),Be=G(K,2),Pn=G(Be,2);L($r),et((De,ot)=>{X(Nt,De),X(st,ot),An=Fr(vt,1,"key-value svelte-1sy5nox",null,An,{"one-time":H(i).oneTime}),X(Tr,H(i).oneTime?"ONE-TIME":"REUSABLE"),K.disabled=H(a)||(H(c)?.used??!1),Be.disabled=H(a)},[()=>Nn(H(i).address,6),()=>new Date(H(i).expiresAt*1e3).toLocaleTimeString()]),re("click",K,p),re("click",Be,h),re("click",Pn,y),Z(ae,be)};tt(he,ae=>{H(i)?ae(te,!1):ae(oe)})}L(W),et(()=>{_.disabled=H(a),X(j,H(a)?"PROCESSING...":"MINT NFT"),X(M,`Mint with ${r().threshold??""} signatures (threshold: ${r().threshold??""})`),D.disabled=H(a)||r().threshold<2,X(V,r().threshold<2?"THRESHOLD = 1":"MINT (MULTI-SIG)")}),re("click",_,d),rf(R,()=>H(u),ae=>ne(u,ae)),re("click",D,f),Z(x,C)};tt(P,x=>{r().isDeployed?x(k,!1):x(T)},!0)}Z(g,E)};tt(A,g=>{n().connected?g(b,!1):g(v)})}L(w),L(m),Z(e,m),Xr(),o()}var d6=ee('<div class="log-entry log-info svelte-1tofi5f"><span class="log-time svelte-1tofi5f">[--:--:--]</span> <span class="log-icon svelte-1tofi5f">â</span> <span class="log-message svelte-1tofi5f">Awaiting actions...</span></div>'),f6=ee('<a target="_blank" rel="noopener noreferrer" class="log-link svelte-1tofi5f"> </a>'),l6=ee('<span class="log-details svelte-1tofi5f"><!></span>'),p6=ee('<div><span class="log-time svelte-1tofi5f"> </span> <span class="log-icon svelte-1tofi5f"> </span> <span class="log-message svelte-1tofi5f"> </span> <!></div>'),h6=ee('<div class="logs-panel svelte-1tofi5f"><div class="logs-header svelte-1tofi5f"><span class="terminal-icon svelte-1tofi5f">â¸</span> <span class="svelte-1tofi5f">LOGS</span> <button class="clear-btn svelte-1tofi5f">CLEAR</button></div> <div class="logs-content svelte-1tofi5f"><!> <div class="cursor-line svelte-1tofi5f"><span class="cursor svelte-1tofi5f">_</span></div></div></div>');function b6(e,t){Jr(t,!1);let n=ft(),r=ft([]);F.subscribe(h=>{ne(r,h),setTimeout(()=>{H(n)&&Gd(n,H(n).scrollTop=H(n).scrollHeight)},10)});function s(h){switch(h){case"success":return"â";case"error":return"â";case"pending":return"â³";case"warn":return"â ";default:return"â"}}function o(h){return`log-${h}`}function a(h){try{const y=new URL(h);return y.protocol==="http:"||y.protocol==="https:"}catch{return!1}}Yr();var i=h6(),c=U(i),u=G(U(c),4);L(c);var d=G(c,2),f=U(d);{var l=h=>{var y=d6();Z(h,y)},p=h=>{var y=sc(),m=Cn(y);fc(m,1,()=>H(r),w=>w.id,(w,A)=>{var v=p6(),b=U(v),g=U(b);L(b);var E=G(b,2),P=U(E,!0);L(E);var T=G(E,2),k=U(T,!0);L(T);var x=G(T,2);{var C=O=>{var _=l6(),j=U(_);{var I=M=>{var B=f6(),R=U(B,!0);L(B),et(()=>{lo(B,"href",H(A).details),X(R,H(A).details)}),Z(M,B)},S=M=>{var B=ld();et(()=>X(B,H(A).details)),Z(M,B)};tt(j,M=>{a(H(A).details)?M(I):M(S,!1)})}L(_),Z(O,_)};tt(x,O=>{H(A).details&&O(C)})}L(v),et((O,_,j)=>{Fr(v,1,`log-entry ${O??""}`,"svelte-1tofi5f"),X(g,`[${_??""}]`),X(P,j),X(k,H(A).message)},[()=>o(H(A).level),()=>Ag(H(A).timestamp),()=>s(H(A).level)]),Z(w,v)}),Z(h,y)};tt(f,h=>{H(r).length===0?h(l):h(p,!1)})}uo(2),L(d),Vd(d,h=>ne(n,h),()=>H(n)),L(i),re("click",u,()=>F.clear()),Z(e,i),Xr()}var y6=ee('<link rel="preconnect" href="https://fonts.googleapis.com"/> <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/> <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;600&amp;family=Space+Grotesk:wght@400;500;600&amp;display=swap" rel="stylesheet"/>',1),m6=ee('<div class="app svelte-1uha8ag"><header class="header svelte-1uha8ag"><div class="logo svelte-1uha8ag"><span class="logo-icon svelte-1uha8ag">â</span> <span class="logo-text svelte-1uha8ag">AA WALLET</span></div> <div class="header-info svelte-1uha8ag"><span class="version svelte-1uha8ag">ERC-4337 v0.7</span> <a href="https://github.com/ayabelarbi/smart-accounts/blob/main/README.md" target="_blank" rel="noopener noreferrer" class="github-link svelte-1uha8ag">DOCS â</a></div></header> <main class="main svelte-1uha8ag"><div class="grid svelte-1uha8ag"><div class="left-column svelte-1uha8ag"><!> <!></div> <div class="right-column svelte-1uha8ag"><!></div></div></main> <div class="bg-grid svelte-1uha8ag"></div></div>');function H6(e,t){Jr(t,!1),hd(()=>{F.info("AA Wallet Frontend initialized"),F.info(`Network: ${Jt}`),F.info("Ready to connect...")}),Yr();var n=m6();qd("1uha8ag",d=>{var f=y6();uo(4),jd(()=>{Hd.title="AA Wallet | Account Abstraction Demo"}),Z(d,f)});var r=G(U(n),2),s=U(r),o=U(s),a=U(o);Ng(a,{});var i=G(a,2);u6(i,{}),L(o);var c=G(o,2),u=U(c);b6(u,{}),L(c),L(s),L(r),uo(2),L(n),Z(e,n),Xr()}export{$ as B,On as H,H6 as _,i1 as a,Ue as b,ps as c,yp as d,Ne as e,qe as f,oa as g,yr as i,ms as l,ce as s};
